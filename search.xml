<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>camera-imuè”åˆæ ‡å®š</title>
      <link href="/2023/04/23/camera-imu%E8%81%94%E5%90%88%E6%A0%87%E5%AE%9A/"/>
      <url>/2023/04/23/camera-imu%E8%81%94%E5%90%88%E6%A0%87%E5%AE%9A/</url>
      
        <content type="html"><![CDATA[<h1 id="IMU-cameraè”åˆæ ‡å®š"><a href="#IMU-cameraè”åˆæ ‡å®š" class="headerlink" title="IMU-cameraè”åˆæ ‡å®š"></a>IMU-cameraè”åˆæ ‡å®š</h1><p><img src="https://res.craft.do/user/full/263e5170-1edd-c6df-5898-f56572924e86/doc/b083fb8b-a3c8-4d57-90b3-31446d0db472/03032585-cda8-45cd-92c6-965fd90503c0" alt="æ¦‚è§ˆ.jpg"></p><h1 id="Kalibr"><a href="#Kalibr" class="headerlink" title="Kalibr"></a>Kalibr</h1><h3 id="kalibrå®˜æ–¹æ•™ç¨‹"><a href="#kalibrå®˜æ–¹æ•™ç¨‹" class="headerlink" title="kalibrå®˜æ–¹æ•™ç¨‹"></a>kalibrå®˜æ–¹æ•™ç¨‹</h3><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://github.com/ethz-asl/kalibr/wiki/camera-imu-calibration">github.com</a></p></div><h1 id="ROS-Message-filter"><a href="#ROS-Message-filter" class="headerlink" title="ROS :: Message-filter"></a>ROS :: Message-filter</h1><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="http://wiki.ros.org/message_filters">wiki.ros.org</a></p></div><h2 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h2><p>å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-noetic-message-filters</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /opt/ros/noetic/setup.bash</span><br></pre></td></tr></table></figure><p>æˆ–è€…æ·»åŠ åˆ°<code>.bashrc</code>ä¸­</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;source /opt/ros/noetic/setup.bash&quot; &gt;&gt; ~/.bashrc</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><h3 id="å–œé—»ä¹è§çš„æŠ¥é”™ç¯èŠ‚ğŸ™ƒ"><a href="#å–œé—»ä¹è§çš„æŠ¥é”™ç¯èŠ‚ğŸ™ƒ" class="headerlink" title="å–œé—»ä¹è§çš„æŠ¥é”™ç¯èŠ‚ğŸ™ƒ"></a>å–œé—»ä¹è§çš„æŠ¥é”™ç¯èŠ‚ğŸ™ƒ</h3><blockquote><p>CMake Error at /opt/ros/noetic/share/catkin/cmake/catkinConfig.cmake:83 (find_package): Could not find a package configuration file provided by â€œmessage_filterâ€ with any of the following names:    </p><p>â€‹    message_filterConfig.cmake<br>â€‹    message_filter-config.cmake</p><p>Add the installation prefix of â€œmessage_filterâ€ to CMAKE_PREFIX_PATH or set â€œmessage_filter_DIRâ€ to a directory containing one of the above files. If â€œmessage_filterâ€ provides a separate development package or SDK, be sure it has been installed. Call Stack (most recent call first): msg_filter/CMakeLists.txt:10 (find_package)</p></blockquote><p>å®‰è£…å®ŒåŒ…ä¹‹åå¯ä»¥å°è¯•åˆ·æ–°ç¯å¢ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /opt/ros/noetic/setup.bash</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦æ­£ç¡®å®‰è£…äº†åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rospack find mseeage_filter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[rospack] Error: package <span class="string">&#x27;message_filter&#x27;</span> not found</span></span><br><span class="line">rospack find mseeage_filters</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/opt/ros/noetic/share/message_filters</span></span><br></pre></td></tr></table></figure><p>å‘ç°æ˜¯å› ä¸ºæˆ‘æŠŠ<code>filters</code>å†™æˆäº†<code>filter</code> ğŸ˜†</p><h2 id="example"><a href="#example" class="headerlink" title="example"></a>example</h2><h3 id="msg-filter-subscriber"><a href="#msg-filter-subscriber" class="headerlink" title="msg_filter(subscriber)"></a>msg_filter(subscriber)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">message_filters::Subscriber&lt;sensor_msgs::Image&gt; <span class="title">image_sub</span><span class="params">(nh, <span class="string">&quot;image&quot;</span>, <span class="number">1</span>)</span>ï¼›</span></span><br></pre></td></tr></table></figure><p>ä»åˆ›å»ºè®¢é˜…å®ä½“<code>image_sub</code>ï¼Œè¯é¢˜ä¸º<code>â€imageâ€</code>ï¼Œæ¶ˆæ¯ç±»å‹ä¸º<code>&lt;sensor_msgs::Image&gt;</code></p><h4 id="ApproximateTime-policy"><a href="#ApproximateTime-policy" class="headerlink" title="ApproximateTime policy"></a><strong>ApproximateTime policy</strong></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> sync_policies::ApproximateTime&lt;sensor_msgs::Image, geometry_msgs::WrenchStamped&gt; MySyncPolicy;</span><br></pre></td></tr></table></figure><p>â€‹    è¿™ä¸€è¡Œæ˜¯å®šä¹‰äº†ä¸€ä¸ªåŒæ­¥ç­–ç•¥çš„ç±»å‹ï¼Œå«åš<code>MySyncPolicy</code>ï¼Œå®ƒä½¿ç”¨äº†<strong>message_filters</strong>ä¸­çš„ <strong>ApproximateTime policy</strong> ï¼Œè¿™ä¸ªç­–ç•¥å¯ä»¥æ ¹æ®æ—¶é—´æˆ³æ¥åŒ¹é…ä¸åŒè¯é¢˜çš„æ¶ˆæ¯ï¼Œå³ä½¿å®ƒä»¬æœ‰ä¸åŒçš„æ—¶é—´æˆ³ã€‚è¿™ä¸ªç­–ç•¥éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯è¦åŒæ­¥çš„ä¸¤ä¸ªè¯é¢˜çš„æ¶ˆæ¯ç±»å‹ï¼Œè¿™é‡Œæ˜¯<code>sensor_msgs::Image</code>å’Œ<code>geometry_msgs::WrenchStamped</code>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Synchronizer&lt;MySyncPolicy&gt; <span class="title">sync</span><span class="params">(MySyncPolicy(<span class="number">10</span>), image_sub, wrench_sub)</span></span>;</span><br></pre></td></tr></table></figure><p>â€‹    è¿™ä¸€è¡Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ª<code>Synchronizer</code>å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¶ˆæ¯è¿‡æ»¤å™¨ï¼Œå¯ä»¥æ ¹æ®æŒ‡å®šçš„åŒæ­¥ç­–ç•¥æ¥åŒæ­¥ä¸åŒè¯é¢˜çš„æ¶ˆæ¯ã€‚è¿™ä¸ªå¯¹è±¡éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯åŒæ­¥ç­–ç•¥çš„å®ä¾‹ï¼Œè¿™é‡Œæ˜¯<code>MySyncPolicy(10)</code>ï¼Œå…¶ä¸­ <strong>10</strong> è¡¨ç¤ºæ¶ˆæ¯é˜Ÿåˆ—å¤§å°ã€‚ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¦åŒæ­¥çš„ä¸¤ä¸ªè¯é¢˜çš„è®¢é˜…å™¨ï¼Œè¿™é‡Œæ˜¯<strong>image_sub</strong>å’Œ<strong>wrench_sub</strong>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sync.<span class="built_in">registerCallback</span>(boost::<span class="built_in">bind</span>(&amp;callback, _1, _2));</span><br></pre></td></tr></table></figure><p>â€‹    è¿™ä¸€è¡Œæ˜¯æ³¨å†Œäº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“Synchronizerå¯¹è±¡åŒæ­¥äº†ä¸¤ä¸ªè¯é¢˜çš„æ¶ˆæ¯åï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠåŒæ­¥åçš„æ¶ˆæ¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒ1ã€‚è¿™é‡Œä½¿ç”¨äº†<code>boost::bind</code>æ¥ç»‘å®šå›è°ƒå‡½æ•°çš„åœ°å€å’Œå ä½ç¬¦ï¼Œè¡¨ç¤ºå½“Synchronizerå¯¹è±¡æœ‰ä¸¤ä¸ªå‚æ•°æ—¶ï¼Œå°±è°ƒç”¨<code>callback</code>å‡½æ•°ï¼Œå¹¶æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™<strong>_1</strong>ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™<strong>_2</strong>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">callback</span><span class="params">(<span class="type">const</span> sensor_msgs::ImageConstPtr&amp; image, <span class="type">const</span> geometry_msgs::WrenchStampedConstPtr&amp; wrench)</span></span></span><br></pre></td></tr></table></figure><p>â€‹    è¿™ä¸€è¡Œæ˜¯å®šä¹‰äº†ä¸€ä¸ªå›è°ƒå‡½æ•°<code>callback</code>ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯<code>sensor_msgs::ImageConstPtr&amp;</code>å’Œ<code>geometry_msgs::WrenchStampedConstPtr&amp;</code>ã€‚è¿™ä¸¤ä¸ªå‚æ•°çš„ç±»å‹éƒ½æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼ˆsmart pointerï¼‰ï¼Œå®ƒä»¬å¯ä»¥è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼æˆ–æ— æ•ˆæŒ‡é’ˆ1ã€‚æ™ºèƒ½æŒ‡é’ˆçš„ç±»å‹ç”±æ¶ˆæ¯ç±»å‹åŠ ä¸ŠConstPtråç¼€ç»„æˆï¼Œä¾‹å¦‚<strong>sensor_msgs::Image</strong>æ¶ˆæ¯å¯¹åº”çš„æ™ºèƒ½æŒ‡é’ˆç±»å‹æ˜¯<strong>sensor_msgs::ImageConstPtr</strong>ã€‚æ™ºèƒ½æŒ‡é’ˆçš„å¥½å¤„æ˜¯ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä¸åŒçš„èŠ‚ç‚¹é—´å…±äº«åŒä¸€å—å†…å­˜ï¼Œæé«˜æ•ˆç‡ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨constä¿®é¥°ç¬¦å’Œå¼•ç”¨ç¬¦å·ï¼ˆ&amp;ï¼‰æ¥è¡¨ç¤ºè¿™äº›å‚æ•°æ˜¯å¸¸é‡å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸ä¼šä¿®æ”¹å®ƒä»¬çš„å€¼ï¼Œä¹Ÿä¸ä¼šæ‹·è´å®ƒä»¬çš„å€¼ã€‚</p><p><img src="https://res.craft.do/user/full/263e5170-1edd-c6df-5898-f56572924e86/doc/6c0c5dad-e8aa-49de-8871-24534e9bd383/31383ea8-ce37-4d73-94bc-61c387ee2eff" alt="2023-04-22 10-04-46 çš„å±å¹•æˆªå›¾.png"></p><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªç­–ç•¥åªèƒ½ç­›é€‰å‡ºæ—¶é—´ç›¸è¿‘çš„ä¿¡æ¯ï¼Œå¹¶ä¸èƒ½å¯¹é½ã€‚ğŸ¤”</p><h4 id="TimeSynchronizer"><a href="#TimeSynchronizer" class="headerlink" title="TimeSynchronizer"></a>TimeSynchronizer</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TimeSynchronizer&lt;sensor_msgs::Image, geometry_msgs::WrenchStamped&gt; <span class="title">sync2</span><span class="params">(image_sub, wrench_sub, <span class="number">10</span>)</span></span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªåŒæ­¥å™¨å¯¹æ—¶é—´ç²¾åº¦çš„è¦æ±‚ä¼šæ¯”è¾ƒé«˜/</p><h3 id="mypub-publisher"><a href="#mypub-publisher" class="headerlink" title="mypub(publisher)"></a>mypub(publisher)</h3><blockquote><p>ç”Ÿæˆéšæœºå›¾åƒæ•°æ®å’ŒåŠ›çŸ¢é‡æ•°æ®<br>å®‰è£…æ–°çš„åŒ…</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ros-noetic-opencv-apps ros-noetic-cv-bridg</span><br><span class="line">source /opt/ros/noetic/setup.bash</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå›¾åƒ"><a href="#åˆ›å»ºå›¾åƒ" class="headerlink" title="åˆ›å»ºå›¾åƒ"></a>åˆ›å»ºå›¾åƒ</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create a dummy image with random pixels</span></span><br><span class="line"><span class="function">cv::Mat <span class="title">image</span><span class="params">(<span class="number">480</span>, <span class="number">640</span>, CV_8UC3)</span></span>;</span><br><span class="line">cv::<span class="built_in">randu</span>(image, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>));</span><br></pre></td></tr></table></figure><p>â€‹    ä½¿ç”¨OpenCVåº“åˆ›å»ºäº†ä¸€ä¸ª480x640çš„ä¸‰é€šé“æ— ç¬¦å·å­—ç¬¦å‹çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå½©è‰²å›¾åƒã€‚ç„¶åä½¿ç”¨cv::randuå‡½æ•°ç»™å›¾åƒçš„æ¯ä¸ªåƒç´ èµ‹äºˆäº†ä¸€ä¸ªéšæœºçš„é¢œè‰²å€¼ï¼ŒèŒƒå›´æ˜¯ä»é»‘è‰²ï¼ˆ0,0,0ï¼‰åˆ°ç™½è‰²ï¼ˆ255,255,255ï¼‰ã€‚</p><blockquote><p><strong>cv_8uc3</strong>æ˜¯ä¸€ä¸ªè¡¨ç¤ºå›¾åƒç±»å‹çš„æšä¸¾å€¼ï¼Œå°±æ˜¯ç”¨æ¥é€‰æ‹©å›¾åƒç±»å‹ï¼Œå®ƒæ„å‘³ç€æ¯ä¸ªåƒç´ ç”±ä¸‰ä¸ªæ— ç¬¦å·å­—ç¬¦ç»„æˆï¼Œåˆ†åˆ«ä»£è¡¨è“è‰²ã€ç»¿è‰²å’Œçº¢è‰²é€šé“ã€‚è¿™æ ·çš„å›¾åƒå ç”¨äº†8ä½çš„ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚</p></blockquote><h4 id="è½¬æ¢ä¸ºROSçš„å›¾åƒæ¶ˆæ¯"><a href="#è½¬æ¢ä¸ºROSçš„å›¾åƒæ¶ˆæ¯" class="headerlink" title="è½¬æ¢ä¸ºROSçš„å›¾åƒæ¶ˆæ¯"></a>è½¬æ¢ä¸ºROSçš„å›¾åƒæ¶ˆæ¯</h4><p>â€‹    é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code>cv_bridge::CvImage</code>å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ª<code>std_msgs::Header</code>å¯¹è±¡ï¼ˆç”¨äºå­˜å‚¨æ¶ˆæ¯çš„å…ƒæ•°æ®ï¼‰ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆç”¨äºæŒ‡å®šå›¾åƒçš„ç¼–ç æ–¹å¼ï¼Œè¿™é‡Œæ˜¯<strong>bgr8</strong>ï¼Œè¡¨ç¤ºæ¯ä¸ªåƒç´ ç”±ä¸‰ä¸ªæ— ç¬¦å·å­—ç¬¦ç»„æˆï¼Œåˆ†åˆ«ä»£è¡¨è“è‰²ã€ç»¿è‰²å’Œçº¢è‰²é€šé“ï¼‰ï¼Œå’Œä¸€ä¸ªcv::Matå¯¹è±¡ï¼ˆå°±æ˜¯å‰é¢åˆ›å»ºçš„å›¾åƒï¼‰ã€‚</p><p>â€‹    ç„¶åè°ƒç”¨äº†<code>toImageMsg()</code> ï¼Œå°†<code>cv_bridge::CvImage</code>å¯¹è±¡è½¬æ¢ä¸º<code>sensor_msgs::ImagePtr</code>å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæŒ‡å‘<code>sensor_msgs::Image</code>æ¶ˆæ¯çš„æ™ºèƒ½æŒ‡é’ˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// convert the image to a sensor_msgs::Image message</span></span><br><span class="line">sensor_msgs::ImagePtr msg = cv_bridge::<span class="built_in">CvImage</span>(std_msgs::<span class="built_in">Header</span>(), <span class="string">&quot;bgr8&quot;</span>, image).<span class="built_in">toImageMsg</span>();</span><br></pre></td></tr></table></figure><p>åœ¨å‘å¸ƒçš„æ—¶å€™å‘å¸ƒæŒ‡é’ˆæˆ–è€…ç›´æ¥å‘é€å¯¹è±¡éƒ½å¯ä»¥ï¼Œä¸è¿‡æŒ‡é’ˆä¼šå¿«ä¸€ç‚¹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pub.<span class="built_in">publish</span>(msg); <span class="comment">// å‘å¸ƒæŒ‡é’ˆ</span></span><br><span class="line">pub.<span class="built_in">publish</span>(*msg); <span class="comment">// å‘å¸ƒæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡</span></span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ æ—¶é—´æˆ³ä¿¡æ¯"><a href="#æ·»åŠ æ—¶é—´æˆ³ä¿¡æ¯" class="headerlink" title="æ·»åŠ æ—¶é—´æˆ³ä¿¡æ¯"></a>æ·»åŠ æ—¶é—´æˆ³ä¿¡æ¯</h4><p>è¿™ä¸ªå…¶å®å°±æ˜¯è¿™ä»½ä»£ç æœ€ä¸»è¦çš„éƒ¨åˆ†äº†ï¼Œè™½ç„¶ç®€å•ï¼Œä½†æ˜¯æˆ‘ä¸€å¼€å§‹ç¡®å®æ¼äº†ã€‚ğŸ¤«</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msg-&gt;header.stamp = ros::Time::<span class="built_in">now</span>();</span><br></pre></td></tr></table></figure><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>å¦‚æœæ¶ˆæ¯ç¼ºå°‘æ—¶é—´æˆ³ä¿¡æ¯çš„è¯æ˜¯ä¸ä¼šè§¦å‘å›è°ƒå‡½æ•°çš„ã€‚</p></div><h1 id="Recoder"><a href="#Recoder" class="headerlink" title="Recoder"></a>Recoder</h1><h3 id="Cv-bridgeä¿å­˜-image"><a href="#Cv-bridgeä¿å­˜-image" class="headerlink" title="Cv-bridgeä¿å­˜/image"></a>Cv-bridgeä¿å­˜/image</h3><p>ä¿å­˜<strong>sensor_msgs::Image</strong>ä¸º<strong>PNG</strong>ï¼Œå¹¶ä¸”ä»¥æ—¶é—´æˆ³å‘½å</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cv_bridge::CvImagePtr cv_ptr;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        cv_ptr = cv_bridge::<span class="built_in">toCvCopy</span>(msg, <span class="string">&quot;bgr8&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (cv_bridge::Exception&amp; e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;cv_bridge exception: %s&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>â€‹    ä½¿ç”¨cv_bridge::toCvCopyå‡½æ•°ï¼Œå°†ROSçš„å›¾åƒæ¶ˆæ¯msgè½¬æ¢ä¸ºOpenCVçš„å›¾åƒï¼Œå¹¶èµ‹å€¼ç»™cv_ptrã€‚å¦‚æœè½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œå°±ä¼šæŠ›å‡ºcv_bridge::Exceptionç±»å‹çš„é”™è¯¯ï¼Œå¹¶ä½¿ç”¨ROS_ERRORå®æ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è¿”å›ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Get the timestamp of the image message</span></span><br><span class="line">std::stringstream ss;</span><br><span class="line">ss &lt;&lt; msg-&gt;header.stamp;</span><br><span class="line">std::string timestamp = ss.<span class="built_in">str</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Construct the filename with timestamp</span></span><br><span class="line"><span class="type">char</span> filename[<span class="number">256</span>];</span><br><span class="line"><span class="built_in">sprintf</span>(filename, filename_format.<span class="built_in">c_str</span>(), timestamp.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// Save the image as a png file</span></span><br><span class="line">cv::<span class="built_in">imwrite</span>(save_path + filename, cv_ptr-&gt;image);</span><br></pre></td></tr></table></figure><p>â€‹    å°†<code>msg</code>çš„æ—¶é—´æˆ³<code>msg-&gt;header.stamp</code>è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶èµ‹å€¼ç»™<code>timestamp</code>å˜é‡ã€‚å…·ä½“æœ‰å…³ <strong>stringstream</strong> çš„å†…å®¹å¯ä»¥å‚è€ƒæ–‡ç« åé¢çš„è¡¥å……ã€‚</p><p>â€‹    ä½¿ç”¨<code>cv::imwrite</code>å‡½æ•°ï¼Œå°†OpenCVå›¾åƒ<code>cv_ptr-&gt;image</code>ä¿å­˜ä¸º<strong>png</strong>æ ¼å¼çš„æ–‡ä»¶ã€‚è¿™ä¸ªå‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦ä¿å­˜çš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶åï¼Œè¿™é‡Œä½¿ç”¨äº†save_pathå’Œfilenameæ‹¼æ¥è€Œæˆçš„å­—ç¬¦ä¸²ï¼Œ<code>save_path</code>æ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„å˜é‡ï¼Œè¡¨ç¤ºæ–‡ä»¶ä¿å­˜çš„è·¯å¾„ï¼Œä¾‹å¦‚<code>&quot;/home/user/images/&quot;</code>ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦ä¿å­˜çš„OpenCVå›¾åƒã€‚</p><h3 id="message-filter-cache"><a href="#message-filter-cache" class="headerlink" title="message_filter::cache"></a>message_filter::cache</h3><p>ç¯å½¢ç¼“å­˜å™¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//set up subscriber &amp; cache</span></span><br><span class="line"><span class="function">message_filters::Subscriber&lt;sensor_msgs::Image&gt; <span class="title">sub</span><span class="params">(nh, image_topic, <span class="number">1</span>)</span></span>;</span><br><span class="line">sub.<span class="built_in">registerCallback</span>(boost::<span class="built_in">bind</span>(&amp;image_callback, _1));</span><br><span class="line">cache.<span class="built_in">connectInput</span>(sub);<span class="comment">//è¾“å…¥</span></span><br><span class="line">cache.<span class="built_in">setCacheSize</span>(cache_size);<span class="comment">//å¤§å°</span></span><br></pre></td></tr></table></figure><h3 id="ä¿å­˜-imu-amp-wrench"><a href="#ä¿å­˜-imu-amp-wrench" class="headerlink" title="ä¿å­˜/imu &amp; /wrench"></a>ä¿å­˜/imu &amp; /wrench</h3><p>ä¸€èˆ¬é€‰æ‹©ä¿å­˜ä¸ºcsvæ–‡ä»¶ã€‚</p><ul><li>ä½¿ç”¨<strong>rostopic echo -p</strong>å‘½ä»¤ï¼Œå°†è®¢é˜…åˆ°çš„è¯é¢˜æ•°æ®ä»¥<strong>csv</strong>æ ¼å¼è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š<code>rostopic echo -p /imu/data &gt; imu_data.csv</code></li><li>ä½¿ç”¨rosbag recordå‘½ä»¤ï¼Œå°†è®¢é˜…åˆ°çš„è¯é¢˜æ•°æ®ä¿å­˜ä¸ºrosbagæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨rosbag_to_csvåŒ…æˆ–è€…è‡ªå·±ç¼–å†™çš„è„šæœ¬ï¼Œå°†rosbagæ–‡ä»¶ä¸­çš„æ•°æ®è½¬æ¢ä¸ºcsvæ–‡ä»¶ã€‚</li><li>ä½¿ç”¨è‡ªå·±ç¼–å†™çš„èŠ‚ç‚¹ï¼Œè®¢é˜…åˆ°è¯é¢˜æ•°æ®åï¼Œä½¿ç”¨æ ‡å‡†åº“æˆ–è€…ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚pandasï¼‰æ¥åˆ›å»ºå’Œä¿å­˜csvæ–‡ä»¶ã€‚</li></ul><p>å‰ä¸¤ç§æ–¹æ³•å¯èƒ½ç®€å•ä¸€äº›ï¼Œä½†æ˜¯æ˜¾ç„¶å³æ—¶æ€§ä¸å¤ªå¥½ï¼Œæ‰€ä»¥è¿˜æ˜¯é€‰æ‹©ç¬¬ä¸‰ç§å¥½äº†ã€‚ğŸ˜‹</p><h4 id="csv-parserç¬¬ä¸‰æ–¹åº“"><a href="#csv-parserç¬¬ä¸‰æ–¹åº“" class="headerlink" title="csv-parserç¬¬ä¸‰æ–¹åº“"></a>csv-parserç¬¬ä¸‰æ–¹åº“</h4><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://github.com/vincentlaucsb/csv-parser">GitHub - vincentlaucsb/csv-parser: A modern C++ library for reading, writing, and analyzing CSV (and similar) files.</a></p></div><p>æˆ‘æ˜¯åœ¨åŠŸèƒ½åŒ…ç›®å½•ä¸‹å…‹éš†ä»“åº“</p><p>åœ¨<strong>CmakeLists.txtä¸­æ·»åŠ </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">add_subdirectory</span>(csv-parser)</span><br><span class="line"></span><br><span class="line"><span class="built_in">add_executable</span>(&lt;your program&gt; ...)</span><br><span class="line"><span class="built_in">target_link_libraries</span>(&lt;your program&gt; csv)</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ååœ¨èŠ‚ç‚¹æ–‡ä»¶é‡Œé¢å¼•ç”¨ï¼Œæˆ‘ä¸èƒ½ç›´æ¥å¼•ç”¨ï¼Œè¦åŠ ä¸Šç›¸å¯¹è·¯å¾„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;../csv-parser/single_include/csv.hpp&quot;</span></span></span><br></pre></td></tr></table></figure><p>æˆ‘çš„æ–‡ä»¶ç›®å½•</p><blockquote><p>msg_filter(åŠŸèƒ½åŒ…)</p><blockquote><p>include</p><p>src</p><blockquote><p>writeCSV_demo.cpp</p></blockquote><p>csv-parse</p><blockquote><p>single_include</p><blockquote><p>csv.hpp</p></blockquote></blockquote></blockquote></blockquote><h4 id="code-example"><a href="#code-example" class="headerlink" title="code_example"></a>code_example</h4><p>â€‹    å®šä¹‰ä¸€ä¸ª<code>CSVWriter</code>å¯¹è±¡çš„æŒ‡é’ˆï¼Œä½¿ç”¨<code>std::ofstream</code>ä½œä¸ºè¾“å‡ºæµç±»å‹</p><p>â€‹    <code>csv::CSVWriter</code>æ˜¯ä¸€ä¸ª<strong>æ¨¡æ¿ç±»</strong>ï¼Œå®ƒéœ€è¦ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Œæ¥æŒ‡å®šè¾“å‡ºæµçš„ç±»å‹ã€‚éœ€è¦åœ¨å£°æ˜CSVWriterå¯¹è±¡çš„æ—¶å€™ï¼Œæä¾›ä¸€ä¸ªæ¨¡æ¿å‚æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CSVWriter&lt;std::ofstream&gt;* writer;</span><br><span class="line">writer = <span class="keyword">new</span> <span class="built_in">CSVWriter</span>&lt;std::ofstream&gt;(<span class="string">&quot;/home/stonewu/Data/test.csv&quot;</span>);</span><br></pre></td></tr></table></figure><p>æˆ–è€…å¯ä»¥ä½¿ç”¨<code>auto</code>å…³é”®å­—ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­æ¨¡æ¿å‚æ•°çš„ç±»å‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> writer = <span class="keyword">new</span> <span class="built_in">CSVWriter</span>(<span class="string">&quot;/home/stonewu/Data/test.csv&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>å†™å…¥æ•°æ®</strong></p><p>éœ€è¦æ³¨æ„çš„æ˜¯<code>writer</code>æ˜¯ä¸€ä¸ª<strong>æŒ‡é’ˆ</strong>ï¼Œéœ€è¦å…ˆè§£å¼•ç”¨æŒ‡é’ˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> header = std::vector&lt;std::string&gt;&#123;<span class="string">&quot;topic&quot;</span>, <span class="string">&quot;time&quot;</span>, <span class="string">&quot;fx&quot;</span>, <span class="string">&quot;fy&quot;</span>, <span class="string">&quot;fz&quot;</span>, <span class="string">&quot;tx&quot;</span>,<span class="string">&quot;ty&quot;</span>,<span class="string">&quot;tz&quot;</span>,<span class="string">&quot;\n&quot;</span>&#125;;</span><br><span class="line">*writer &lt;&lt; header;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ˜¯å°†è®¢é˜…åˆ°çš„æ•°æ®å†™å…¥CSVæ–‡ä»¶ä¸­ã€‚è™½ç„¶åªæœ‰çŸ­çŸ­å‡ è¡Œä»£ç ï¼Œå´èŠ±äº†ä¸å°‘æ—¶é—´ã€‚</p><p>â€‹    å®é™…ä¸Šè¦æ³¨æ„çš„å°±æ˜¯è¿™ä¸ªåº“ä¼ ç»™writerçš„æ•°æ®å¿…é¡»æ˜¯<code>std::vector&lt;std::string&gt;</code>ï¼Œæ‰€ä»¥è¦å°†è¿™äº›æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œè¿™é‡Œä½¿ç”¨äº†<code>ostringstream oss</code>æ¥å­˜å‚¨ã€‚ä½†æ˜¯ä¹Ÿä¸èƒ½ç›´æ¥é€šè¿‡ostringstreamæ¥æ„é€ ä¸€ä¸ª<strong>vector<string></strong>ï¼Œæ‰€ä»¥åˆæ„é€ äº†ä¸€ä¸ª<code>istringstream</code>æ¥ä½œä¸ºä¸­ä»‹ã€‚</p><p>â€‹    ä¹Ÿä¸èƒ½é€šè¿‡<code>&lt;&lt;endl</code>æ¥è¾“å…¥æ¢è¡Œï¼Œè¿™é‡Œç›´æ¥ç”¨<code>â€œ\nâ€</code>å³å¯ã€‚    </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">wrench_callback</span><span class="params">(<span class="type">const</span> geometry_msgs::WrenchStampedConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å°†æ¶ˆæ¯ä¸­çš„æ•°æ®å†™å…¥åˆ°CSVæ–‡ä»¶ä¸­</span></span><br><span class="line">    ostringstream oss;</span><br><span class="line">    oss &lt;&lt; msg-&gt;header.stamp &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; msg-&gt;wrench.force.x &lt;&lt; <span class="string">&quot; &quot;</span> </span><br><span class="line">        &lt;&lt; msg-&gt;wrench.force.y &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; msg-&gt;wrench.force.z &lt;&lt; <span class="string">&quot; &quot;</span> </span><br><span class="line">        &lt;&lt; msg-&gt;wrench.torque.x &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; msg-&gt;wrench.torque.y &lt;&lt; <span class="string">&quot; &quot;</span> </span><br><span class="line">        &lt;&lt; msg-&gt;wrench.torque.z&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªvector&lt;string&gt;å¯¹è±¡</span></span><br><span class="line">    vector&lt;string&gt; data;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªistringstreamå¯¹è±¡ï¼Œç”¨æ¥è¯»å–ossä¸­çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="function">istringstream <span class="title">iss</span><span class="params">(oss.str())</span></span>;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªstringå¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨æ¯ä¸ªå­å­—ç¬¦ä¸²</span></span><br><span class="line">    string word;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå¾ªç¯è¯»å–æ¯ä¸ªå­å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">while</span> (iss &gt;&gt; word) &#123;</span><br><span class="line">      <span class="comment">// å°†å­å­—ç¬¦ä¸²æ”¾å…¥å‘é‡ä¸­</span></span><br><span class="line">      data.<span class="built_in">push_back</span>(word);</span><br><span class="line">    &#125;</span><br><span class="line">    *writer &lt;&lt; data ;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="rosbagå·¥å…·"><a href="#rosbagå·¥å…·" class="headerlink" title="rosbagå·¥å…·"></a>rosbagå·¥å…·</h4><p>ä½¿ç”¨rosbagå·¥å…·å½•åˆ¶topicæ•°æ®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosbag record -O output.bag /imu /wrench</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥å°†<strong>/imu</strong>å’Œ<strong>/wrench</strong>ä¸»é¢˜çš„æ•°æ®ä¿å­˜åˆ°<strong>output.bag</strong>æ–‡ä»¶ä¸­ã€‚</p><p>å›æ”¾æ•°æ®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosbag play output.bag</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<strong>rostopic</strong>å®Œæˆæ•°æ®è½¬å­˜ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rostopic echo -b output.bag -p /imu &gt; imu.csv</span><br><span class="line">rostopic echo -b output.bag -p /wrench &gt; wrench.csv</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥å°†/<strong>imu</strong>å’Œ/<strong>wrench</strong>ä¸»é¢˜çš„æ•°æ®ä¿å­˜åˆ°<strong>imu.csv</strong>å’Œ<strong>wrench.csv</strong>æ–‡ä»¶ä¸­ï¼Œå®ƒä»¬æ˜¯ä»¥é€—å·åˆ†éš”çš„æ–‡æœ¬æ ¼å¼ã€‚</p><h3 id="Keyboard-Input"><a href="#Keyboard-Input" class="headerlink" title="Keyboard Input"></a>Keyboard Input</h3><h4 id="åŸæ¥çš„keyboardæ‰«æå‡½æ•°"><a href="#åŸæ¥çš„keyboardæ‰«æå‡½æ•°" class="headerlink" title="åŸæ¥çš„keyboardæ‰«æå‡½æ•°"></a>åŸæ¥çš„keyboardæ‰«æå‡½æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">scanKeyboard</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> in;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">termios</span> new_settings;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">termios</span> stored_settings;</span><br><span class="line">    <span class="comment">//è®¾ç½®ç»ˆç«¯å‚æ•°</span></span><br><span class="line"><span class="built_in">tcgetattr</span>(<span class="number">0</span>,&amp;stored_settings);</span><br><span class="line">new_settings = stored_settings;</span><br><span class="line">new_settings.c_lflag &amp;= (~ICANON);</span><br><span class="line">new_settings.c_cc[VTIME] = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">tcgetattr</span>(<span class="number">0</span>,&amp;stored_settings);</span><br><span class="line">new_settings.c_cc[VMIN] = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">tcsetattr</span>(<span class="number">0</span>,TCSANOW,&amp;new_settings);</span><br><span class="line">in = <span class="built_in">getchar</span>();</span><br><span class="line"><span class="built_in">tcsetattr</span>(<span class="number">0</span>,TCSANOW,&amp;stored_settings);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> in;<span class="comment">//è¿”å›çš„æ˜¯å­—ç¬¦å¯¹åº”çš„asciiç </span></span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹    è¿™ä¸ªå‡½æ•°ä¼šä¸€ç›´ç­‰å¾…è¾“å…¥ï¼Œç›´åˆ°æœ‰é”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹ã€‚å®ƒä½¿ç”¨äº†<code>tcsetattr</code>å‡½æ•°æ¥ä¿®æ”¹ç»ˆç«¯çš„å±æ€§ï¼Œå°†å…¶è®¾ç½®ä¸ºéè§„èŒƒæ¨¡å¼ï¼ˆnon-canonical modeï¼‰ï¼Œè¿™æ„å‘³ç€è¾“å…¥ä¸ä¼šè¢«ç¼“å†²ï¼Œè€Œæ˜¯ç«‹å³è¢«è¯»å–ã€‚åŒæ—¶ï¼Œå®ƒå°†VMINå±æ€§è®¾ç½®ä¸º1ï¼Œè¡¨ç¤ºè‡³å°‘éœ€è¦ä¸€ä¸ªå­—ç¬¦æ‰èƒ½è¿”å›ã€‚å› æ­¤ï¼Œè¿™ä¸ªå‡½æ•°ä¼šé˜»å¡å…¶ä»–å‡½æ•°çš„è¿›è¡Œï¼Œé™¤éæœ‰é”®ç›˜è¾“å…¥ã€‚</p><h4 id="é‡æ–°è®¾ç½®ç»ˆç«¯å‚æ•°"><a href="#é‡æ–°è®¾ç½®ç»ˆç«¯å‚æ•°" class="headerlink" title="é‡æ–°è®¾ç½®ç»ˆç«¯å‚æ•°"></a>é‡æ–°è®¾ç½®ç»ˆç«¯å‚æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new_settings.c_lflag &amp;= ~(ICANON | ECHO); </span><br><span class="line"><span class="comment">//å½“å…³é—­è§„èŒƒæ¨¡å¼æ—¶ï¼Œè¾“å…¥ä¸ä¼šè¢«ç¼“å†²ï¼Œè€Œæ˜¯ç«‹å³è¢«è¯»å–</span></span><br><span class="line"><span class="comment">//å¦‚æœå¼€å¯è§„èŒƒæ¨¡å¼ï¼Œè¾“å…¥ä¼šè¢«ç¼“å†²ï¼Œç›´åˆ°é‡åˆ°æ¢è¡Œç¬¦æˆ–æ–‡ä»¶ç»“æŸç¬¦æ‰ä¼šè¢«è¯»å–ï¼ˆçœŸçš„å—ï¼‰</span></span><br><span class="line">new_settings.c_cc[VTIME] = <span class="number">0</span>; <span class="comment">//è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º0ï¼Œå³ä¸ç­‰å¾…è¾“å…¥</span></span><br><span class="line">new_settings.c_cc[VMIN] = <span class="number">0</span>; <span class="comment">//è®¾ç½®æœ€å°å­—ç¬¦æ•°ä¸º0ï¼Œå³ä¸éœ€è¦è¾“å…¥ä»»ä½•å­—ç¬¦å°±å¯ä»¥è¯»å–</span></span><br></pre></td></tr></table></figure><p><strong>æŒ‡ä»¤é›†</strong></p><blockquote><ul><li>q: save latest data</li><li>w: save all data</li><li>b: begin to save data</li><li>stop saving data</li></ul></blockquote><h1 id="c-ä¸rosåº“-è¡¥å……"><a href="#c-ä¸rosåº“-è¡¥å……" class="headerlink" title="c++ä¸rosåº“ è¡¥å……"></a>c++ä¸rosåº“ è¡¥å……</h1><h3 id="boost-bind"><a href="#boost-bind" class="headerlink" title="boost::bind"></a>boost::bind</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°<strong>f</strong>ï¼Œå®ƒæ¥å—ä¸‰ä¸ªæ•´æ•°å‚æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„å’Œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>boost::bind</code>æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ï¼Œå®ƒåªæ¥å—ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œå¹¶æŠŠå®ƒä½œä¸ºfçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè€ŒæŠŠç¬¬ä¸€å’Œç¬¬ä¸‰ä¸ªå‚æ•°å›ºå®šä¸º1å’Œ2ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boost::function&lt;<span class="type">int</span> (<span class="type">int</span>)&gt; g = boost::<span class="built_in">bind</span>(f, <span class="number">1</span>, _1, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œ_1æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œè¡¨ç¤ºgçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨gï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="built_in">g</span>(<span class="number">3</span>); <span class="comment">// x = f(1, 3, 2) = 6</span></span><br><span class="line"><span class="type">int</span> y = <span class="built_in">g</span>(<span class="number">4</span>); <span class="comment">// y = f(1, 4, 2) = 7</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code>boost::bind</code>æ¥ç»‘å®šç±»çš„æˆå‘˜å‡½æ•°ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç±»<code>myclass</code>ï¼Œå®ƒæœ‰ä¸€ä¸ªæˆå‘˜å‡½æ•°<strong>fun</strong>ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œå¹¶æ‰“å°å®ƒï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">myclass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; x &lt;&lt; std::endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>boost::bind</code>æ¥åˆ›å»ºä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå®ƒæ¥å—ä¸€ä¸ª<code>myclass</code>çš„å¯¹è±¡å’Œä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œå¹¶è°ƒç”¨è¯¥å¯¹è±¡çš„<code>fun</code>æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boost::function&lt;<span class="type">void</span> (myclass&amp;, <span class="type">int</span>)&gt; h = boost::<span class="built_in">bind</span>(&amp;myclass::fun, _1, _2);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œ<strong>_1</strong>å’Œ<strong>_2</strong>åˆ†åˆ«è¡¨ç¤ºhçš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ªå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨hï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myclass mc;</span><br><span class="line"><span class="built_in">h</span>(mc, <span class="number">5</span>); <span class="comment">// mc.fun(5)</span></span><br><span class="line"><span class="built_in">h</span>(mc, <span class="number">6</span>); <span class="comment">// mc.fun(6)</span></span><br></pre></td></tr></table></figure><p>Q: å®šä¹‰çš„hæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬åªç»™ä»–ä¸¤ä¸ªå‚æ•°ä¹Ÿæ˜¯å¯ä»¥çš„å¯¹å—?</p><p>A: å®šä¹‰çš„håªæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†boost::bindæ¥ç»‘å®šmyclassçš„æˆå‘˜å‡½æ•°funï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå‚æ•°ã€‚æ‰€ä»¥hçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªmyclassçš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚æˆ‘ä»¬ç»™hä¸¤ä¸ªå‚æ•°å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å†ç»™funä¼ é€’å‚æ•°ã€‚</p><h3 id="sensor-msgs-Image"><a href="#sensor-msgs-Image" class="headerlink" title="sensor_msgs::Image"></a>sensor_msgs::Image</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># è¿™ä¸ªæ¶ˆæ¯åŒ…å«äº†ä¸€ä¸ªæœªå‹ç¼©çš„å›¾åƒ</span><br><span class="line"># (<span class="number">0</span>, <span class="number">0</span>) æ˜¯å›¾åƒçš„å·¦ä¸Šè§’</span><br><span class="line">#</span><br><span class="line"># Header header        # Header timestamp åº”è¯¥æ˜¯å›¾åƒè·å–çš„æ—¶é—´</span><br><span class="line">#                      # Header frame_id åº”è¯¥æ˜¯ç›¸æœºçš„å…‰å­¦å¸§</span><br><span class="line">#                      # å¸§çš„åŸç‚¹åº”è¯¥æ˜¯ç›¸æœºçš„å…‰å­¦ä¸­å¿ƒ</span><br><span class="line">#                      # +x æŒ‡å‘å›¾åƒçš„å³è¾¹</span><br><span class="line">#                      # +y æŒ‡å‘å›¾åƒçš„ä¸‹è¾¹</span><br><span class="line">#                      # +z æŒ‡å‘å›¾åƒçš„å¹³é¢</span><br><span class="line">#                      # å¦‚æœè¿™é‡Œçš„ frame_id å’Œä¸å›¾åƒç›¸å…³è”çš„ CameraInfo æ¶ˆæ¯çš„ frame_id å†²çª</span><br><span class="line">#                      # è¡Œä¸ºæ˜¯æœªå®šä¹‰çš„</span><br><span class="line">uint32 height         # å›¾åƒé«˜åº¦ï¼Œä¹Ÿå°±æ˜¯è¡Œæ•°</span><br><span class="line">uint32 width          # å›¾åƒå®½åº¦ï¼Œä¹Ÿå°±æ˜¯åˆ—æ•°</span><br><span class="line"># åˆæ³•çš„ç¼–ç å€¼åœ¨æ–‡ä»¶ src/image_encodings.cpp ä¸­</span><br><span class="line"># å¦‚æœä½ æƒ³æ ‡å‡†åŒ–ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²æ ¼å¼ï¼ŒåŠ å…¥</span><br><span class="line"><span class="meta"># ros-users@lists.sourceforge.net å¹¶å‘é€ä¸€å°é‚®ä»¶æå‡ºä¸€ä¸ªæ–°çš„ç¼–ç ã€‚</span></span><br><span class="line">string encoding       # åƒç´ çš„ç¼–ç  -- é€šé“çš„å«ä¹‰ï¼Œé¡ºåºï¼Œå¤§å°</span><br><span class="line">                      # ä» include/sensor_msgs/image_encodings.h ä¸­çš„å­—ç¬¦ä¸²åˆ—è¡¨ä¸­å–å¾—</span><br><span class="line">uint8 is_bigendian    # è¿™ä¸ªæ•°æ®æ˜¯å¦ä¸ºå¤§ç«¯åº</span><br><span class="line">uint32 step           # æ¯è¡Œçš„å­—èŠ‚æ•°</span><br><span class="line">uint8[] data          # å®é™…çš„çŸ©é˜µæ•°æ®ï¼Œå¤§å°æ˜¯ (step * rows)</span><br></pre></td></tr></table></figure><h3 id="å¤–éƒ¨å‚æ•°è·å–"><a href="#å¤–éƒ¨å‚æ•°è·å–" class="headerlink" title="å¤–éƒ¨å‚æ•°è·å–"></a>å¤–éƒ¨å‚æ•°è·å–</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::string image_topic;</span><br><span class="line"><span class="function">ros::NodeHandle <span class="title">pnh</span><span class="params">(<span class="string">&quot;~&quot;</span>)</span></span>;</span><br><span class="line">pnh.<span class="built_in">param</span>&lt;std::string&gt;(<span class="string">&quot;image_topic&quot;</span>, image_topic, <span class="string">&quot;/camera/image_raw&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>param</strong>æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°</p><ul><li>å‚æ•°çš„åå­—</li><li>å‚æ•°çš„å€¼</li><li>å‚æ•°çš„é»˜è®¤å€¼</li></ul><p>paramæ–¹æ³•ä¼šå°è¯•ä»å‚æ•°æœåŠ¡å™¨æˆ–è€…å‘½ä»¤è¡Œå‚æ•°ä¸­è·å–æŒ‡å®šåå­—çš„å‚æ•°ï¼Œå¦‚æœæˆåŠŸï¼Œå°±å°†å…¶èµ‹å€¼ç»™ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœå¤±è´¥ï¼Œå°±ä½¿ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°ä½œä¸ºé»˜è®¤å€¼ã€‚</p><p><strong>rosparamå·¥å…·</strong></p><p>å°†image_topicå‚æ•°çš„å€¼è®¾ç½®ä¸º/camera/image</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosparam set image_topic /camera/image</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨rosparam getå‘½ä»¤æ¥è·å–å‚æ•°çš„å€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosparam get image_topic</span><br></pre></td></tr></table></figure><p>è¿è¡ŒROSèŠ‚ç‚¹çš„æ—¶å€™ï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ¥è®¾ç½®å‚æ•°çš„å€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun image_saver_node image_saver_node _image_topic:=/camera/image</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œç§æœ‰å‚æ•°çš„åå­—å‰é¢è¦åŠ ä¸€ä¸ªä¸‹åˆ’çº¿ <strong>_</strong></p></blockquote><h3 id="nodeå‘½åç©ºé—´"><a href="#nodeå‘½åç©ºé—´" class="headerlink" title="nodeå‘½åç©ºé—´"></a>nodeå‘½åç©ºé—´</h3><p>è¯é¢˜<code>/camera/image</code>ä¸­çš„<strong>camera</strong>å’Œ<strong>image</strong>åˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€å‘¢</p><p><a href="http://wiki.ros.org/ROS/Patterns/Conventions">è¯é¢˜/camera/imageä¸­çš„cameraå’Œimageåˆ†åˆ«æ˜¯è¯é¢˜çš„å‘½åç©ºé—´å’ŒåŸºæœ¬åã€‚è¯é¢˜çš„å‘½åç©ºé—´æ˜¯ç”¨æ¥ç»„ç»‡å’ŒåŒºåˆ†ä¸åŒçš„è¯é¢˜çš„ï¼Œå®ƒå¯ä»¥æœ‰å¤šä¸ªå±‚çº§ï¼Œç”¨æ–œæ /åˆ†éš”ã€‚è¯é¢˜çš„åŸºæœ¬åæ˜¯ç”¨æ¥æè¿°è¯é¢˜çš„å†…å®¹æˆ–è€…åŠŸèƒ½çš„ï¼Œå®ƒä¸èƒ½åŒ…å«æ–œæ /æˆ–è€…æ³¢æµªçº¿~ã€‚è¯é¢˜çš„å‘½åç©ºé—´å’ŒåŸºæœ¬åéƒ½åº”è¯¥éµå¾ªä¸€äº›å‘½åè§„èŒƒ1</a>ï¼Œä¾‹å¦‚ï¼š</p><ul><li>è¯é¢˜çš„å‘½åç©ºé—´å’ŒåŸºæœ¬åéƒ½åº”è¯¥ä½¿ç”¨å°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿_å’Œæ•°å­—ã€‚</li><li>è¯é¢˜çš„åŸºæœ¬ååº”è¯¥å°½é‡å…·æœ‰æè¿°æ€§ï¼Œä¾‹å¦‚laser_scanè€Œä¸æ˜¯scanã€‚</li><li>è¯é¢˜çš„å‘½åç©ºé—´åº”è¯¥å°½é‡é¿å…ä½¿ç”¨å…¨å±€æˆ–è€…ç§æœ‰çš„å‰ç¼€ï¼Œä¾‹å¦‚/rosæˆ–è€…~ã€‚</li></ul><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œcameraæ˜¯ä¸€ä¸ªå‘½åç©ºé—´ï¼Œè¡¨ç¤ºè¿™ä¸ªè¯é¢˜æ˜¯å…³äºç›¸æœºçš„ã€‚imageæ˜¯ä¸€ä¸ªåŸºæœ¬åï¼Œè¡¨ç¤ºè¿™ä¸ªè¯é¢˜ä¼ è¾“çš„æ˜¯å›¾åƒæ•°æ®ã€‚ä½ å¯ä»¥ä½¿ç”¨rosnode listå‘½ä»¤æ¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰çš„è¯é¢˜åˆ—è¡¨ã€‚</p><p>é‚£ä¹ˆæˆ‘åœ¨è®¢é˜…çš„æ—¶å€™è¿™ä¸¤å‘¨å†™æ³•æ•ˆæœæ˜¯ä¸€æ ·çš„å—</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ros::Subscriber sub = nh.<span class="built_in">subscribe</span>(<span class="string">&quot;image&quot;</span>, <span class="number">1</span>, imageCallback);</span><br><span class="line"></span><br><span class="line">ros::Subscriber sub = nh.<span class="built_in">subscribe</span>(<span class="string">&quot;/camera/image&quot;</span>, <span class="number">1</span>, imageCallback);</span><br></pre></td></tr></table></figure><p>ä¸ä¸€å®šã€‚è¿™ä¸¤ç§å†™æ³•çš„æ•ˆæœå–å†³äºä½ çš„èŠ‚ç‚¹çš„å‘½åç©ºé—´ã€‚å¦‚æœä½ çš„èŠ‚ç‚¹çš„å‘½åç©ºé—´æ˜¯/ï¼Œä¹Ÿå°±æ˜¯å…¨å±€å‘½åç©ºé—´ï¼Œé‚£ä¹ˆè¿™ä¸¤ç§å†™æ³•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¼šè®¢é˜…åˆ°/camera/imageè¿™ä¸ªè¯é¢˜ã€‚ä½†æ˜¯å¦‚æœä½ çš„èŠ‚ç‚¹çš„å‘½åç©ºé—´ä¸æ˜¯/ï¼Œä¾‹å¦‚/wgï¼Œé‚£ä¹ˆè¿™ä¸¤ç§å†™æ³•çš„æ•ˆæœå°±ä¸ä¸€æ ·äº†ã€‚ç¬¬ä¸€ç§å†™æ³•ä¼šè®¢é˜…åˆ°/wg/imageè¿™ä¸ªè¯é¢˜ï¼Œè€Œç¬¬äºŒç§å†™æ³•ä»ç„¶ä¼šè®¢é˜…åˆ°/camera/imageè¿™ä¸ªè¯é¢˜ã€‚è¿™æ˜¯å› ä¸ºç¬¬ä¸€ç§å†™æ³•ä½¿ç”¨äº†ç›¸å¯¹åç§°ï¼Œè€Œç¬¬äºŒç§å†™æ³•ä½¿ç”¨äº†å…¨å±€åç§°ã€‚ç›¸å¯¹åç§°ä¼šæ ¹æ®èŠ‚ç‚¹çš„å‘½åç©ºé—´è¿›è¡Œè§£æï¼Œè€Œå…¨å±€åç§°ä¸ä¼šã€‚</p><p>è¯·å‘Šè¯‰æˆ‘å¦‚ä½•è·å–æˆ–è€…ä¿®æ”¹æˆ‘çš„èŠ‚ç‚¹çš„å‘½åç©ºé—´ã€‚</p><p><a href="http://wiki.ros.org/Names">ä½ å¯ä»¥ä½¿ç”¨rosnodeå‘½ä»¤æ¥è·å–æˆ–è€…ä¿®æ”¹ä½ çš„èŠ‚ç‚¹çš„å‘½åç©ºé—´ã€‚rosnodeå‘½ä»¤æ˜¯ä¸€ä¸ªç”¨äºæ˜¾ç¤ºå’Œç®¡ç†èŠ‚ç‚¹ä¿¡æ¯çš„å‘½ä»¤è¡Œå·¥å…·1</a>ã€‚ä½ å¯ä»¥ä½¿ç”¨rosnode infoå‘½ä»¤æ¥è·å–èŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹çš„å‘½åç©ºé—´ï¼Œä¾‹å¦‚ï¼š</p><p>rosnode info /wg/node1</p><p>è¿™æ ·å°±ä¼šæ‰“å°å‡º/wg/node1èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå…¶ä¸­ç¬¬ä¸€è¡Œå°±æ˜¯èŠ‚ç‚¹çš„å‘½åç©ºé—´ï¼Œä¾‹å¦‚ï¼š</p><p>Node [/wg/node1] Publications:</p><ul><li>/wg/image [sensor_msgs/Image]</li><li>/rosout [rosgraph_msgs/Log]</li></ul><p>Subscriptions:</p><ul><li>/camera/image [sensor_msgs/Image]</li></ul><p>Services:</p><ul><li>/wg/node1/get_loggers</li><li>/wg/node1/set_logger_level</li></ul><p>ä½ ä¹Ÿå¯ä»¥åœ¨è¿è¡ŒèŠ‚ç‚¹çš„æ—¶å€™ï¼Œä½¿ç”¨__nså‚æ•°æ¥ä¿®æ”¹èŠ‚ç‚¹çš„å‘½åç©ºé—´ï¼Œä¾‹å¦‚ï¼š</p><p>rosrun image_saver_node image_saver_node __ns:=/camera</p><p><a href="http://wiki.ros.org/Nodes">è¿™æ ·å°±ä¼šå°†image_saver_nodeèŠ‚ç‚¹çš„å‘½åç©ºé—´è®¾ç½®ä¸º/cameraã€‚ä½ ä¹Ÿå¯ä»¥åœ¨launchæ–‡ä»¶ä¸­ä½¿ç”¨nså±æ€§æ¥è®¾ç½®èŠ‚ç‚¹çš„å‘½åç©ºé—´2</a>ï¼Œä¾‹å¦‚ï¼š</p><p>è¿™æ ·ä¹Ÿä¼šå°†image_saver_nodeèŠ‚ç‚¹çš„å‘½åç©ºé—´è®¾ç½®ä¸º/cameraã€‚</p><p>é‚£ä¹ˆåœ¨é»˜è®¤æƒ…å†µä¸‹çš„èŠ‚ç‚¹éƒ½æ˜¯åœ¨å…¨å±€å‘½åç©ºé—´å¯¹å—ï¼Œæˆ‘æ˜¯å¦èƒ½åœ¨ä»£ç çš„ç¨‹åºé‡Œé¢ä¿®æ”¹å‘¢</p><p>ä¸ä¸€å®šã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹çš„å‘½åç©ºé—´æ˜¯ç”±ros::initå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å†³å®šçš„ã€‚è¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªros::NodeHandleç±»å‹çš„å¼•ç”¨ï¼Œå®ƒå¯ä»¥æŒ‡å®šèŠ‚ç‚¹çš„å‘½åç©ºé—´å’Œåç§°ã€‚å¦‚æœä½ ä¸æä¾›è¿™ä¸ªå‚æ•°ï¼Œæˆ–è€…æä¾›ä¸€ä¸ªç©ºçš„ros::NodeHandleï¼Œé‚£ä¹ˆèŠ‚ç‚¹çš„å‘½åç©ºé—´å°±æ˜¯/ï¼Œä¹Ÿå°±æ˜¯å…¨å±€å‘½åç©ºé—´ã€‚ä½†æ˜¯å¦‚æœä½ æä¾›äº†ä¸€ä¸ªéç©ºçš„ros::NodeHandleï¼Œé‚£ä¹ˆèŠ‚ç‚¹çš„å‘½åç©ºé—´å°±æ˜¯ç”±è¿™ä¸ªros::NodeHandleæŒ‡å®šçš„ã€‚ä¾‹å¦‚ï¼š</p><p>ros::init(argc, argv, â€œimage_saver_nodeâ€);</p><p>è¿™æ ·å°±ä¼šå°†èŠ‚ç‚¹çš„åç§°è®¾ç½®ä¸ºimage_saver_nodeï¼Œè€ŒèŠ‚ç‚¹çš„å‘½åç©ºé—´è®¾ç½®ä¸º/ã€‚</p><p>ros::NodeHandle nh(â€œ/cameraâ€); ros::init(argc, argv, â€œimage_saver_nodeâ€, nh);</p><p>è¿™æ ·å°±ä¼šå°†èŠ‚ç‚¹çš„åç§°è®¾ç½®ä¸ºimage_saver_nodeï¼Œè€ŒèŠ‚ç‚¹çš„å‘½åç©ºé—´è®¾ç½®ä¸º/cameraã€‚</p><h3 id="std-stringstream"><a href="#std-stringstream" class="headerlink" title="std::stringstream"></a>std::stringstream</h3><blockquote><p>stringstreamæ˜¯ä¸€ä¸ªC++ä¸­çš„ç±»ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ“ä½œå­—ç¬¦ä¸²ã€‚stringstreamå¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ï¼Œä¾‹å¦‚æ•°å€¼ï¼Œä¹Ÿå¯ä»¥å°†å…¶ä»–ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚stringstreamè¿˜å¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ ¼å¼åŒ–ï¼Œä¾‹å¦‚æ·»åŠ ç©ºæ ¼æˆ–è€…0å¡«å……ã€‚stringstreamçš„ç”¨æ³•ç±»ä¼¼äºè¾“å…¥è¾“å‡ºæµï¼Œå¯ä»¥ä½¿ç”¨&lt;&lt;å’Œ&gt;&gt;è¿ç®—ç¬¦æ¥å‘å…¶ä¸­æ’å…¥æˆ–è€…æå–æ•°æ®ã€‚stringstreamçš„å†…éƒ¨æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œå¯ä»¥ä½¿ç”¨str()æ–¹æ³•æ¥è·å–æˆ–è€…è®¾ç½®ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªstringstreamå¯¹è±¡</span></span><br><span class="line">std::stringstream ss;  </span><br><span class="line"><span class="comment">// å‘å…¶ä¸­æ’å…¥å­—ç¬¦ä¸²å’Œæ•°å€¼ </span></span><br><span class="line">ss &lt;&lt; â€œHelloâ€ &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="number">2021</span>; </span><br><span class="line"><span class="comment">// è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹ï¼Œç»“æœæ˜¯Hello 2021 int n; </span></span><br><span class="line">std::cout &lt;&lt; ss.<span class="built_in">str</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>ä»ç¼“å†²åŒºæå–æ•°å€¼çš„æ—¶å€™ï¼Œ<strong>stringstream</strong> ä¼šæŒ‰ç…§ç©ºæ ¼æˆ–è€…æ¢è¡Œç¬¦æ¥åˆ†éš”æ•°æ®ï¼Œç„¶åå°è¯•å°†ç¬¬ä¸€ä¸ªåˆ†éš”çš„æ•°æ®è½¬æ¢ä¸ºç›®æ ‡ç±»å‹ã€‚å¦‚æœè½¬æ¢æˆåŠŸï¼Œå°±è¿”å›è¿™ä¸ªæ•°å€¼ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œå°±è¿”å› <strong>0</strong>ï¼Œå¹¶ä¸”è®¾ç½®é”™è¯¯çŠ¶æ€æ ‡å¿—ã€‚æå–ä¹‹åï¼Œsså†…çš„ç¼“å†²åŒºå†…å®¹ä¸ä¼šæ”¹å˜ï¼Œ::ä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªè¦æå–çš„æ•°æ®çš„ä½ç½®::ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>tellg()</code>æ–¹æ³•æ¥è·å–è¿™ä¸ªæŒ‡é’ˆçš„ä½ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>seekg()</code>æ–¹æ³•æ¥ç§»åŠ¨è¿™ä¸ªæŒ‡é’ˆã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªstringstreamå¯¹è±¡ </span></span><br><span class="line">std::stringstream ss;</span><br><span class="line"><span class="comment">// å‘å…¶ä¸­æ’å…¥å­—ç¬¦ä¸²å’Œæ•°å€¼ </span></span><br><span class="line">ss &lt;&lt; â€œHelloâ€ &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="number">2021</span>; </span><br><span class="line"><span class="type">int</span> n; </span><br><span class="line"><span class="comment">// ä»ç¼“å†²åŒºä¸­æå–ä¸€ä¸ªæ•°å€¼ </span></span><br><span class="line">ss &gt;&gt; n; </span><br><span class="line"><span class="comment">// è¾“å‡ºæå–çš„æ•°å€¼ï¼Œç»“æœæ˜¯0ï¼Œå› ä¸ºHelloä¸èƒ½è½¬æ¢ä¸ºint</span></span><br><span class="line">std::cout &lt;&lt; n &lt;&lt; std::endl;  </span><br><span class="line"><span class="comment">// è¾“å‡ºå†…éƒ¨æŒ‡é’ˆçš„ä½ç½®ï¼Œç»“æœæ˜¯5ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªè¦æå–çš„æ•°æ®æ˜¯ç©ºæ ¼ </span></span><br><span class="line">std::cout &lt;&lt; ss.<span class="built_in">tellg</span>() &lt;&lt; std::endl; </span><br><span class="line"><span class="comment">// ç§»åŠ¨å†…éƒ¨æŒ‡é’ˆåˆ°ä½ç½®6ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªè¦æå–çš„æ•°æ®æ˜¯2021 </span></span><br><span class="line">ss.<span class="built_in">seekg</span>(<span class="number">6</span>); </span><br><span class="line"><span class="comment">// ä»ç¼“å†²åŒºä¸­æå–ä¸€ä¸ªæ•°å€¼ </span></span><br><span class="line">ss &gt;&gt; n; </span><br><span class="line"><span class="comment">// è¾“å‡ºæå–çš„æ•°å€¼ï¼Œç»“æœæ˜¯2021</span></span><br><span class="line">std::cout &lt;&lt; n &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>æå–çš„æ—¶å€™ï¼Œ<code>::stringstream</code>ä¼š<strong>è‡ªåŠ¨è·³è¿‡</strong>ç©ºæ ¼æˆ–è€…æ¢è¡Œç¬¦ï¼Œç›´åˆ°é‡åˆ°éç©ºç™½å­—ç¬¦ä¸ºæ­¢ã€‚æå–çš„é¡ºåºæ˜¯<strong>ä»å·¦å¾€å³</strong>çš„ï¼Œä¹Ÿå°±æ˜¯ä»ç¼“å†²åŒºçš„å¼€å¤´åˆ°ç»“å°¾çš„é¡ºåºã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªstringstreamå¯¹è±¡</span></span><br><span class="line">std::stringstream ss;  </span><br><span class="line"><span class="comment">// å‘å…¶ä¸­æ’å…¥ä¸€äº›æ•°å€¼ï¼Œä¸­é—´ç”¨ç©ºæ ¼åˆ†éš”</span></span><br><span class="line">ss &lt;&lt; â€œ<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>â€;  </span><br><span class="line"><span class="comment">// ä»ç¼“å†²åŒºä¸­æå–ä¸€ä¸ªæ•°å€¼è¾“å‡ºï¼Œç»“æœæ˜¯1 </span></span><br><span class="line"><span class="type">int</span> n; </span><br><span class="line">ss &gt;&gt; n;  </span><br><span class="line">std::cout &lt;&lt; n &lt;&lt; std::endl; </span><br><span class="line"><span class="comment">// ä»ç¼“å†²åŒºä¸­æå–ä¸€ä¸ªæ•°å€¼ï¼Œè¾“å‡º,ç»“æœæ˜¯2</span></span><br><span class="line">ss &gt;&gt; n;</span><br><span class="line">std::cout &lt;&lt; n &lt;&lt; std::endl; </span><br><span class="line"><span class="comment">// ä»ç¼“å†²åŒºä¸­æå–ä¸€ä¸ªæ•°å€¼ï¼Œè¾“å‡º,ç»“æœæ˜¯3</span></span><br><span class="line">ss &gt;&gt; n; </span><br><span class="line">std::cout &lt;&lt; n &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><h4 id="ostringstream-amp-istringstream"><a href="#ostringstream-amp-istringstream" class="headerlink" title="ostringstream &amp; istringstream"></a>ostringstream &amp; istringstream</h4><p>ä»å‰ç¼€å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸€ä¸ªç”¨ä½œè¾“å‡ºï¼Œä¸€ä¸ªåªç”¨ä½œè¾“å…¥ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> ROS </tag>
            
            <tag> æ»¤æ³¢å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é«˜å‹çº¿å·¡æ£€æœºå™¨äºº</title>
      <link href="/2023/04/17/%E9%AB%98%E5%8E%8B%E7%BA%BF%E5%B7%A1%E6%A3%80%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
      <url>/2023/04/17/%E9%AB%98%E5%8E%8B%E7%BA%BF%E5%B7%A1%E6%A3%80%E6%9C%BA%E5%99%A8%E4%BA%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡è¯´æ˜ä¹¦â€”â€”é«˜å‹çº¿å·¡æ£€æœºå™¨äºº"><a href="#è®¾è®¡è¯´æ˜ä¹¦â€”â€”é«˜å‹çº¿å·¡æ£€æœºå™¨äºº" class="headerlink" title="è®¾è®¡è¯´æ˜ä¹¦â€”â€”é«˜å‹çº¿å·¡æ£€æœºå™¨äºº"></a>è®¾è®¡è¯´æ˜ä¹¦â€”â€”é«˜å‹çº¿å·¡æ£€æœºå™¨äºº</h1><h1 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h1><h2 id="ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚"><a href="#ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚" class="headerlink" title="ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚"></a>ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚</h2><h3 id="1-1-ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰"><a href="#1-1-ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰" class="headerlink" title="1.1 ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰"></a>1.1 ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰</h3><h3 id="1-2-å·¡æ£€çº¿è·¯ç¯å¢ƒ"><a href="#1-2-å·¡æ£€çº¿è·¯ç¯å¢ƒ" class="headerlink" title="1.2 å·¡æ£€çº¿è·¯ç¯å¢ƒ"></a>1.2 å·¡æ£€çº¿è·¯ç¯å¢ƒ</h3><h3 id="1-3-æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚"><a href="#1-3-æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚" class="headerlink" title="1.3 æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚"></a>1.3 æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚</h3><h2 id="äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜"><a href="#äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜" class="headerlink" title="äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜"></a>äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜</h2><h3 id="2-1-æ•´ä½“æœºæ„ç»„æˆ"><a href="#2-1-æ•´ä½“æœºæ„ç»„æˆ" class="headerlink" title="2.1 æ•´ä½“æœºæ„ç»„æˆ"></a>2.1 æ•´ä½“æœºæ„ç»„æˆ</h3><h3 id="2-2-æ•´ä½“æ–¹æ¡ˆåˆ†æ"><a href="#2-2-æ•´ä½“æ–¹æ¡ˆåˆ†æ" class="headerlink" title="2.2 æ•´ä½“æ–¹æ¡ˆåˆ†æ"></a>2.2 æ•´ä½“æ–¹æ¡ˆåˆ†æ</h3><h3 id="2-3-äººå‘˜åˆ†å·¥"><a href="#2-3-äººå‘˜åˆ†å·¥" class="headerlink" title="2.3 äººå‘˜åˆ†å·¥"></a>2.3 äººå‘˜åˆ†å·¥</h3><h2 id="ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡"><a href="#ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡" class="headerlink" title="ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡"></a>ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡</h2><h2 id="3-0-æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"><a href="#3-0-æ€»ä½“è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="3.0 æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"></a>3.0 æ€»ä½“è®¾è®¡æ–¹æ¡ˆ</h2><h2 id="3-1-è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ"><a href="#3-1-è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="3.1 è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ"></a>3.1 è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ</h2><h3 id="3-1-1-è¿æ†æœºæ„"><a href="#3-1-1-è¿æ†æœºæ„" class="headerlink" title="3.1.1 è¿æ†æœºæ„"></a>3.1.1 è¿æ†æœºæ„</h3><h3 id="3-1-2-é«˜åº¦è¡¥å¿æœºæ„"><a href="#3-1-2-é«˜åº¦è¡¥å¿æœºæ„" class="headerlink" title="3.1.2 é«˜åº¦è¡¥å¿æœºæ„"></a>3.1.2 é«˜åº¦è¡¥å¿æœºæ„</h3><h3 id="3-1-3-åŠ¨åŠ›è£…ç½®"><a href="#3-1-3-åŠ¨åŠ›è£…ç½®" class="headerlink" title="3.1.3 åŠ¨åŠ›è£…ç½®"></a>3.1.3 åŠ¨åŠ›è£…ç½®</h3><h3 id="3-1-4-æ•´ä½“è¿åŠ¨æµç¨‹"><a href="#3-1-4-æ•´ä½“è¿åŠ¨æµç¨‹" class="headerlink" title="3.1.4 æ•´ä½“è¿åŠ¨æµç¨‹"></a>3.1.4 æ•´ä½“è¿åŠ¨æµç¨‹</h3><h2 id="3-2-å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ"><a href="#3-2-å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ" class="headerlink" title="3.2 å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ"></a>3.2 å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ</h2><h3 id="3-2-1-æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸"><a href="#3-2-1-æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸" class="headerlink" title="3.2.1 æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸"></a>3.2.1 æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸</h3><h3 id="3-2-2-è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–"><a href="#3-2-2-è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–" class="headerlink" title="3.2.2 è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–"></a>3.2.2 è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–</h3><h2 id="3-3-åŠ¨åŠ›åˆ†æä¸é€‰å‹"><a href="#3-3-åŠ¨åŠ›åˆ†æä¸é€‰å‹" class="headerlink" title="3.3 åŠ¨åŠ›åˆ†æä¸é€‰å‹"></a>3.3 åŠ¨åŠ›åˆ†æä¸é€‰å‹</h2><h2 id="å››ã€å¹³è¡¡æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ"><a href="#å››ã€å¹³è¡¡æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="å››ã€å¹³è¡¡æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ"></a>å››ã€å¹³è¡¡æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ</h2><h3 id="4-1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ"><a href="#4-1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ" class="headerlink" title="4.1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ"></a>4.1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ</h3><h3 id="4-2é½¿è½®é½¿æ¡ä¼ åŠ¨"><a href="#4-2é½¿è½®é½¿æ¡ä¼ åŠ¨" class="headerlink" title="4.2é½¿è½®é½¿æ¡ä¼ åŠ¨"></a>4.2é½¿è½®é½¿æ¡ä¼ åŠ¨</h3><h3 id="4-3-é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ"><a href="#4-3-é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ" class="headerlink" title="4.3 é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ"></a>4.3 é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ</h3><h2 id="äº”ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ"><a href="#äº”ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="äº”ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ"></a>äº”ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ</h2><h3 id="5-1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"><a href="#5-1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="5.1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"></a>5.1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ</h3><h3 id="5-2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾"><a href="#5-2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾" class="headerlink" title="5.2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾"></a>5.2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾</h3><h3 id="5-3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ"><a href="#5-3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ" class="headerlink" title="5.3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ"></a>5.3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ</h3><h2 id="å…­ã€è„±çº¿æ§åˆ¶æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ"><a href="#å…­ã€è„±çº¿æ§åˆ¶æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="å…­ã€è„±çº¿æ§åˆ¶æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ"></a>å…­ã€è„±çº¿æ§åˆ¶æœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ</h2><h3 id="6-1ã€æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"><a href="#6-1ã€æ€»ä½“è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="6.1ã€æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"></a>6.1ã€æ€»ä½“è®¾è®¡æ–¹æ¡ˆ</h3><h3 id="6-2ã€å‡¸è½®é½¿è½®é½¿æ¡æœºæ„"><a href="#6-2ã€å‡¸è½®é½¿è½®é½¿æ¡æœºæ„" class="headerlink" title="6.2ã€å‡¸è½®é½¿è½®é½¿æ¡æœºæ„"></a>6.2ã€å‡¸è½®é½¿è½®é½¿æ¡æœºæ„</h3><h3 id="6-3ã€ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„"><a href="#6-3ã€ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„" class="headerlink" title="6.3ã€ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„"></a>6.3ã€ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„</h3><h3 id="6-4ã€é½¿è½®ç³»æœºæ„"><a href="#6-4ã€é½¿è½®ç³»æœºæ„" class="headerlink" title="6.4ã€é½¿è½®ç³»æœºæ„"></a>6.4ã€é½¿è½®ç³»æœºæ„</h3><h3 id="6-5ã€æ€»ç»“"><a href="#6-5ã€æ€»ç»“" class="headerlink" title="6.5ã€æ€»ç»“"></a>6.5ã€æ€»ç»“</h3><h2 id="ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³"><a href="#ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³" class="headerlink" title="ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³"></a>ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³</h2><hr><h1 id="ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚-1"><a href="#ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚-1" class="headerlink" title="ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚"></a>ä¸€ã€é€‰é¢˜çš„èƒŒæ™¯å’Œè¦æ±‚</h1><h2 id="1-1-ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰-1"><a href="#1-1-ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰-1" class="headerlink" title="1.1 ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰"></a>1.1 ç ”ç©¶èƒŒæ™¯å’Œæ„ä¹‰</h2><p>ç”µåŠ›ä¼ è¾“è¿‡ç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„è®¾å¤‡ä¹‹ä¸€å°±æ˜¯é«˜å‹çº¿è·¯ï¼Œå…¶å½±å“äº†ç”µåŠ›ä¼ è¾“ç³»ç»Ÿçš„å¯é æ€§å’Œå®‰å…¨æ€§ã€‚ä¼ è¾“ç³»ç»Ÿä¸­çš„æ†å¡”æˆ–è€…ç”µçº¿ç”±äºé•¿æœŸæš´éœ²åœ¨é‡å¤–æˆ–è€…å—åˆ°ç¯å¢ƒå’Œæœºæ¢°çš„ä½œç”¨ä¼šäº§ç”Ÿå¤šç§å½¢å¼çš„æ•…éšœå’Œå®‰å…¨éšæ‚£,å¦‚: å¯¼çº¿æœºæ¢°ç ´æŸã€è¿æ¥é‡‘å…·æ¾è„±åŠçº¿è·¯ç”µæ°”æ•…éšœç­‰ï¼Œå¦‚ä¸åŠæ—¶å‘ç°æ’é™¤ï¼Œæœ€ç»ˆå¯èƒ½å°†å¯¼è‡´é‡å¤§åœç”µäº‹æ•…æˆ–äººèº«å®‰å…¨äº‹æ•…ï¼Œå¸¦æ¥æå¤§çš„ç¤¾ä¼šå½±å“å’Œç»æµæŸå¤±ã€‚</p><p>æ‰€ä»¥è¾“ç”µçº¿è·¯çš„å·¡æ£€ä½œä¸šæ˜¯é«˜å‹çº¿ç»´æŠ¤ä¸­æœ€é‡è¦çš„ä½œä¸šä¹‹ä¸€ï¼Œé€šè¿‡å¯¹è¾“ç”µçº¿è·¯å‘¨å›´ç¯å¢ƒå’Œçº¿è·¯è¿è¡Œç¯å¢ƒçš„æ£€æŸ¥ï¼ŒåŠæ—¶å‘ç°å¹¶æ¶ˆé™¤éšæ‚£ï¼Œå®ç°å¯¹äº‹æ•…çš„æå‰é¢„é˜²ï¼Œä¿è¯ä¾›ç”µå®‰å…¨ä¸‡æ— ä¸€å¤±ã€‚ç„¶è€Œå½“å‰é˜¶æ®µï¼Œæˆ‘å›½å¤šé‡‡å–æ“ä½œäººå‘˜å€ŸåŠ©ç»ç¼˜æ–—è‡‚è½¦å¸¦ç”µä½œä¸šæ–¹å¼ï¼Œéœ€è¦å¤šåæ“ä½œäººå‘˜åœ¨é«˜ç©ºå’Œåœ°é¢ï¼Œåœ¨é«˜å‹ã€å¼ºç”µç£åœºç­‰æç«¯å±é™©ç¯å¢ƒä¸‹è¿›è¡Œæ¥çº¿ã€è§£çº¿ã€å¹¶çº¿ç­‰æ‰‹å·¥æ“ä½œï¼ŒåŠ³åŠ¨å¼ºåº¦å¤§ï¼Œç²¾ç¥é«˜åº¦ç´§å¼ ã€‚è¿™ç§å¸¦ç”µä½œä¸šæ–¹å¼ä¸ä»…åŸ¹è®­éš¾åº¦å¤§ï¼Œç»™æ“ä½œäººå‘˜å¸¦æ¥äººèº«å±é™©ï¼Œè€Œä¸”ä½œä¸šæ•ˆç‡ä½ä¸‹ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬æƒ³è®¾è®¡ä¸€æ¬¾é«˜å‹çº¿å·¡æ£€æœºå™¨äººï¼Œå¯æ²¿è¾“ç”µçº¿è·¯è¡Œèµ°çš„åŒæ—¶è¿˜éœ€è¦èƒ½è·¨è¶Šéšœç¢ç‰©ï¼Œå¯ä»¥ä½¿ç”¨ä¾¿æºå¼ä»ªå™¨è®¾å¤‡è¿‘è·ç¦»æ£€æŸ¥ï¼Œæ—¢èƒ½å®Œæˆå·¡æ£€ï¼Œåˆèƒ½å®Œæˆçº¿è·¯çš„ç®€å•ç»´æŠ¤ã€‚</p><h2 id="1-2-å·¡æ£€çº¿è·¯ç¯å¢ƒ-1"><a href="#1-2-å·¡æ£€çº¿è·¯ç¯å¢ƒ-1" class="headerlink" title="1.2 å·¡æ£€çº¿è·¯ç¯å¢ƒ"></a>1.2 å·¡æ£€çº¿è·¯ç¯å¢ƒ</h2><p>åœ¨æˆ‘å›½çš„æ¶ç©ºè¾“ç”µçº¿è·¯ä¸­ 110kv ä»¥ä¸Šçš„è¶…é«˜å‹çº¿è·¯æ˜¯ä¸»è¦çš„è¾“ç”µçº¿è·¯ï¼Œå…¶è¦†ç›–é¢å¹¿ï¼Œä¸€èˆ¬çš„é€šè¿‡é«˜åº¦ä¸º 12-30 ç±³ï¼Œä¸¤è€å¼ å¡”é—´éš”ä¸º 200-600 ç±³ï¼Œçº¿ç¼†ç›´å¾„ä¸ºã€‚</p><p>é«˜å‹è¾“ç”µçº¿è·¯çš„ä¸»è¦å…ƒå™¨ä»¶å¯¼çº¿ã€è€å¼ å¡”ä»¥åŠåŒ…æ‹¬ç»ç¼˜å­ä¸²ã€è”ç»“é‡‘å…·ã€ä¿æŠ¤é‡‘å…·ç­‰åœ¨å†…çš„çº¿è·¯ä¸Šé™„å±è®¾å¤‡ï¼Œè¿™äº›å…ƒå™¨ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œæ„æˆç‰¹æ®Šçš„çº¿è·¯ç¯å¢ƒã€‚</p><ul><li><p>å…¸å‹éšœç¢ç‰©</p><ul><li><p>é˜²éœ‡é”¤ï¼š</p><p>é˜²éœ‡é”¤å¸¸æŒ‚åœ¨é è¿‘ç»ç¼˜å­ä¸¤ä¾§çš„çº¿è·¯ä¸Šï¼Œæ¥å¹³è¡¡å› å¤–åŠ›å¼•èµ·çš„æŒ¯åŠ¨ï¼Œå‡è½»å¯¹çº¿è·¯çš„æŸä¼¤</p></li><li><p>æ‚¬å‚çº¿å¤¹ï¼š</p><p>å°†å¯¼çº¿å›ºå®šåœ¨ç›´çº¿æ†å¡”çš„ç»ç¼˜å­ä¸²ä¸Šï¼Œæˆ–å°†é¿é›·çº¿ï¼ˆåœ°çº¿ï¼‰æ‚¬æŒ‚åœ¨ç›´çº¿æ†å¡”ä¸Šï¼Œä¹Ÿå¯ç”¨äºæ¢ä½æ†å¡”ä¸Šæ”¯æŒæ¢ä½å¯¼çº¿ä»¥åŠè€å¼ è½¬è§’æ†å¡”è·³çº¿çš„å›ºå®š</p></li></ul></li></ul><p>ä¾æ®æ‚¬å‚çº¿å¤¹çš„æ‚¬å‚è§’ç¡®å®šå·¡æ£€æœºå™¨äººçº¿ä¸Šçˆ¬å¡æœ€å¤§è§’åº¦<strong>ä¸€èˆ¬å°äº25Â°</strong></p><p><img src="https://s2.loli.net/2023/04/17/KVeCTBL5dyEIli1.png" alt="æ‚¬å‚çº¿å¤¹.png"></p><p>æ‚¬å‚çº¿å¤¹</p><p><img src="https://s2.loli.net/2023/04/17/QF74oR53SbZjaiL.png" alt="è€å¼ ç»ç¼˜å­ä¸².png"></p><p>è€å¼ ç»ç¼˜å­ä¸²</p><p><img src="https://s2.loli.net/2023/04/17/KyLZUSu3sHPY1nR.png" alt="é—´éš”æ£’.png"></p><p>é—´éš”æ£’</p><h2 id="1-3-æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚-1"><a href="#1-3-æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚-1" class="headerlink" title="1.3 æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚"></a>1.3 æœºæ„è®¾è®¡çš„å…·ä½“è¦æ±‚</h2><ol><li>çº¿ä¸Šè¡Œèµ°ï¼Œè‡³å°‘å…·æœ‰30Â°çš„çˆ¬å¡èƒ½åŠ›ï¼›</li><li>ä¸ºå‡è½»é«˜å‹çº¿æ‰¿é‡ï¼Œæ•´ä½“æœºæ„å°½é‡è®¾è®¡è½»ä¾¿ï¼›</li><li>èƒ½è¾ƒä¸ºå¹³ç¨³åœ°è·¨è¶Šéšœç¢ç‰©ï¼›</li><li>å…·æœ‰è¶³å¤Ÿçš„ç¨³å®šæ€§ï¼Œèƒ½å¤ŸæŠµæŠ—é«˜ç©ºç¯å¢ƒä¸‹é£åŠ›ç­‰å¤–éƒ¨å› ç´ çš„å½±å“ï¼›</li><li>é¢„ç•™å‡ºåˆé€‚çš„ç©ºé—´ä»¥åŠ è£…æ§åˆ¶ç®±åŠæ£€ä¿®ç›¸å…³ä¼ æ„Ÿå™¨ã€‚</li></ol><hr><h2 id="äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜-1"><a href="#äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜-1" class="headerlink" title="äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜"></a>äºŒã€æ•´ä½“æ–¹æ¡ˆçš„æ‹Ÿå®šåŠè¯´æ˜</h2><h2 id="2-1-æ•´ä½“æœºæ„ç»„æˆ-1"><a href="#2-1-æ•´ä½“æœºæ„ç»„æˆ-1" class="headerlink" title="2.1 æ•´ä½“æœºæ„ç»„æˆ"></a>2.1 æ•´ä½“æœºæ„ç»„æˆ</h2><ul><li>è¡Œèµ°é¿éšœæœºæ„</li><li>æœºä½“å¹³è¡¡æœºæ„</li><li>å¤¹çˆªæœºæ„</li><li>è„±çº¿æ§åˆ¶æœºæ„</li></ul><h2 id="2-2-æ•´ä½“æ–¹æ¡ˆåˆ†æ-1"><a href="#2-2-æ•´ä½“æ–¹æ¡ˆåˆ†æ-1" class="headerlink" title="2.2 æ•´ä½“æ–¹æ¡ˆåˆ†æ"></a>2.2 æ•´ä½“æ–¹æ¡ˆåˆ†æ</h2><p>é«˜å‹çº¿ç›´å¾„ä¸€èˆ¬ä¸º78mmå·¦å³ï¼›</p><p>æ ¹æ®å¸¸è§éšœç¢ç‰©å°ºå¯¸ï¼Œæœºå™¨äººåœ¨çº¿ä¸Šè·¨è¶Šéšœç¢æ—¶åº”æœ‰å‡ åå…¬åˆ†çš„è·¨è·ã€‚</p><p>å¸¸è§çš„è¡Œèµ°è¶Šéšœæœºæ„ç³»ç»Ÿä¸ºè½®è‡‚ç»„åˆå¼ï¼Œè®¾è®¡è¡Œèµ°è½®å’Œå‹ç´§è½®ï¼Œé˜²æ­¢ä¾§ç¿»å’Œæ‰“æ»‘ï¼Œå®é™…ä¸­æŠ€æœ¯éš¾ç‚¹ä¸ºï¼šè·¨è¶Šå¼ç©¿è¶Šéšœç¢ï¼Œè½®è‡‚ä¼šè„±ç¦»è¾“ç”µçº¿è·¯ï¼Œè¦ä½¿è½®è‡‚å†æ¬¡ç²¾å‡†æŒ‚çº¿ï¼Œæ§åˆ¶éš¾åº¦éå¸¸å¤§ï¼›è¶Šéšœè¿‡ç¨‹ä¸­å­˜åœ¨å•ç‚¹æŒ‚çº¿çš„æƒ…å†µï¼Œç”±æœºå™¨äººè‡ªé‡äº§ç”Ÿçš„åŠ›çŸ©ï¼Œä¼šåŠ å¤§ä¸Šéœ‡åŠ¨çš„å¹…åº¦ï¼Œåªèƒ½ä¸æ–­è°ƒèŠ‚è‡ªèº«é‡å¿ƒï¼Œä¿è¯çº¿ä¸Šå§¿æ€ç¨³å®šï¼Œä½¿æ§åˆ¶ç³»ç»Ÿæ›´åŠ ç¹æ‚ï¼›åŒæ—¶å¸¸è§çš„è½®è‡‚å¼æœºå™¨äººå¾€å¾€å…·æœ‰è¾ƒå¤šçš„ç”µæœºä¸è‡ªç”±åº¦ï¼Œæ§åˆ¶éš¾åº¦è¾ƒå¤§ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬æ‰“ç®—é‡‡ç”¨è½®è…¿å¼è¡Œèµ°é¿éšœæœºæ„ï¼Œå¹¶ä¸”æ›´å¤šåœ°å°†è¿åŠ¨æ§åˆ¶é€šè¿‡æœºæ¢°è®¾è®¡çš„æ–¹å¼å®ç°ã€‚ä½¿ç”¨è¿æ†å®ç°è¡Œèµ°ï¼Œå¹¶é€šè¿‡å¤¹çˆªæ—‹è½¬æœºæ„ä»æ­¤åˆ†å‡ºä¸€éƒ¨åˆ†åŠ¨åŠ›æ ¹æ®è¡Œèµ°æœºæ„çš„å§¿æ€å®ç°å¤¹çˆªçš„æ¾ç´§æ§åˆ¶ä¸æ—‹è½¬ï¼Œæ–¹ä¾¿è„±çº¿ä¸é‡æ–°ä¸Šçº¿ï¼Œé…åˆå®Œæˆè¡Œèµ°ã€‚</p><h3 id="2-3-äººå‘˜åˆ†å·¥-1"><a href="#2-3-äººå‘˜åˆ†å·¥-1" class="headerlink" title="2.3 äººå‘˜åˆ†å·¥"></a>2.3 äººå‘˜åˆ†å·¥</h3><p>æˆ‘ä»¬è®¤ä¸ºæ•´ä½“æœºæ„åº”è¯¥ç”±è¡Œèµ°é¿éšœæœºæ„ã€æœºä½“å¹³è¡¡æœºæ„ã€å¤¹çˆªæœºæ„å’Œå¤¹çˆªæ—‹è½¬æœºæ„ç»„æˆã€‚ç»„å†…æ¯ä¸ªæˆå‘˜è´Ÿè´£å„è‡ªæœºæ„çš„è®¾è®¡ï¼ŒåŒ…æ‹¬ç»“æ„è®¾è®¡ã€å„éƒ¨åˆ†çš„å‚æ•°æ•´å®šã€ä»¿çœŸå»ºæ¨¡ã€åº”åŠ›åˆ†æã€é›¶éƒ¨ä»¶é€‰å‹ç­‰ä»»åŠ¡ï¼Œæœ€ç»ˆæ•´åˆæ±‡æ€»ã€‚</p><p>æ‰€æœ‰æ–¹æ¡ˆå’Œè®¾è®¡çš„å…·ä½“å†…å®¹ä¼šåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­æœ‰è¯¦ç»†è¯´æ˜</p><ul><li>ç”²ï¼šè¡Œèµ°é¿éšœæœºæ„ã€æ€»ä½“æ–¹æ¡ˆä¸åˆ†é…</li><li>ä¹™ï¼šæœºä½“å¹³è¡¡æœºæ„</li><li>ä¸™ï¼šå¤¹çˆªæœºæ„</li><li>ä¸ï¼šè„±çº¿æ§åˆ¶æœºæ„</li></ul><h3 id="2-4æ€»ä½“æ•ˆæœé¢„è§ˆ"><a href="#2-4æ€»ä½“æ•ˆæœé¢„è§ˆ" class="headerlink" title="2.4æ€»ä½“æ•ˆæœé¢„è§ˆ"></a>2.4æ€»ä½“æ•ˆæœé¢„è§ˆ</h3><p><img src="https://s2.loli.net/2023/04/17/xLbi985KpD6Phqk.png" alt="æ€»ä½“é¢„è§ˆ.png"></p><hr><h1 id="ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡-1"><a href="#ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡-1" class="headerlink" title="ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡"></a>ä¸‰ã€è¡Œèµ°æœºæ„ç»¼åˆè®¾è®¡</h1><h2 id="3-0-æ€»ä½“è®¾è®¡æ–¹æ¡ˆ-1"><a href="#3-0-æ€»ä½“è®¾è®¡æ–¹æ¡ˆ-1" class="headerlink" title="3.0 æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"></a>3.0 æ€»ä½“è®¾è®¡æ–¹æ¡ˆ</h2><p>ä¼ ç»Ÿçš„è½®å¼ç»“æ„æ— æ³•å®Œæˆå¯¹éšœç¢ç‰©çš„ç¿»è¶Šï¼Œè€Œçµæ´»çš„è½®è‡‚æ˜¯æœºå™¨äººå¾€å¾€å…·æœ‰å¤æ‚çš„æ§åˆ¶æ–¹æ¡ˆï¼Œè€Œä¸”ç¼ºå°‘ç¨³å®šæ€§ã€‚ä¸ºäº†å®ç°æœºä½“è¾ƒä¸ºç¨³å®šåœ°çš„è·¨è¶Šçº¿ä¸Šéšœç¢ç‰©ï¼Œæˆ‘ä»¬ä¸ºé«˜å‹çº¿å·¡æ£€æœºå™¨äººè®¾è®¡äº†ä¸€ä¸ªè¡Œèµ°è£…ç½®ï¼Œèƒ½å®ç°ä¸¤åªè…¿å¾€å¤æ‘†åŠ¨ï¼Œç›¸äº’é…åˆï¼Œäº¤æ›¿æ‰¿é‡ï¼Œåœ¨ç»´æŒæœºä½“çš„æ•´ä½“é‡å¿ƒç›¸å¯¹å¹³ç¨³çš„åŒæ—¶é€šè¿‡ä¼¸è…¿ï¼Œè¡Œèµ°æœºæ„æœ«ç«¯çš„ç›´çº¿è¿åŠ¨ï¼Œæ”¶è…¿æ¥è·¨è¿‡éšœç¢ç‰©ã€‚</p><h2 id="3-1-è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ-1"><a href="#3-1-è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ-1" class="headerlink" title="3.1 è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ"></a>3.1 è¿åŠ¨ç»“æ„è®¾è®¡æ–¹æ¡ˆ</h2><p><strong>é¢„æœŸåŠŸèƒ½</strong>ï¼š</p><ol><li><strong>è…¿éƒ¨ä¸»ä½“å¾€å¤æ‘†åŠ¨çš„è¿åŠ¨æ–¹å¼ï¼š</strong>ä¸ºäº†ä½¿è¡Œèµ°æœºæ„èƒ½è¶Šè¿‡æ›´å¤§çš„éšœç¢ç‰©ï¼Œè¡Œèµ°æœºæ„çš„å°ºå¯¸ä¸å¯é¿å…çš„ä¼šè®¾è®¡çš„æ¯”è¾ƒå¤§ã€‚å¦‚æœæƒ³è·å¾—è¾ƒå¤§çš„ç©ºé—´ï¼Œåˆ™å¯ä»¥å°†è…¿æ¶è®¾åœ¨æœºä½“ä¸¤ä¾§ï¼Œä½†è¿™æ ·ä¸€æ¥ä¸ºäº†ä¿æŒå¹³è¡¡æ€»å…±ä¾¿éœ€è¦å››åªè…¿å’Œä¸¤æ ¹çº¿ç¼†æ‰èƒ½ä½¿æœºå™¨äººæ‚¬æŒ‚ä½œä¸šï¼Œä¼šå¸¦æ¥è¾ƒå¤§çš„é™åˆ¶è€Œä¸”ç»“æ„è‡ƒè‚¿ã€‚å› æ­¤è€ƒè™‘å°†å…¶æ”¾åœ¨æœºä½“ä¸­é—´ã€‚ä¸ºäº†å‡å°‘è¡Œèµ°æœºæ„ä¸æœºå™¨äººä¸»ä½“ä¹‹é—´çš„ä½ç½®å†²çªï¼Œè…¿éƒ¨æœºæ„ä¸»ä½“åº”å½“å°½é‡å°†æ†ä»¶çš„å·¥ä½œè§’åº¦é™åˆ¶åœ¨180Â°ï¼Œé‡‡ç”¨å¾€å¤æ‘†åŠ¨çš„æ–¹å¼å®ç°å‰è¿›å’Œé¿éšœã€‚</li><li><strong>è…¿éƒ¨æœ«ç«¯å·¥ä½œè¡Œç¨‹çš„è¿åŠ¨è½¨è¿¹ä¸ºæ¥è¿‘ç›´çº¿ï¼š</strong>é«˜å‹çº¿ç¼†è¿‘ä¼¼ä¸ºä¸€æ¡ç›´çº¿ï¼Œå€˜è‹¥è…¿éƒ¨æœ«ç«¯ï¼ˆä¸å¦¨ç§°ä¹‹ä¸ºè¶³éƒ¨ï¼‰å·¥ä½œçš„è¿åŠ¨è½¨è¿¹ä¸ä¸ºä¸€æ¡ç›´çº¿ï¼Œåˆ™å…¶åœ¨æ”¯æ’‘ç€æœºä½“å‰è¿›æ—¶ä¾¿ä¼šä½¿æ•´ä½“é‡å¿ƒä¸Šä¸‹ç§»åŠ¨ï¼Œç¨³å®šæ€§è¾ƒä½ã€‚æ•…å°†è¶³éƒ¨å·¥ä½œè½¨è¿¹å°½å¯èƒ½æ‹Ÿåˆç›´çº¿ï¼Œåœ¨å¹³ç¨³æœºèº«çš„åŒæ—¶ä¹Ÿå¯ä»¥ä¾¿äºå¤¹çˆªå¯¹çº¿ç¼†çš„å¤¹å–å’Œé‡Šæ”¾ã€‚</li><li><strong>è¶³éƒ¨å›ç¨‹è¿åŠ¨è½¨è¿¹å…·æœ‰è¾ƒå¤§çš„é«˜åº¦æ”¶ç¼©ï¼š</strong>ç±»ä¼¼äºäººä»¬è¡Œèµ°æ—¶æŠ¬èµ·è„šè·¨è¿‡éšœç¢ç‰©ä¸€æ ·ï¼Œè¡Œèµ°æœºæ„ä¹Ÿéœ€è¦åœ¨å›ç¨‹æ—¶èƒ½ä½¿æœ«ç«¯åœ¨ç«–ç›´æ–¹å‘ä¸Šæœ‰ä¸€å®šçš„æ”¶ç¼©ï¼Œä»¥ä¾¿äºè·¨è¿‡éšœç¢ç‰©ã€‚</li></ol><p><strong>è¡Œèµ°æœºæ„æ•ˆæœå›¾</strong></p><p><img src="https://s2.loli.net/2023/04/17/ysLJnwYQp7ej8aF.png" alt="è¡Œèµ°æœºæ„æ¸²æŸ“.png"></p><h3 id="3-1-1-è¿æ†æœºæ„-1"><a href="#3-1-1-è¿æ†æœºæ„-1" class="headerlink" title="3.1.1 è¿æ†æœºæ„"></a>3.1.1 è¿æ†æœºæ„</h3><p><strong>è¿åŠ¨ç®€å›¾</strong></p><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a956a669-305b-4895-b1b6-5482bde1a871/SOLIDWORKS_Premium_2022_SP0.0_-_è±å½¢è…¿3.SLDASM___2023-04-07_17-55-24_2.mp4">SOLIDWORKS Premium 2022 SP0.0 - [è±å½¢è…¿3.SLDASM _] 2023-04-07 17-55-24_2.mp4</a></p><p><strong>æ†é•¿è°ƒèŠ‚</strong></p><p><img src="https://s2.loli.net/2023/04/17/5ERUGySXxNL9FcD.png" alt="è…¿ç®€å›¾.png"></p><p>å°†æ•´ä¸ªæœºæ„å¤§è‡´åˆ†ä¸ºä¸Šä¸‹ä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸ŠåŠéƒ¨åˆ†ä¸ºä¸€ä¸ªæ›²æŸ„æ‘‡æ†æœºæ„ï¼Œä¸‹åŠéƒ¨åˆ†ä¸ºä¸€ä¸ªäº”è¿æ†æœºæ„ã€‚</p><ol><li><p>ä¸ºäº†ä½¿è¡Œèµ°æœºæ„å…·æœ‰å°½å¯èƒ½å¤§çš„æ­¥å¹…ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸ŠåŠéƒ¨åˆ†çš„æ‘‡æ†å…·æœ‰æ›´å¤§çš„æ‘†åŠ¨è§’ã€‚å› æ­¤å¯ä»¥é€‚å½“å¢åŠ æœ€ä¸Šé¢ä¸¤æ ¹æ†ä»¶çš„é•¿åº¦</p></li><li><p>ä¸ºäº†ä½¿ä¸‹æ–¹çš„å¾€å¤è¿åŠ¨æœ‰æ›´å¤§çš„æ‘†åŠ¨è§’åº¦èŒƒå›´ï¼Œä¹Ÿæ˜¯å¢åŠ æ­¥å¹…ï¼Œå¯ä»¥é€‚å½“å‡å°ä¸‰è§’å½¢æ„ä»¶çš„æœ€å¤§å†…è§’ã€‚è¯¥è§’ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°å†…æµ‹ä¸¤æ†è§’åº¦å‡ºç°è´Ÿå€¼ï¼Œæœ«ç«¯è½¨è¿¹ä¼šäº§ç”Ÿå†…æŠ˜ã€‚</p></li><li><p>ä¸ºäº†ä½¿æœ«ç«¯å…·æœ‰æ›´å¤§çš„å›ç¨‹æ”¶ç¼©é«˜åº¦ï¼Œå¯ä»¥è°ƒèŠ‚ä¸‰è§’æ„ä»¶å†…ä¾§è¾¹é•¿åº¦ä¸æœ€ä¸‹æ–¹ä¸¤æ†é•¿åº¦å…³ç³»ï¼Œä¹Ÿå¯ä»¥è°ƒèŠ‚ä¸Šé¢çš„å†…è§’æ¥å¢åŠ å†…ä¾§ä¸¤è¾¹åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­çš„æœ€å¤§å¼ è§’ã€‚</p></li><li><p>ä¸ºäº†ä½¿æœ«ç«¯å·¥ä½œè¡Œç¨‹çš„è½¨è¿¹ä¸­çš„æ°´å¹³éƒ¨åˆ†å æ¯”æ›´é«˜ï¼Œéœ€è¦è°ƒèŠ‚ä¸Šæ–¹ä¸¤ä¸ªæ›²æŸ„æ‘‡æ†æœºæ„ä¹‹é—´çš„å…³ç³»ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦è°ƒèŠ‚ä¸‹æ–¹æœºæ„çš„æ†é•¿ï¼Œé¿å…å‡ºç°ç±»ä¼¼äºç¢—è£…çš„è½¨è¿¹ï¼Œä½¿æ•´ä¸ªæœºèº«å°½å¯èƒ½å¹³ç¨³ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fd041055-36e4-46e3-9da3-fc9cd0715079/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2023-04-06_175549.png" alt="å±å¹•æˆªå›¾ 2023-04-06 175549.png"></p></li></ol><p>åœ¨è°ƒèŠ‚æ†é•¿çš„è¿‡ç¨‹ä¸­ï¼Œæ†ä»¶çš„è½¨è¿¹å¾€å¾€å¾ˆéš¾é€šè¿‡æˆ‘ä»¬ç›´è§‚çš„æ„Ÿè§‰å»è¿›è¡Œè°ƒèŠ‚ã€‚å› ä¸ºå¯èƒ½åªæ˜¯æŸäº›æ†é•¿æˆ–è€…è§’åº¦çš„å¾®å°å˜åŒ–ï¼Œå°±ä¼šä½¿æœ€ç»ˆçš„è½¨è¿¹äº§ç”Ÿè¾ƒå¤§çš„å˜åŠ¨ï¼›åŒæ—¶åœ¨æ†ä»¶è¾ƒå¤šçš„æ—¶å€™ï¼Œæœ€ç»ˆè½¨è¿¹çš„å½±å“å› ç´ ä¹Ÿä¼šå¤§é‡å¢åŠ ã€‚æ‰€ä»¥æƒ³è¦è°ƒèŠ‚å‡ºä¸€ä¸ªæ¯”è¾ƒç†æƒ³çš„è½¨è¿¹å¯èƒ½ä¼šæ¯”è¾ƒå›°éš¾ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/36e848ad-00e1-4670-89fc-d974da31dbb6/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2023-04-09_130202.png" alt="å±å¹•æˆªå›¾ 2023-04-09 130202.png"></p><p>æ‰€ä»¥æˆ‘æƒ³èƒ½ä¸èƒ½è®©ç”µè„‘å¸®æˆ‘å»å¯»æ‰¾åˆé€‚çš„å‚æ•°å‘¢ï¼Ÿäºæ˜¯æˆ‘å°±å†™äº†ä¸€æ®µç¨‹åºæ¥è®¡ç®—å‡ºæ†ä»¶æœºæ„åœ¨å„ç§å‚æ•°ä¸‹çš„æœ«ç«¯ä½ç½®ï¼Œè¿›ä¸€æ­¥å¾—åˆ°æ›²æŸ„æ—‹è½¬ä¸€å‘¨è¿‡ç¨‹ä¸­çš„æœ«ç«¯è½¨è¿¹ã€‚ç„¶åå¥—ç”¨æœºå™¨å­¦ä¹ ä¸­çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæœ€åæ”¶æ•›å¾—åˆ°è¾ƒä¸ºä¸é”™çš„ä¸€ç»„å‚æ•°ã€‚å³å›¾å³ä¸ºè¿›ä¸€æ­¥ä¼˜åŒ–è¿‡åå¾—åˆ°çš„æ›²çº¿ï¼Œå¯ä»¥çœ‹åˆ°æ°´å¹³æ–¹å‘ä¸Šçš„èŒƒå›´æ²¡æœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œä½†æ˜¯ç«–ç›´æ–¹å‘ä¸Šçš„é«˜åº¦ä»äºŒåå¤šå˜ç±³å¢åŠ åˆ°äº†å››åå¤šå˜ç±³ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0463f01c-3142-41c8-ad15-a8cb0ac45e82/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2023-04-09_130044.png" alt="å±å¹•æˆªå›¾ 2023-04-09 130044.png"></p><p>å¦å¤–ï¼Œä¸ºäº†æ›´å……åˆ†çš„åˆ©ç”¨ç©ºé—´ï¼Œé¿å…è¿æ†ä¹‹é—´çš„ç¢°æ’ï¼Œè¿æ†è®¾è®¡ä¸ºç›¸äº’äº¤é”™çš„å±‚çŠ¶åˆ†å¸ƒ</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/822a9bc4-a84c-44e3-877d-f2b9e7c3aef8/Untitled.png" alt="Untitled"></p><h3 id="3-1-2-é«˜åº¦è¡¥å¿æœºæ„-1"><a href="#3-1-2-é«˜åº¦è¡¥å¿æœºæ„-1" class="headerlink" title="3.1.2 é«˜åº¦è¡¥å¿æœºæ„"></a>3.1.2 é«˜åº¦è¡¥å¿æœºæ„</h3><p>å› ä¸ºè¡Œèµ°æœºæ„çš„å·¥ä½œè¡Œç¨‹å¤§æ¦‚åªå æ®æ•´ä¸ªæµç¨‹ä¸€åŠçš„æ—¶é—´ï¼Œä¸¤åªè…¿åœ¨äº¤æ¥çš„æ—¶å€™å°±ä¸å¤ªç¨³å®šã€‚å°±åƒæˆ‘ä»¬åœ¨æ­£å¸¸è¡Œèµ°çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸€åªè„šå…ˆè½åœ°ï¼Œå¦ä¸€åªè„šå†æŠ¬èµ·æ¥ï¼Œå¦‚æœä¸€ç›´è„šåˆšè½åœ°å¦ä¸€åªå°±ç«‹é©¬æŠ¬èµ·æ¥ï¼Œæ•´ä¸ªäººä¹Ÿä¼šä¸å¤ªç¨³å®šã€‚</p><p>æ‰€ä»¥æˆ‘è®¾è®¡äº†ä¸€ä¸ªé«˜åº¦è¡¥å¿è£…ç½®ï¼Œåœ¨å¤¹çˆªæ¾å¼€ç”µçº¿çš„å‰ä¸€åˆ»è£…ç½®æ˜¯å‹ç¼©çš„ï¼Œåœ¨å›ç¨‹åˆ°ç¦»æœºä½“æœ€è¿‘çš„åœ°æ–¹è¢«ä¸­é—´çš„æ‘‡æ†é¡¶èµ·æ¥ï¼›åœ¨å¤¹çˆªå¤¹ä½ç”µçº¿çš„å‰ä¸€åˆ»ä½¿ä¼¸é•¿çš„ï¼Œè¿™æ ·ä¾¿å¯ä»¥ä¿è¯åœ¨å¦ä¸€åªå¤¹çˆªæ¾å¼€å‰ä¾¿å·²ç»æŠ“ä½ç”µçº¿ï¼Œåœ¨è…¿å°†å¤¹çˆªæ¨å‘ç”µçº¿çš„æ—¶å€™é‡æ–°å‹ç¼©å¹¶å¡ä½ã€‚</p><p><strong>æ¨¡å‹å±•ç¤º</strong></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cb276687-39df-4479-a221-665fa5439f54/%E9%A2%84%E8%A7%88.png" alt="é¢„è§ˆ.png"></p><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4d55d138-2319-4133-bdd9-52f2f4c42064/SOLIDWORKS_Premium_2022_SP0.0_-_è„šè¸.SLDASM___2023-04-10_22-34-26_Trim.mp4">SOLIDWORKS Premium 2022 SP0.0 - [è„šè¸.SLDASM _] 2023-04-10 22-34-26_Trim.mp4</a></p><p>è¿™ä¸ªç»“æ„çš„è®¾è®¡æ˜¯ç±»ä¼¼äºç”Ÿæ´»ä¸­å¸¸è§çš„ç”µé£æ‰‡çš„æŒ‰é’®å‡é™è®¾è®¡ã€‚å½“è¢«å‹ç¼©æ—¶ï¼Œå†…éƒ¨çš„å¡æ§½æ¨ªå‘ç§»åŠ¨ï¼Œåˆ°æœ€ä¸‹æ–¹æ—¶å¼¹ç°§å°†å¡æ§½å¼¹å›ï¼Œå‡é™å¹³å°è¢«å¡åœ¨ä¸‹é¢ï¼›å½“è…¿éƒ¨è¿æ†æœºæ„å›ç¨‹æ”¶ç¼©æ—¶ï¼Œææ†è¢«ä¸­é—´çš„æ‘‡æ†é¡¶èµ·ï¼Œå¡æ§½å‘å·¦ç§»åŠ¨ï¼Œå¹³å°è¢«å¼¹å›åˆ°ä¼¸é•¿çš„çŠ¶æ€ã€‚</p><p><strong>é…åˆè¿æ†æœºæ„è¿åŠ¨åŠ¨ç”»</strong></p><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/08d11488-adb9-47a3-ad95-f506964ffb70/SOLIDWORKS_Premium_2022_SP0.0_-_è£…æœº.SLDASM___2023-04-11_13-51-13_Trim_Trim.mp4">SOLIDWORKS Premium 2022 SP0.0 - [è£…æœº.SLDASM _] 2023-04-11 13-51-13_Trim_Trim.mp4</a></p><h3 id="3-1-3-åŠ¨åŠ›è£…ç½®-1"><a href="#3-1-3-åŠ¨åŠ›è£…ç½®-1" class="headerlink" title="3.1.3 åŠ¨åŠ›è£…ç½®"></a>3.1.3 åŠ¨åŠ›è£…ç½®</h3><p>å°†ç”µæœºå®‰è£…äºç®±ä½“ï¼Œé€šè¿‡çš®å¸¦è½®å¸¦åŠ¨ä¸¤ä¸ªæ›²æŸ„ï¼Œä¸¤ä¸ªè…¿éƒ¨æœºæ„çš„æ›²æŸ„ä¿æŒ180Â°çš„ç›¸ä½å·®åŒé€Ÿè¿è½¬ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a470e460-ec85-457d-ad80-bb32684a76eb/Untitled.png" alt="Untitled"></p><h3 id="3-1-4-æ•´ä½“è¿åŠ¨æµç¨‹-1"><a href="#3-1-4-æ•´ä½“è¿åŠ¨æµç¨‹-1" class="headerlink" title="3.1.4 æ•´ä½“è¿åŠ¨æµç¨‹"></a>3.1.4 æ•´ä½“è¿åŠ¨æµç¨‹</h3><p>æ²¡æœ‰é‡åˆ°éšœç¢æ—¶ï¼Œé€šè¿‡æœ«ç«¯è½®å­æ»šåŠ¨ï¼Œé©±åŠ¨æœºå™¨äººåœ¨çº¿ä¸Šç§»åŠ¨ã€‚</p><p>æœºå™¨é è¿‘éšœç¢</p><p>å‰è…¿æ”¶èµ·è¶Šè¿‡éšœç¢ï¼Œåè…¿æŠ“ä½ç”µçº¿å¹¶æ¨åŠ¨æ•´ä½“å‘å‰ç§»åŠ¨ï¼›</p><p>å‰è…¿æœ«ç«¯æ¥è§¦ç”µçº¿ï¼Œåè…¿ä»ç„¶ä¿æŒæŠ“ä½ç”µçº¿ï¼›</p><p>å‰è…¿æœ«ç«¯è¢«å‹å‘ç”µçº¿ï¼Œæœ«ç«¯å¤¹çˆªé€šè¿‡ç¿»è½¬å¡ä½ç”µçº¿å¹¶å¤¹ç´§ï¼ŒåŒæ—¶é«˜åº¦è¡¥å¿æœºæ„è¢«å‹ç¼©å¹¶é”ä½ï¼›</p><p>å‰åå¤¹çˆªå‡å¤¹ä½é«˜å‹çº¿ï¼›</p><p>åè…¿æœ«ç«¯å¤¹çˆªç¿»è½¬å¼€å§‹è„±çº¿ï¼Œå‰è…¿æ‹‰åŠ¨æœºä½“å‘å‰è¿åŠ¨ï¼›</p><p>åè…¿æ”¶èµ·è¶Šè¿‡éšœç¢ï¼Œå‰è…¿ç»§ç»­æ‹‰åŠ¨æœºä½“å‘å‰è¿åŠ¨ï¼›</p><p>åè…¿æ”¶è‡³æœ€ä½å¤„æ—¶ï¼Œæ‘‡æ†æ¨èµ·é«˜åº¦è¡¥å¿è£…ç½®ä¸Šçš„ææ†ï¼Œæ¨ªæ¿å¹³ç§»ï¼Œé«˜åº¦è¡¥å¿è£…ç½®å¼¹å›ä¼¸é•¿çŠ¶æ€ï¼›</p><p>åè…¿å¤¹çˆªå›åˆ°çº¿ä¸Šï¼Œå‰è…¿å¤¹çˆªä¹Ÿä¿æŒåœ¨çº¿ä¸Š</p><p>å®Œæˆè¶Šéšœï¼Œå›åˆ°é€šè¿‡æœ«ç«¯è½®å­æ»šåŠ¨ï¼Œé©±åŠ¨æœºå™¨äººåœ¨çº¿ä¸Šç§»åŠ¨çš„çŠ¶æ€ã€‚</p><h2 id="3-2-å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ-1"><a href="#3-2-å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ-1" class="headerlink" title="3.2 å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ"></a>3.2 å°ºå¯¸ç»¼åˆä¸åº”åŠ›åˆ†æ</h2><h3 id="3-2-1-æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸-1"><a href="#3-2-1-æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸-1" class="headerlink" title="3.2.1 æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸"></a>3.2.1 æœºä½“å°ºå¯¸ä¸è¶Šéšœå°ºå¯¸</h3><div class="table-container"><table><thead><tr><th>å°ºå¯¸åç§°</th><th>å‚æ•°å¤§å°</th></tr></thead><tbody><tr><td>æœºæ¶é•¿åº¦</td><td>800mm</td></tr><tr><td>æœºæ¶é«˜åº¦</td><td>450mm</td></tr><tr><td>æœºæ¶å®½åº¦</td><td>350mm</td></tr><tr><td>æ°´å¹³æ–¹å‘æ­¥å¹…</td><td>700mm</td></tr><tr><td>ç«–ç›´æ–¹å‘æ”¶è…¿è·ç¦»</td><td>420mm</td></tr><tr><td>ä¸¤è…¿ä¸­å¿ƒé—´è·</td><td>600mm</td></tr></tbody></table></div><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/402f21de-4f9d-420a-891a-b97386d5435a/Untitled.png" alt="Untitled"></p><p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä¿æŒä¸€å®šæœºèº«å°ºå¯¸çš„æƒ…å†µä¸‹è¯¥è¡Œèµ°æœºæ„çš„è¶Šéšœèƒ½åŠ›è¾ƒä¸ºä¸é”™ã€‚</p><h3 id="3-2-2-è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–-1"><a href="#3-2-2-è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–-1" class="headerlink" title="3.2.2 è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–"></a>3.2.2 è¿æ†æœºæ„åº”åŠ›ä¼˜åŒ–</h3><p>ä¸ºäº†å°½é‡å‡è½»å¯¹é«˜å‹çº¿çš„è´Ÿè·ï¼Œæœºä½“åº”è¯¥è®¾è®¡çš„å°½å¯èƒ½è½»ä¾¿ï¼Œæ•´ä½“ç»“æ„é€‰æ‹©ä½¿ç”¨å¯†åº¦ä½å¼ºåº¦é«˜çš„é“åˆé‡‘ã€‚åœ¨æ•´ä¸ªæœºæ„ä¸­ï¼Œè´Ÿè·è¾ƒå¤§çš„ä¸ºä¸­é—´çš„ä¸‰è§’å½¢æ„ä»¶ï¼Œä¸»è¦å—åˆ°å‰ªåˆ‡åŠ›çš„ä½œç”¨ã€‚</p><p>ä½¿ç”¨solidworksçš„simulationæ’ä»¶å¯¹è¯¥æ„ä»¶è¿›è¡Œæœ‰é™å…ƒåˆ†æï¼Œåœ¨ä¸‹æ–¹ä¸¤è½´è®¾ç½®å›ºå®šé“°é“¾çº¦æŸï¼Œåœ¨æœ«ç«¯æ–½åŠ å‰ªåˆ‡åŠ›ä¸è½´å‘åŠ›</p><p><strong>åº”åŠ›å›¾</strong></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c31a9cac-0384-432a-9d2b-604c7e76abc3/Untitled.png" alt="Untitled"></p><p><strong>ä½ç§»å›¾</strong></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b7a035ef-91ee-4b1e-bf67-8662d0eb17a5/Untitled.png" alt="Untitled"></p><p>åœ¨ä¸­é—´å‡¹é™·å¤„ä¸¤ä¾§å‡äº§ç”Ÿäº†å¾ˆå¤§çš„åº”åŠ›ï¼Œæœ€å¤§åº”åŠ›è¾¾åˆ°äº†2.92 x 107N/mÂ²ï¼Œè¶…è¿‡äº†å±ˆæœåŠ›ï¼ˆ2.757 x 107N/mÂ²ï¼‰ï¼Œå±äºå±é™©æƒ…å†µã€‚åœ¨ä¸å›ºå®šé“°æ”¯åº§æ¥è¿‘çš„éƒ¨ä½åº”åŠ›æƒ…å†µè¾ƒä¸ºä¸é”™ã€‚åœ¨æœ«ç«¯äº§ç”Ÿäº†è¾ƒå¤§çš„ä½ç§»ï¼Œç›¸å¯¹äº450mmçš„æ†ä»¶äº§ç”Ÿäº†2mmå·¦å³çš„ä½ç§»ã€‚</p><p>ä¸ºäº†ä½¿åº”åŠ›åˆ†å¸ƒæ›´åŠ å‡åŒ€åˆç†ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿä¸è¿‡å¤šçš„æŒ¤å ä¸¤è¡Œèµ°æœºæ„ä¹‹é—´ç”¨äºè¿æ¥ä¸¤ä¾§ç®±ä½“çš„ç©ºé—´ï¼Œå‡å°è…¿éƒ¨æœºæ„æ•´ä½“çš„å½¢å˜æƒ…å†µï¼Œå°è¯•æ›´å……åˆ†åˆ©ç”¨è¿æ†æœºæ„å†…ä¾§ç©ºé—´ï¼Œå¯¹è¿æ†å½¢çŠ¶è¿›è¡Œä¼˜åŒ–ï¼Œé‡æ–°è¿›è¡Œåˆ†æï¼Œç»“æœå¦‚ä¸‹</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7dec4297-93c2-4de6-8b17-22d46d378ee8/Untitled.png" alt="Untitled"></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1c53ba80-5e8c-4658-a830-54c4ad8e4c44/Untitled.png" alt="Untitled"></p><p>ç›¸è¾ƒäºä¹‹å‰çš„æƒ…å†µï¼Œæ–°æœºæ„çš„åº”åŠ›åˆ†å¸ƒæ›´ä¸ºå‡åŒ€ï¼Œæ¿æé€‚é‡å¢åŠ ï¼Œæ‰€ä»¥å˜åŠ¨æ˜¯æœ‰ä»·å€¼çš„ã€‚</p><h2 id="3-3-åŠ¨åŠ›åˆ†æä¸é€‰å‹-1"><a href="#3-3-åŠ¨åŠ›åˆ†æä¸é€‰å‹-1" class="headerlink" title="3.3 åŠ¨åŠ›åˆ†æä¸é€‰å‹"></a>3.3 åŠ¨åŠ›åˆ†æä¸é€‰å‹</h2><h3 id="3-3-1-é€Ÿåº¦ä¸ä½ç§»åˆ†æ"><a href="#3-3-1-é€Ÿåº¦ä¸ä½ç§»åˆ†æ" class="headerlink" title="3.3.1 é€Ÿåº¦ä¸ä½ç§»åˆ†æ"></a>3.3.1 é€Ÿåº¦ä¸ä½ç§»åˆ†æ</h3><p><strong>æ°´å¹³æ–¹å‘é€Ÿåº¦</strong></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1816824c-9e36-4df5-ab54-46a423963618/Untitled.png" alt="Untitled"></p><p><strong>æ°´å¹³æ–¹å‘ä½ç§»</strong></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b40a63af-36b4-44c4-9179-9f03be5759d0/Untitled.png" alt="Untitled"></p><p>ç”±å›¾å¯çŸ¥ï¼Œè…¿éƒ¨æœºæ„æœ«ç«¯åœ¨å·¥ä½œè¡Œç¨‹æ—¶åŸºæœ¬ä¿æŒåŒ€é€Ÿï¼Œå¯ä»¥ä¿è¯åœ¨è¡Œè¿›æ—¶æœºä½“å°½å¯èƒ½çš„ä¿æŒç¨³å®šï¼›åŒæ—¶ï¼Œæœºæ„ç¨³å®šçš„åŒ€é€Ÿè¿åŠ¨ä½¿å¾—åŠ¨åŠ›è£…ç½®çš„è´Ÿæ‹…å‡å°ï¼Œè¿™è®©æˆ‘ä»¬åœ¨é€‰æ‹©ä¸»åŠ¨åŠ›ç”µæœºçš„æ—¶å€™æœ‰äº†æ›´ä¸ºå¹¿æ³›çš„é€‰æ‹©ï¼Œä¹Ÿå¤§å¤§é™ä½äº†ç”µæ§æ–¹æ¡ˆçš„å¤æ‚åº¦ã€‚</p><h3 id="3-3-2-æœºæ¶è®¾è®¡"><a href="#3-3-2-æœºæ¶è®¾è®¡" class="headerlink" title="3.3.2 æœºæ¶è®¾è®¡"></a>3.3.2 æœºæ¶è®¾è®¡</h3><p>æœºæ¶é‡‡ç”¨è¾ƒä¸ºè½»ä¾¿çš„é“åˆé‡‘ï¼Œåœ¨æ»¡è¶³å¼ºåº¦è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œé€‰ç”¨æ¬§æ ‡4040Q-1.3é“æ¶ã€‚å•ä½é•¿åº¦è´¨é‡ä¸º0.9kg/m</p><p>åœ¨å…ˆå‰è®¾è®¡çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥è®¾è®¡å‡ºå¤§è‡´çš„åŸºæœ¬æ¡†æ¶ã€‚å…·ä½“è®¾è®¡å¯æ ¹æ®å®é™…æµ‹é‡è®¾å¤‡çš„ç©ºé—´éœ€æ±‚è¿›ä¸€æ­¥ç»†åŒ–è®¾è®¡ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0486aa9e-adfe-4553-8b1c-cff334fd10f1/Untitled.png" alt="Untitled"></p><p>æ€»é•¿åº¦ä¸º0.8x4+0.45x4+0.35x2=5.7mï¼Œæ€»è´¨é‡ä¸º5.13kg</p><h3 id="3-3-3-ç”µæœºé€‰å‹"><a href="#3-3-3-ç”µæœºé€‰å‹" class="headerlink" title="3.3.3 ç”µæœºé€‰å‹"></a>3.3.3 ç”µæœºé€‰å‹</h3><p>åœ¨è¡Œèµ°æ—¶ç”±å¹³è¡¡æœºæ„çš„é’¢ä¸ä¸å¤¹çˆªæœºæ„å…±åŒæä¾›æ‹‰åŠ›ä»¥å¹³è¡¡é‡åŠ›ã€‚åŒæ—¶ï¼Œè¡Œèµ°æœºæ„åœ¨ç»´æŒæœºä½“å¹³è¡¡å¹¶ä¸”å¸¦åŠ¨æœºä½“å‰è¿›æ—¶ï¼Œä¹Ÿéœ€è¦æä¾›è¶³å¤Ÿçš„æ‰­çŸ©é˜²æ­¢é‡åŠ›ä¸ä¸Šè¿°æ‹‰åŠ›äº§ç”Ÿçš„æ®‹å·®åŠ›çŸ©ä½¿æœºèº«å€¾æ–œã€‚</p><p><strong>æœºç®±å¤§è‡´ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆ</strong></p><ul><li>ç”µæœºè´¨é‡ 0.36kg</li><li>çš®å¸¦è´¨é‡ 0.1kg</li><li>çš®å¸¦è½®è´¨é‡ 0.4kg</li><li>24vç”µæ± è´¨é‡ 1kg</li><li>æœºæ¶è´¨é‡ 5.13kg</li><li>å¹³è¡¡æœºæ„è´¨é‡ 3kg</li><li>å…¶ä»–æµ‹é‡ä»ªå™¨</li></ul><p>åŠ¨åŠ›è½´ä¸è´¨å¿ƒè·ç¦»300mmï¼ŒåŠ ä¸Šå…¶å®ƒæµ‹é‡è®¾å¤‡ï¼Œæ•´æœºè´¨é‡ä¿å®ˆä¼°è®¡ä¸º15kgï¼Œå¹³è¡¡æœºæ„å¯æŠµæ¶ˆ90%åŠ›çŸ©ï¼Œè®¾å®‰å…¨ç³»æ•°ä¸º1.5ï¼Œåˆ™éœ€æ±‚åŠ›çŸ©ä¸º6.75NM</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/73e93010-a7da-4103-9159-0198f3dc51f6/Untitled.png" alt="Untitled"></p><p>é€‰å–F86-H114å‹å·çš„æ­¥è¿›ç”µæœºå³å¯</p><h3 id="3-3-3-æ§åˆ¶è¡¥å¿"><a href="#3-3-3-æ§åˆ¶è¡¥å¿" class="headerlink" title="3.3.3 æ§åˆ¶è¡¥å¿"></a>3.3.3 æ§åˆ¶è¡¥å¿</h3><p>æ­¥è¿›ç”µæœºé€šè¿‡è„‰å†²ä¿¡å·æ§åˆ¶ã€‚å¯ä»¥é€šè¿‡æ”¹å˜è„‰å†²é¢‘ç‡æ¥è°ƒèŠ‚ç”µæœºè½¬é€Ÿã€‚è™½ç„¶æ•´ä¸ªè¡Œèµ°æœºæ„åœ¨è¡Œèµ°è¿‡ç¨‹ä¸­æœ‰è¾ƒä¸ºç¨³å®šçš„è¡Œèµ°é€Ÿåº¦ï¼Œä½†æ˜¯ä»ç„¶ä¼šæœ‰éƒ¨åˆ†æ³¢åŠ¨ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡è°ƒèŠ‚ç”µæœºè½¬é€Ÿæ¥å¯¹é€Ÿåº¦æ§åˆ¶è¿›è¡Œè¡¥å¿ã€‚</p><p>ç”µæœºä¿æŒè½¬é€Ÿ</p><hr><h1 id="å››ã€æœºä½“å¹³è¡¡æœºæ„è®¾è®¡"><a href="#å››ã€æœºä½“å¹³è¡¡æœºæ„è®¾è®¡" class="headerlink" title="å››ã€æœºä½“å¹³è¡¡æœºæ„è®¾è®¡"></a>å››ã€æœºä½“å¹³è¡¡æœºæ„è®¾è®¡</h1><h3 id="4-1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ-1"><a href="#4-1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ-1" class="headerlink" title="4.1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ"></a>4.1å¹³è¡¡æœºæ„è®¾è®¡è¦æ±‚åŠæ–¹æ¡ˆ</h3><p>æœºä½“å¹³è¡¡æœºæ„åœ¨é¿éšœæ—¶å‘æŒ¥ä½œç”¨ï¼Œé‡‡ç”¨è°ƒæ•´è´¨å¿ƒçš„æ–¹æ¡ˆä½¿å‰çˆªåœ¨è„±çº¿-è¶Šéšœ-æ­çº¿æ—¶æœºä½“èƒ½å¤Ÿä¿æŒå¹³è¡¡ã€‚</p><p>é¦–å…ˆçš„æƒ³æ³•æ˜¯ä½¿ç”¨ä¸æ ç›´çº¿è¿åŠ¨æœºæ„ï¼Œç”µæœºé©±åŠ¨ä¸æ ä½¿åçˆªç«¯æ»‘å—ä»ç«¯ç‚¹æ»‘åŠ¨è‡³æœºä½“ä¸­éƒ¨é™„è¿‘ï¼ŒåŒæ—¶å‰çˆªç«¯æ»‘å—ä¿æŒä¸åŠ¨ï¼Œä½¿æ•´ä½“è´¨å¿ƒä½äºä¸­éƒ¨ï¼Œç®±ä½“ä¿æŒæ°´å¹³ã€‚å‰çˆªå®Œæˆè¶Šéšœåï¼Œåçˆªç«¯æ»‘å—æ»‘è‡³ç«¯ç‚¹ï¼Œå‰çˆªç«¯æ»‘è‡³ä¸­éƒ¨ï¼Œä»¥ä½¿åçˆªå®Œæˆè¶Šéšœã€‚</p><p>æ»‘å—ä¸è¡Œèµ°é¿éšœæœºæ„é—´é‡‡ç”¨é’¢ä¸ä¸å¼¹ç°§è¿æ¥ã€‚æœ€ç»ˆè®¾è®¡å¦‚ä¸‹ï¼šï¼ˆä»…ä¸ºä¸€ç«¯ï¼‰</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/835e2c1c-9eba-48e2-97f9-163a2dc0b7f1/Untitled.png" alt="Untitled"></p><h3 id="4-2é½¿è½®é½¿æ¡ä¼ åŠ¨-1"><a href="#4-2é½¿è½®é½¿æ¡ä¼ åŠ¨-1" class="headerlink" title="4.2é½¿è½®é½¿æ¡ä¼ åŠ¨"></a>4.2é½¿è½®é½¿æ¡ä¼ åŠ¨</h3><p>é‡‡ç”¨ä¸æ ä¼ åŠ¨çš„ä¸å¦¥ä¹‹å¤„åœ¨äºéœ€è¦å®‰æ’ä¸¤æ¡ä¸æ æœºæ„ï¼Œè¿™å°†ä¼šå¢åŠ æˆæœ¬ï¼Œäºæ˜¯é‡‡ç”¨é½¿è½®é½¿æ¡ä¼ åŠ¨ï¼Œä¸ºåŠ å¼ºç¨³å®šæ€§ï¼Œå‰åçˆªå„è®¾ä¸¤ä¸ªå¼¹ç°§ã€‚æ­¤æœºæ„å°†å®‰è£…åœ¨ç®±ä½“å†…éƒ¨ã€‚</p><p>åˆæ¬¡è®¾è®¡æ—¶ï¼Œç”µæœºä¸é½¿è½®é—´çš„ä¼ åŠ¨é›¶ä»¶å¤ªé•¿ï¼Œä¸ºå¢åŠ ç¨³å®šæ€§åº”ç¼©çŸ­ã€‚å¹¶ä¸”å‘ç°ä¸¤é½¿æ¡é—´è·è¿‡çŸ­å¯¼è‡´æ— æ³•ä¸é¿éšœæœºæ„é…åˆï¼Œæ•…å¢åŠ äº†è½´çš„é•¿åº¦ã€‚</p><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f2dd8c65-fdbd-46e6-9239-adacf08158cc/11111.mp4">11111.mp4</a></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dee970b7-866d-40db-a923-d3c52a5152a4/Untitled.png" alt="Untitled"></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/90750bfa-c6ef-434f-a990-4805fd6bc69f/Untitled.png" alt="Untitled"></p><h3 id="4-3-é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ-1"><a href="#4-3-é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ-1" class="headerlink" title="4.3 é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ"></a>4.3 é½¿è½®é½¿æ¡ä¼ åŠ¨å¹³è¡¡æœºæ„ä¸è¡Œèµ°æœºæ„é…åˆ</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/77deec18-cb66-4b2a-b2a9-98565c3c9aba/Untitled.png" alt="Untitled"></p><hr><h1 id="äº”ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ-1"><a href="#äº”ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ-1" class="headerlink" title="äº”ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ"></a>äº”<strong>ã€</strong>å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡æ–¹æ¡ˆ</h1><h2 id="5-1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ-1"><a href="#5-1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ-1" class="headerlink" title="5.1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"></a>5.1æ€»ä½“è®¾è®¡æ–¹æ¡ˆ</h2><p>è¯¥ç»“æ„ç”±ä¸€å¤§ä¸¤å°å…±ä¸‰ä¸ªè½®å­ã€åº•åº§å’ŒTå½¢ç»“æ„ç»„æˆã€‚Tå½¢ç»“æ„æ’åœ¨åº•åº§çš„å¼€å­”ä¸­ï¼Œå­”ä¸­æœ‰å¼¹ç°§ï¼Œå°†Tå½¢ç»“æ„è¿åŒä¸¤ä¸ªå°è½®å‘ä¸Šæ¨ï¼Œä¸å¤§è½®ä¸€èµ·å¤¹ç´§é«˜å‹çº¿ï¼Œåœ¨åº•åº§èƒŒé¢æœ‰ä¸ä¸…å½¢ç»“æ„å›ºè¿çš„é½¿æ¡ï¼Œé€šè¿‡é½¿è½®è½¬åŠ¨å¯ä»¥å°†Tå‹ç»“æ„ä¸‹å‹ï¼Œä»è€Œæ¾å¼€é«˜å‹çº¿ã€‚è€ƒè™‘çš„é«˜å‹çº¿ä¸åœ°é¢å¯èƒ½å¹¶ä¸æ°´å¹³ï¼Œå°†Tå½¢ç»“æ„è®¾è®¡ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œä¸­é—´æ’å…¥ä¸€æ ¹è½´ï¼Œä½¿Tå½¢ç»“æ„çš„ä¸ŠåŠéƒ¨åˆ†å¯ä»¥è¿›è¡Œé¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆæ–¹å‘30åº¦çš„è½¬åŠ¨ï¼Œä»è€Œä½¿ä¸‰ä¸ªè½®å­ä¸é«˜å‹çº¿è´´åˆæ›´ç´§å¯†ã€‚åŒæ—¶ï¼Œåœ¨åº•åº§ä¸Šæ–¹å¼€æ§½ï¼Œä½¿å¤§è½®å¯ä»¥å‘ä¸ŠæŠ¬å‡å’Œç»•å¹³è¡Œäºé«˜å‹çº¿çš„è½´è½¬åŠ¨ã€‚å¤§è½®ä¸ºä¸»åŠ¨è½®ï¼Œç”±å¤§è½®åæ–¹ç”µæœºé©±åŠ¨ï¼Œä»è€Œå®ç°æœºå™¨äººåœ¨é«˜å‹çº¿ä¸Šçš„è¡Œè¿›ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/06886a3a-7b69-49d0-9adb-c9271970956d/Untitled.png" alt="Untitled"></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/286c34ef-3541-4658-99bf-463aef33b237/Untitled.png" alt="Untitled"></p><h2 id="5-2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾-1"><a href="#5-2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾-1" class="headerlink" title="5.2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾"></a>5.2å¤¹çˆªæœºæ„çˆ†ç‚¸å›¾</h2><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/18b9354e-5c90-42b4-a04d-3ef3d56f1cc3/Untitled.png" alt="Untitled"></p><h2 id="5-3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ-1"><a href="#5-3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ-1" class="headerlink" title="5.3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ"></a>5.3å¤¹çˆªæœºæ„åº”åŠ›åˆ†æ</h2><p>å¯¹Tå½¢ç»“æ„ä¸­é—´è½¬è½´è¿›è¡Œåº”åŠ›åˆ†æ</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6adca293-456f-423f-ad65-ccab14733087/Untitled.png" alt="Untitled"></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5c652dd2-ab1e-4321-9b23-739cb419df3e/Untitled.png" alt="Untitled"></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e2e69567-66d6-488d-9462-b2e299c57f80/Untitled.png" alt="Untitled"></p><hr><h1 id="å…­ã€è„±çº¿æ§åˆ¶æœºæ„ç»¼åˆè®¾è®¡"><a href="#å…­ã€è„±çº¿æ§åˆ¶æœºæ„ç»¼åˆè®¾è®¡" class="headerlink" title="å…­ã€è„±çº¿æ§åˆ¶æœºæ„ç»¼åˆè®¾è®¡"></a><strong>å…­ã€è„±çº¿æ§åˆ¶æœºæ„ç»¼åˆè®¾è®¡</strong></h1><h2 id="6-1-æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"><a href="#6-1-æ€»ä½“è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="6.1 æ€»ä½“è®¾è®¡æ–¹æ¡ˆ"></a>6.1 æ€»ä½“è®¾è®¡æ–¹æ¡ˆ</h2><p>ä¸ºå®ç°é‡åˆ°éšœç¢æ—¶ï¼Œå¤¹æŒæœºæ„èƒ½å¤Ÿä»çº¿ä¸Šè„±ç¦»ï¼Œåˆ†åˆ«è®¾è®¡äº†å‡¸è½®é½¿è½®é½¿æ¡æœºæ„æ§åˆ¶å¤§è½®è¿åŠ¨ã€ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„æ§åˆ¶å°è½®è¿åŠ¨ä»¥åŠä¸¤å¥—é½¿è½®ç³»æ•´åˆå¤§è½®å°è½®åŒæ­¥è¿åŠ¨ã€‚</p><h2 id="6-2-å‡¸è½®é½¿è½®é½¿æ¡æœºæ„"><a href="#6-2-å‡¸è½®é½¿è½®é½¿æ¡æœºæ„" class="headerlink" title="6.2 å‡¸è½®é½¿è½®é½¿æ¡æœºæ„"></a>6.2 å‡¸è½®é½¿è½®é½¿æ¡æœºæ„</h2><p>é‡åˆ°éšœç¢æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿å¤¹æŒè£…ç½®çš„å¤§è½®è„±ç¦»é«˜å‹çº¿ï¼Œè‹¥ä»…æŠ¬å‡å¤§è½®ï¼Œåœ¨é…åˆè¿æ†æœºæ„å‘ä¸‹è¿åŠ¨æ—¶å°†è¢«é«˜å‹çº¿é˜»æŒ¡ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©æ—‹è½¬å¤§è½®ï¼Œåˆå› ä¸ºå¤§è½®ç»“æ„é—®é¢˜ï¼Œç›´æ¥æ—‹è½¬ä¼šä¸é«˜å‹çº¿å†²çªï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©è®©å¤§è½®å…ˆæŠ¬å‡ä¸€éƒ¨åˆ†ï¼Œå†è¿›è¡Œæ—‹è½¬ã€‚ä¸ºäº†å°½é‡å‡å°‘ç”µæ§çš„ä½¿ç”¨ï¼Œå®ç°ä»…ç”¨ä¸€ä¸ªåŸåŠ¨ä»¶æ§åˆ¶å®ç°è¯¥è¿åŠ¨ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªå‡¸è½®ä¸é½¿è½®é½¿æ¡çš„é…åˆæœºæ„ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1a50a135-a2fb-4936-baa7-fdea944a991f/Untitled.png" alt="Untitled"></p><p>å…¶è¿åŠ¨åˆ†ä¸ºä¸¤éƒ¨åˆ†å®Œæˆï¼š</p><h3 id="ç¬¬ä¸€é˜¶æ®µï¼šæŠ¬å‡é˜¶æ®µ"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šæŠ¬å‡é˜¶æ®µ" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šæŠ¬å‡é˜¶æ®µ"></a>ç¬¬ä¸€é˜¶æ®µï¼šæŠ¬å‡é˜¶æ®µ</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6267aeb2-f80a-4919-bb2a-f586056bb940/Untitled.png" alt="Untitled"></p><h3 id="ç¬¬äºŒé˜¶æ®µï¼šæ—‹è½¬é˜¶æ®µ"><a href="#ç¬¬äºŒé˜¶æ®µï¼šæ—‹è½¬é˜¶æ®µ" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šæ—‹è½¬é˜¶æ®µ"></a>ç¬¬äºŒé˜¶æ®µï¼šæ—‹è½¬é˜¶æ®µ</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/65cf00e0-056c-4e62-b2a6-5048ad4e9c0d/Untitled.png" alt="Untitled"></p><h2 id="6-3-ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„"><a href="#6-3-ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„" class="headerlink" title="6.3 ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„"></a>6.3 ä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„</h2><p>ä¸ºäº†ä½¿å¤¹æŒæœºæ„ä¸­å°è½®è¡Œèµ°æ—¶èƒ½å¤Ÿé€šè¿‡å¼¹ç°§æ§åˆ¶å¤¹ç´§é«˜å‹çº¿ï¼Œåœ¨é‡åˆ°éšœç¢æ—¶èƒ½å¤Ÿç”±é½¿è½®ç³»æ§åˆ¶å‘ä¸‹æ¾å¼€é«˜å‹çº¿ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªä¸å®Œå…¨é½¿è½®é½¿æ¡æœºæ„ã€‚</p><h3 id="1ã€è¡Œèµ°çŠ¶æ€"><a href="#1ã€è¡Œèµ°çŠ¶æ€" class="headerlink" title="1ã€è¡Œèµ°çŠ¶æ€"></a>1ã€è¡Œèµ°çŠ¶æ€</h3><p>é½¿è½®ä¸é½¿æ¡æœªå•®åˆï¼Œå°è½®ç”±å¼¹ç°§æ§åˆ¶ä¸çº¿å¤¹ç´§ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/969a67f2-30fc-48d9-a6ce-b5a237ffb20f/Untitled.png" alt="Untitled"></p><h3 id="2ã€è„±çº¿çŠ¶æ€"><a href="#2ã€è„±çº¿çŠ¶æ€" class="headerlink" title="2ã€è„±çº¿çŠ¶æ€"></a>2ã€è„±çº¿çŠ¶æ€</h3><p>é‡åˆ°éšœç¢æ—¶ï¼Œé½¿è½®ä¸é½¿æ¡å•®åˆï¼Œå°è½®ç”±é½¿è½®ç³»æ§åˆ¶å‘ä¸‹è¿åŠ¨æ¾å¼€çº¿è·¯ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c3df8c31-d02c-424b-adb2-baac1a575661/Untitled.png" alt="Untitled"></p><h2 id="6-4-é½¿è½®ç³»æœºæ„"><a href="#6-4-é½¿è½®ç³»æœºæ„" class="headerlink" title="6.4 é½¿è½®ç³»æœºæ„"></a>6.4 é½¿è½®ç³»æœºæ„</h2><h3 id="1ã€è¿æ¥å‡¸è½®æœºæ„éƒ¨åˆ†"><a href="#1ã€è¿æ¥å‡¸è½®æœºæ„éƒ¨åˆ†" class="headerlink" title="1ã€è¿æ¥å‡¸è½®æœºæ„éƒ¨åˆ†"></a>1ã€è¿æ¥å‡¸è½®æœºæ„éƒ¨åˆ†</h3><p>æ ¹æ®å‡¸è½®æœºæ„å°ºå¯¸ï¼Œä¸¤å‡¸è½®è½¬è½´ä¹‹é—´æ°´å¹³è·ç¦»x=50mmï¼Œç«–ç›´è·ç¦»å¯åœ¨ä¸€å®šèŒƒå›´å†…è‡ªä¸»è®¾è®¡ï¼Œä¸ºè®¡ç®—æ–¹ä¾¿å®šä¸ºy=270mmï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªä¼ åŠ¨æ¯”ä¸º1ï¼š1çš„é½¿è½®ç³»ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8fb7d0a8-d7ba-4b34-a24d-faac4e3e8546/Untitled.png" alt="Untitled"></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5c2bb20e-390d-4d70-8889-ba68a5c3a8f5/Untitled.png" alt="Untitled"></p><h3 id="2ã€è¿æ¥ä¸å®Œå…¨é½¿è½®æœºæ„éƒ¨åˆ†"><a href="#2ã€è¿æ¥ä¸å®Œå…¨é½¿è½®æœºæ„éƒ¨åˆ†" class="headerlink" title="2ã€è¿æ¥ä¸å®Œå…¨é½¿è½®æœºæ„éƒ¨åˆ†"></a>2ã€è¿æ¥ä¸å®Œå…¨é½¿è½®æœºæ„éƒ¨åˆ†</h3><p>æ ¹æ®å¤¹æŒè£…ç½®å’Œå‡¸è½®è£…ç½®å°ºå¯¸ï¼Œå¯ä»¥å¾—å‡ºé½¿æ¡åˆ†åº¦çº¿ä¸å‡¸è½®æœºæ„ä¸­çš„é½¿è½®ä¸­å¿ƒæ°´å¹³è·ç¦»x=45mmï¼Œç«–ç›´é«˜åº¦å¯åœ¨ä¸€å®šèŒƒå›´å†…è‡ªä¸»è®¾è®¡ï¼Œæˆ‘ä»¬é€‰å–ä¸€ä¸ªè¾ƒä¸ºåˆé€‚çš„è·ç¦»ï¼Œä½¿å¾—ä¸å®Œå…¨é½¿è½®ä½äºé½¿æ¡æ§½é è¿‘ä¸­ç‚¹ä½ç½®ï¼Œå–å›¾1ä¸­çš„è½®5åˆ°ä¸å®Œå…¨é½¿è½®ä¸­å¿ƒç«–ç›´è·ç¦»y=445mmã€‚åœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªä¼ åŠ¨æ¯”ä¸º3ï¼š2çš„é½¿è½®ç³»ã€‚</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/288d6cca-a7b3-4e9f-8977-46359287acf2/Untitled.png" alt="Untitled"></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/eaf49a03-2ef3-4b7d-bc76-b4fa6141670c/Untitled.png" alt="Untitled"></p><h2 id="6-5-æ€»ç»“"><a href="#6-5-æ€»ç»“" class="headerlink" title="6.5 æ€»ç»“"></a>6.5 æ€»ç»“</h2><p>æœ€ç»ˆå°†ä¸‰ä¸ªæœºæ„ä¸å¤¹æŒè£…ç½®å®‰è£…é…åˆå¥½ä¹‹åæ•ˆæœå¦‚å›¾</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4dfef081-ed01-4533-8e64-af92ebb556c5/Untitled.png" alt="Untitled"></p><p>å°†å„é›¶ä»¶ç»„è£…é…åˆå¥½ä¹‹åï¼Œè½¬åŠ¨ä¸»åŠ¨ä»¶é½¿è½®2ï¼Œå¤§è½®å…ˆæŠ¬å‡å†æ—‹è½¬ï¼Œå°è½®åŒæ—¶å‘ä¸‹æ¾å¼€ï¼Œä¸é¢„æœŸæ•ˆæœç›¸ç¬¦ã€‚</p><h1 id="ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³-1"><a href="#ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³-1" class="headerlink" title="ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³"></a>ä¸ƒã€æ”¶è·ä¸æ„Ÿæƒ³</h1><h3 id="å´ç£Šï¼š"><a href="#å´ç£Šï¼š" class="headerlink" title="å´ç£Šï¼š"></a>å´ç£Šï¼š</h3><p>åœ¨æœ¬æ¬¡è®¾è®¡ä¸­ï¼Œæˆ‘æ”¶è·äº†å¾ˆå¤šã€‚æˆ‘è®¾è®¡çš„æœºæ„ä¸»è¦ç”¨åˆ°äº†è¿æ†æœºæ„ï¼Œèƒ½å°†åœ¨è¯¾å ‚ä¸Šå­¦åˆ°çš„çŸ¥è¯†æŠ•å…¥åˆ°å®é™…åº”ç”¨ä¸­ï¼Œä¹Ÿè®©æˆ‘å¯¹è¯¾å ‚ä¸Šçš„çŸ¥è¯†æœ‰äº†æ›´æ·±åˆ»çš„ç†è§£ä¸æ„Ÿæ‚Ÿã€‚åœ¨è®¾è®¡æœºæ„çš„è¿‡ç¨‹ä¸­ï¼ŒçœŸåˆ‡çš„æ„Ÿå—åˆ°äº†æœºæ¢°å­¦ç§‘ä¸­ä¹¦æœ¬å†…å®¹ä¸å®é™…ç”Ÿæ´»çš„å¯†åˆ‡è”ç³»ï¼Œä¹Ÿæ„Ÿå—åˆ°äº†â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œâ€çš„é“ç†ã€‚ä»åœ¨è„‘æµ·ä¸­æµ®ç°å‡ºä¸€ä¸ªæœºæ„çš„å¤§è‡´è®¾è®¡æ–¹æ¡ˆï¼Œåˆ°å°†å…¶å®é™…å»ºæ¨¡å‡ºæ¥ï¼Œå…¶ä¸­æ¶‰åŠåˆ°çš„å…·ä½“å°ºå¯¸ï¼Œé›¶ä»¶ä¹‹é—´çš„é…åˆå…³ç³»ï¼Œå®é™…æ•ˆæœä¸é¢„æœŸæ•ˆæœä¹‹é—´çš„å·®è·ï¼Œåº”åŠ›åˆ†æï¼Œè¿åŠ¨åˆ†æç­‰ç­‰ç­‰ç­‰ã€‚æœ‰æ—¶å€™å°±æ˜¯ç®€å•çš„åšä¸€ä¸ªåŠ¨ç”»ï¼Œä¹Ÿå¯èƒ½ä¼šé‡åˆ°ä¸€äº›æ„å¤–ï¼Œè€½è¯¯æ‰å¾ˆå¤šæ—¶é—´ã€‚ç„¶è€Œè¿™ä»…ä»…æ˜¯ä»¿çœŸï¼Œæƒ³è¦å®é™…åŠ å·¥å‡ºæ¥ï¼ŒæŠ•å…¥åˆ°ç”Ÿæ´»ç”Ÿäº§åº”ç”¨ä¸­å»ï¼Œè‚¯å®šæ›´åŠ çš„å›°éš¾ï¼Œå¯¹æœºæ¢°å·¥ä½œè€…ä»¬çš„æ•¬æ„æ²¹ç„¶è€Œç”Ÿã€‚</p><p>è¿˜æœ‰å°±æ˜¯å›¢é˜Ÿåˆä½œçš„é‡è¦æ€§ï¼Œä¸€ä¸ªå¤æ‚çš„æœºå™¨äººï¼Œå°†å…¶åˆ†è§£ä¸ºä¸€ä¸ªä¸ªéƒ¨åˆ†ä¹‹åå°±ä¼šè½»æ¾ä¸å°‘ã€‚åœ¨å­¦ç§‘äº¤å‰è¶‹åŠ¿æ„ˆåŠ æ˜æ˜¾çš„å½“ä¸‹ï¼Œæƒ³è¦ä¸€ä¸ªäººå•æ‰“ç‹¬æ–—æ˜¯å¾ˆå›°éš¾çš„ã€‚å½“ç„¶å›¢é˜Ÿä¹‹é—´çš„é…åˆä¹Ÿååˆ†é‡è¦ï¼Œå„ä¸ªéƒ¨åˆ†ä¹‹é—´æœ€åçš„ç›¸äº’é…åˆéœ€è¦é˜Ÿå‘˜ä¹‹é—´ç›¸äº’åè°ƒã€‚</p><p>æ€»ä¹‹ï¼Œæœ¬æ¬¡è®¾è®¡è®©æˆ‘å—ç›ŠåŒªæµ…ï¼Œä¸ä»…æé«˜äº†æˆ‘çš„æœºæ¢°è®¾è®¡æ°´å¹³å’Œå›¢é˜Ÿåä½œèƒ½åŠ›ï¼Œä¹Ÿè®©æˆ‘æ›´åŠ æ·±å…¥åœ°äº†è§£äº†æœºå™¨äººè®¾è®¡çš„è¿‡ç¨‹å’Œè¦ç‚¹ï¼Œå¯¹æˆ‘çš„æœªæ¥å­¦ä¹ å’Œå·¥ä½œéƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚æˆ‘ç›¸ä¿¡ï¼Œåœ¨æœªæ¥çš„å­¦ä¹ å’Œå·¥ä½œä¸­ï¼Œæˆ‘ä¼šç»§ç»­åŠªåŠ›ï¼Œä¸æ–­æé«˜è‡ªå·±çš„èƒ½åŠ›å’Œæ°´å¹³ï¼Œä¸ºå®ç°æ›´å¥½çš„è®¾è®¡å’Œåˆ›æ–°åšå‡ºæ›´å¤§çš„è´¡çŒ®ã€‚</p><h3 id="å´”åº†åšï¼š"><a href="#å´”åº†åšï¼š" class="headerlink" title="å´”åº†åšï¼š"></a>å´”åº†åšï¼š</h3><p>æœ¬æ¬¡æˆ‘ä»¬å°ç»„çš„è®¾è®¡ä¸­æˆ‘çš„ä»»åŠ¡æ˜¯è´Ÿè´£è®¾è®¡è„±çº¿æ§åˆ¶æœºæ„ï¼ŒæŠ•å…¥äº†å¾ˆå¤šä¹Ÿæ”¶è·äº†å¾ˆå¤šã€‚</p><p>é¦–å…ˆæ˜¯è¿ç”¨åˆ°äº†è®¸å¤šè¯¾å ‚ä¸Šçš„å­¦ä¹ åˆ°çš„ç†è®ºçŸ¥è¯†ï¼Œèƒ½å¤Ÿå°†è¯¾å ‚ä¸Šå­¦ä¹ çš„å‡¸è½®é½¿è½®ç³»ç­‰çŸ¥è¯†è½¬åŒ–ä¸ºå®è·µï¼Œå¯¹äºæˆ‘æ›´æ·±åˆ»åœ°ç†è§£è¯¾å ‚æ‰€å­¦å¤§æœ‰è£¨ç›Šï¼Œåœ¨å®é™…çš„è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ç†è®ºçš„è®¡ç®—ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šç°å®å› ç´ éœ€è¦è€ƒé‡ï¼Œæ¯”å¦‚ç›¸é‚»é½¿è½®ä¹‹é—´é½¿æ•°æ¯”ä¸èƒ½è¿‡å¤§ã€å‡¸è½®è½¬åŠ¨æ—¶å°½é‡æ¶ˆé™¤å†²å‡»ç­‰ã€‚</p><p>å…¶æ¬¡ï¼Œæˆ‘å¯¹äºå»ºæ¨¡è½¯ä»¶çš„ä½¿ç”¨æ°´å¹³ä¹Ÿå¾—åˆ°äº†å¾ˆå¤§æå‡ï¼Œç°åœ¨å·²ç»èƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨å„ç§åŸºæœ¬é…åˆï¼Œè¿˜å­¦ä¼šäº†å‡¸è½®æ¨æ†é…åˆã€é½¿è½®å•®åˆã€é½¿è½®é½¿æ¡é…åˆç­‰æœºæ¢°é…åˆã€‚</p><p>æœ€åï¼Œå›¢é˜Ÿåä½œèƒ½åŠ›ä¹Ÿå¾—åˆ°äº†åŸ¹å…»ã€‚å› ä¸ºæ˜¯å°ç»„è®¾è®¡ï¼Œé¦–å…ˆå¯¹äºæ•´ä½“æ–¹æ¡ˆçš„è®¨è®ºéœ€è¦è¿›è¡Œå¤§é‡è®¨è®ºåå•†ï¼Œå…¶æ¬¡æ¯ä¸ªäººçš„ä»»åŠ¡ä¹Ÿä¸æ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ¿å—ï¼Œå„éƒ¨åˆ†ä¹‹é—´çš„å‚æ•°è¦åè°ƒå¥½ï¼Œæ‰èƒ½å®Œæˆæœ€åçš„åŒä¸€ç»„è£…ã€‚</p><h3 id="æ›¾å®‡èˆªï¼š"><a href="#æ›¾å®‡èˆªï¼š" class="headerlink" title="æ›¾å®‡èˆªï¼š"></a>æ›¾å®‡èˆªï¼š</h3><p>é€šè¿‡æœ¬æ¬¡è¯¾è®¾ï¼Œæˆ‘å­¦ä¹ åˆ°äº†å¦‚ä½•è¿ç”¨è¯¾æœ¬çŸ¥è¯†ï¼ŒåŠ æ·±äº†å¯¹å…¶çš„ç†è§£ï¼Œå¹¶ä¸”é˜…è¯»äº†å…³äºé«˜å‹çº¿å·¡çº¿æœºå™¨äººçš„è®ºæ–‡ï¼ŒæƒŠå¹äºå‰è¾ˆä»¬çš„æ„æ€ã€å¯¹æœ¬ç§‘çŸ¥è¯†çš„ç»¼åˆè¿ç”¨ä»¥åŠå¼ºå¤§çš„å®è·µèƒ½åŠ›ã€‚æœ¬æ¬¡è¯¾è®¾æˆ‘ä»¬å°†è¯¥æœºå™¨äººè®¾è®¡åˆ†ä¸ºäº†å››ä¸ªæœºæ„ï¼ŒåŒ…æ‹¬é½¿è½®é½¿æ¡ä¼ åŠ¨ã€å¤¹çˆªæœºæ„å…·ä½“è®¾è®¡ã€è„±çº¿æ§åˆ¶æœºæ„ç»¼åˆè®¾è®¡ç­‰æ–¹é¢ã€‚æœ¬æ¬¡è®¾è®¡ä¸ä»…æé«˜äº†ä¸ªäººçš„å»ºæ¨¡æŠ€èƒ½ï¼Œè¿˜åŸ¹å…»äº†å›¢é˜Ÿåä½œèƒ½åŠ›ã€‚</p><p>æˆ‘ä»¬å°ç»„çš„è®¾è®¡ä¸­æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä»»åŠ¡ï¼Œæˆ‘ä»ä¸­å­¦åˆ°äº†è®¸å¤šè¯¾æœ¬çŸ¥è¯†çš„å®è·µåº”ç”¨å’Œå»ºæ¨¡æŠ€å·§ã€‚é€šè¿‡å›¢é˜Ÿè®¨è®ºå’Œåä½œï¼Œæˆ‘ä»¬åè°ƒäº†å„éƒ¨åˆ†ä¹‹é—´çš„å‚æ•°ï¼Œæœ€ç»ˆå®Œæˆäº†æœºå™¨äººçš„åŒä¸€ç»„è£…ã€‚é€šè¿‡æœ¬æ¬¡è¯¾è®¾ï¼Œæˆ‘å­¦ä¹ åˆ°äº†å¦‚ä½•è¿ç”¨ç†è®ºçŸ¥è¯†è§£å†³å®é™…é—®é¢˜ï¼Œå¹¶ä¸”æ·±å…¥äº†è§£äº†é«˜å‹çº¿å·¡æ£€æœºå™¨äººçš„æ„é€ å’Œå·¥ä½œåŸç†ã€‚åŒæ—¶ï¼Œæˆ‘ä¹Ÿåœ¨å›¢é˜Ÿåä½œå’Œå»ºæ¨¡æŠ€èƒ½æ–¹é¢æœ‰äº†å¾ˆå¤§çš„æå‡ã€‚æœ¬æ¬¡è¯¾è®¾è®©æˆ‘æ›´åŠ ç†Ÿç»ƒåœ°æŒæ¡äº†æœºæ¢°è®¾è®¡è½¯ä»¶çš„ä½¿ç”¨ã€‚</p><h2 id="é™ˆå˜‰æµ©ï¼š"><a href="#é™ˆå˜‰æµ©ï¼š" class="headerlink" title="é™ˆå˜‰æµ©ï¼š"></a>é™ˆå˜‰æµ©ï¼š</h2><p>é€šè¿‡æœ¬æ¬¡åˆ›æ–°è®¾è®¡ï¼Œæˆ‘è®¤è¯†åˆ°äº†å®è·µçš„é‡è¦æ€§ã€‚åŸæœ¬æˆ‘è®¤ä¸ºåªè¦ç†Ÿç»ƒæŒæ¡äº†è¯¾æœ¬ä¸Šçš„çŸ¥è¯†ç‚¹ï¼Œå°±èƒ½è¾ƒä¸ºè½»æ¾åœ°å®Œæˆè¿™é¡¹è®¾è®¡ã€‚ä½†å½“æˆ‘çœŸæ­£å¼€å§‹åŠ¨æ‰‹è®¾è®¡æ—¶ï¼Œä¸€ä¸ªåˆä¸€ä¸ªé—®é¢˜æ¥è¸µè€Œæ¥ã€‚é¦–å…ˆå°±æ˜¯è‡ªå·±è®¾è®¡çš„ç»“æ„å°ºå¯¸ä¸åˆç†ï¼Œéš¾ä»¥å’Œé˜Ÿå‹çš„ç»“æ„ç»„è£…åœ¨ä¸€èµ·ã€‚è¿˜æœ‰è‡ªå·±å¯¹å»ºæ¨¡è½¯ä»¶ä¸å¤ªç†Ÿæ‚‰ï¼Œæ€»æ˜¯å‡ºç°å„ç§é—®é¢˜ã€‚ä¹¦ä¸Šçš„çŸ¥è¯†åªæ˜¯æˆ‘ä»¬è¿›è¡Œè®¾è®¡çš„åŸºç¡€ï¼Œè¦æƒ³çœŸæ­£è®¾è®¡å‡ºèƒ½å®ç°æŸäº›åŠŸèƒ½å¹¶ä¸”æœ‰æ–°æ„çš„æˆå“ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ä¸€æ¬¡ä¸€æ¬¡çš„å®è·µä¸­ç§¯ç´¯ç»éªŒã€‚é€šè¿‡æœ¬æ¬¡åˆ›æ–°è®¾è®¡ï¼Œè®©æˆ‘å¯¹æœºæ¢°è®¾è®¡æœ‰äº†æ›´æ·±å…¥çš„äº†è§£ï¼Œå¯¹æœºæ¢°å·¥ä½œè€…çš„æ•¬æ„æ²¹ç„¶è€Œç”Ÿã€‚</p><p>è¿™æ¬¡è®¾è®¡ä¹Ÿè®©æˆ‘ä½“ä¼šåˆ°äº†å›¢é˜Ÿåˆä½œçš„é‡è¦æ€§ï¼Œæœ‰äº†å›¢é˜Ÿï¼Œæˆ‘ä»¬å°±èƒ½å°†å¤æ‚çš„è®¾è®¡åˆ†è§£ä¸ºä¸€ä¸ªä¸ªç®€å•çš„ç‰ˆå—ï¼Œæ¯ä¸ªäººè´Ÿè´£ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·å¤§å¤§é™ä½äº†è®¾è®¡éš¾åº¦ã€‚å½“ç„¶ï¼Œåœ¨å›¢é˜Ÿåˆä½œä¸­ä¹Ÿè¦å¤šè¿›è¡Œæ²Ÿé€šäº¤æµï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿æœ€åæ¯ä¸ªäººè´Ÿè´£çš„ç‰ˆå—èƒ½é¡ºåˆ©æ‹¼æ¥åˆ°ä¸€èµ·ã€‚</p><p>é€šè¿‡è¿™æ¬¡è¯¾è®¾ï¼ŒåŠ æ·±äº†æˆ‘å¯¹ä¹¦æœ¬ä¸ŠçŸ¥è¯†çš„ç†è§£ï¼Œæå‡äº†æˆ‘å»ºæ¨¡æ°´å¹³ï¼Œä¹ŸåŸ¹å…»äº†æˆ‘å›¢é˜Ÿåˆä½œçš„æ„è¯†å’Œèƒ½åŠ›ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æœºæ¢°è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Balancebot&#39;s LQR controller &amp; Rhomberg observer</title>
      <link href="/2023/04/04/Balancebot-s-LQR-controller-Rhomberg-observer/"/>
      <url>/2023/04/04/Balancebot-s-LQR-controller-Rhomberg-observer/</url>
      
        <content type="html"><![CDATA[<h1 id="å¹³è¡¡å°è½¦çš„LQRæ§åˆ¶å™¨ä¸Rhombergè§‚æµ‹å™¨"><a href="#å¹³è¡¡å°è½¦çš„LQRæ§åˆ¶å™¨ä¸Rhombergè§‚æµ‹å™¨" class="headerlink" title="å¹³è¡¡å°è½¦çš„LQRæ§åˆ¶å™¨ä¸Rhombergè§‚æµ‹å™¨"></a>å¹³è¡¡å°è½¦çš„LQRæ§åˆ¶å™¨ä¸Rhombergè§‚æµ‹å™¨</h1><h2 id="åŠ¨åŠ›å­¦åˆ†æ"><a href="#åŠ¨åŠ›å­¦åˆ†æ" class="headerlink" title="åŠ¨åŠ›å­¦åˆ†æ"></a>åŠ¨åŠ›å­¦åˆ†æ</h2><p><img src="https://s2.loli.net/2023/04/04/KMY2DAwlgVj4FsW.jpg" alt="åŠ¨åŠ›å­¦åˆ†æ.jpg"></p><h2 id="æ§åˆ¶å™¨è®¾è®¡"><a href="#æ§åˆ¶å™¨è®¾è®¡" class="headerlink" title="æ§åˆ¶å™¨è®¾è®¡"></a>æ§åˆ¶å™¨è®¾è®¡</h2><h3 id="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"><a href="#çŠ¶æ€ç©ºé—´æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"></a>çŠ¶æ€ç©ºé—´æ–¹ç¨‹</h3><p>ä»¤$\xi = [\theta,\dot{\theta},x,\dot{x}]$ï¼›ä¸”ä»¤$\theta\to 0; \dot{\theta} \to 0$ï¼Œç›¸å½“äºåœ¨0å¤„è¿›è¡Œæ³°å‹’å±•å¼€</p><p>åŒ–ç®€å¾—åˆ°</p><script type="math/tex; mode=display">\dot{\xi} = \begin{bmatrix}0 & 1 & 0 & 0 \\\frac{M+m}{Ml}g & 0 & 0 & 0 \\0 & 0 & 0 & 1 \\-\frac{mg}{M} & 0 & 0 & 0\end{bmatrix}\xi+\begin{bmatrix}0 \\-\frac{1}{Ml} \\0 \\\frac{1}{M}\end{bmatrix}u</script><p>å–è¾“å‡ºæ°´å¹³åŠ› $u = -K_1X_1-K_2X_2-K_3X_3-K_4X_4$</p><h3 id="Simulinkä»¿çœŸ"><a href="#Simulinkä»¿çœŸ" class="headerlink" title="Simulinkä»¿çœŸ"></a>Simulinkä»¿çœŸ</h3><p>å–m=1kg, M=1kg, g=10m/s^2, l=1m</p><script type="math/tex; mode=display">Q=\begin{bmatrix}10&0&0&0 \\0&1&0&0 \\0&0&1&0 \\0&0&0&1\end{bmatrix},\quad R=0.1</script><p>å–ä»£ä»·å‡½æ•°æœ€å°å€¼ï¼Œå¾—åˆ°</p><script type="math/tex; mode=display">K = \begin{bmatrix}-70.7312  -18.9427   -3.1623   -6.4873\end{bmatrix}</script><p>ä½¿ç”¨Simulinkè¿›è¡Œä»¿çœŸï¼Œè®¾ç½®åˆå§‹Pithchè§’ä¸º5Â°</p><script type="math/tex; mode=display">\dot{x_1} = x_2 \\\dot{x_2} = 20x_1 - u \\\dot{x_3} = x_4 \\\dot{x_4} = -10x_1 + u \\u = -k_1x_1-k_2x_2-k_3x_3-k_4x_4</script><p><img src="https://s2.loli.net/2023/04/04/RuN3SLQ7ZcOwkei.png" alt="simulink-åªæœ‰æ§åˆ¶å™¨.png"></p><p>è¿è¡Œå¾—åˆ°ç»“æœ</p><p><img src="https://s2.loli.net/2023/04/04/tpNQh3zaRqJCAr2.png" alt="æ›²çº¿-controller only.png"></p><p><img src="https://s2.loli.net/2023/04/04/Q865WhwOrqkZfym.png" alt="æ›²çº¿.png"></p><h2 id="è§‚æµ‹å™¨è®¾è®¡"><a href="#è§‚æµ‹å™¨è®¾è®¡" class="headerlink" title="è§‚æµ‹å™¨è®¾è®¡"></a>è§‚æµ‹å™¨è®¾è®¡</h2><p>è§‚æµ‹å™¨è®¾è®¡çš„åˆæ­¥å­¦ä¹ å¯ä»¥å‚è€ƒä¸‹é¢è¿™ç¯‡ç¬”è®°</p><h3 id="ä¸è€ƒè™‘æœºæ¢°ä¸­å€¼"><a href="#ä¸è€ƒè™‘æœºæ¢°ä¸­å€¼" class="headerlink" title="ä¸è€ƒè™‘æœºæ¢°ä¸­å€¼"></a>ä¸è€ƒè™‘æœºæ¢°ä¸­å€¼</h3><h4 id="è§‚æµ‹å™¨æ–¹ç¨‹"><a href="#è§‚æµ‹å™¨æ–¹ç¨‹" class="headerlink" title="è§‚æµ‹å™¨æ–¹ç¨‹"></a>è§‚æµ‹å™¨æ–¹ç¨‹</h4><p>æ–¹ä¾¿èµ·è§ï¼ŒçŠ¶æ€å˜é‡æš‚æ—¶åªå– $X_1,X_2$ï¼Œå³ä¸º $\theta$ å’Œ $\dot{\theta}$ ï¼›</p><script type="math/tex; mode=display">\begin{bmatrix}\dot{X_1}\\\dot{X_2}\end{bmatrix} =\begin{bmatrix}0 & 1 \\ \frac{M+m}{Ml}g & 0\end{bmatrix}\begin{bmatrix}X_1 \\ X_2\end{bmatrix} +\begin{bmatrix}0 \\ -\frac{1}{Ml}\end{bmatrix} u</script><p>å–è¾“å‡º$y=\begin{bmatrix}1&amp;0\end{bmatrix}\begin{bmatrix}X_1\\X_2\end{bmatrix}$, åˆ™$C=\begin{bmatrix}1&amp;0\end{bmatrix}$</p><p><strong>å¯è§‚æµ‹æ€§æ£€æµ‹</strong></p><script type="math/tex; mode=display">O=\begin{bmatrix}C\\CA\end{bmatrix}=\begin{bmatrix}1&0 \\ 0&1\end{bmatrix}</script><p>æ»¡ç§©ï¼Œå¯è§‚æµ‹</p><p><strong>è§‚æµ‹æ–¹ç¨‹</strong></p><script type="math/tex; mode=display">\begin{bmatrix}\dot{\hat{X_1}} \\ \hat{\dot{X_2}} \end{bmatrix} =\begin{bmatrix}0 & 1 \\ \frac{M+m}{Ml}g & 0\end{bmatrix}\begin{bmatrix}\hat{X_1} \\ \hat{X_2}\end{bmatrix} +\begin{bmatrix}0 \\ -\frac{1}{Ml}\end{bmatrix} u + L(y - \hat{y})</script><p><strong>ç”±è§‚æµ‹å™¨å’Œæ§åˆ¶å™¨åˆ†ç¦»åŸç†</strong></p><p>ä»¤<strong>A-LC</strong>å’Œ<strong>A-BK</strong>çš„ç‰¹å¾å€¼å®éƒ¨åˆ†åˆ«å°äº<strong>0</strong>è®¡ç®—å‡º<strong>LçŸ©é˜µå’ŒKçŸ©é˜µ</strong>å³å¯</p><h4 id="Simulinkä»¿çœŸ-1"><a href="#Simulinkä»¿çœŸ-1" class="headerlink" title="Simulinkä»¿çœŸ"></a>Simulinkä»¿çœŸ</h4><p>ç›´æ¥ä»¤$(\lambda+1)^2=0$å¾—åˆ°LçŸ©é˜µå’ŒKçŸ©é˜µ</p><p><img src="https://s2.loli.net/2023/04/04/EjUtuBDpFL158Z3.png" alt="observer-without alpha.png"></p><p>â€‹    å·¦åŠéƒ¨åˆ†ä¸ºè§‚æµ‹å™¨ç³»ç»Ÿï¼Œå³åŠéƒ¨åˆ†ä¸ºç†æƒ³æƒ…å†µä¸‹çš„ç°å®ç‰©ç†ç³»ç»Ÿã€‚è§‚æµ‹å™¨èƒ½è·å¾—çš„æ•°æ®åªæœ‰è§’åº¦å€¼Î¸å³$X_1$ï¼Œç”±æ­¤ä¼°è®¡å‡º $\hat{X_1},\hat{X_2}$ï¼Œå¹¶ä¾æ®è¿™ä¸¤ä¸ªä¼°è®¡å€¼ç»™å‡ºæ§åˆ¶é‡$u$ï¼Œè¾“å…¥åˆ°ç‰©ç†ç³»ç»Ÿä¸­ã€‚</p><p>â€‹    å°†ç‰©ç†ç³»ç»Ÿä¸­çš„è§’åº¦åˆå§‹å€¼è®¾ä¸º<strong>5Â°</strong>ï¼Œå°†è§‚æµ‹å™¨ä¸­çš„è§’åº¦åˆå§‹å€¼è®¾ç½®ä¸º<strong>0Â°</strong>ï¼Œä»¿çœŸè¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://s2.loli.net/2023/04/04/m1oXUlVEHcb8vhB.png" alt="æ›²çº¿3.png"></p><p><img src="https://s2.loli.net/2023/04/04/AWwOPh9sFSRDgfN.png" alt="æ›²çº¿4.png"></p><p>æœ€åè§‚æµ‹å™¨æ”¶æ•›è‡³çœŸå®å€¼ï¼Œä½†æ˜¯ç”±äºåˆå§‹ä¿¡æ¯å·®çš„å­˜åœ¨ï¼Œå¯¼è‡´æ§åˆ¶æ•ˆæœå—åˆ°äº†ä¸€å®šçš„å½±å“ã€‚</p><h3 id="æœºæ¢°ä¸­å€¼çš„æ”¶æ•›"><a href="#æœºæ¢°ä¸­å€¼çš„æ”¶æ•›" class="headerlink" title="æœºæ¢°ä¸­å€¼çš„æ”¶æ•›"></a>æœºæ¢°ä¸­å€¼çš„æ”¶æ•›</h3><p>â€‹    å®é™…ä¸Šçš„æœºæ¢°ä¸­å€¼æ˜¯æ²¡æ³•ç²¾ç¡®æµ‹å¾—çš„ï¼Œå¹¶ä¸”ä¹Ÿæœ‰å¯èƒ½éšæ—¶é—´å˜åŒ–ï¼Œæ‰€ä»¥éœ€è¦è®¾è®¡è§‚æµ‹å™¨ä½¿ç³»ç»Ÿå¯ä»¥å¾—åˆ°çœŸå®çš„æœºæ¢°ä¸­å€¼ã€‚</p><h4 id="ä¸å¯»æ‰¾æœºæ¢°ä¸­å€¼çš„æ•ˆæœ"><a href="#ä¸å¯»æ‰¾æœºæ¢°ä¸­å€¼çš„æ•ˆæœ" class="headerlink" title="ä¸å¯»æ‰¾æœºæ¢°ä¸­å€¼çš„æ•ˆæœ"></a>ä¸å¯»æ‰¾æœºæ¢°ä¸­å€¼çš„æ•ˆæœ</h4><p><img src="https://s2.loli.net/2023/04/04/RhmLETK2oQAtsOZ.png" alt="ä¸å¯»æ‰¾alpha.png"></p><p><img src="https://s2.loli.net/2023/04/04/f6Mn42WpNSoCx8r.png" alt="æ›²çº¿5.png"></p><p>â€‹    åœ¨ä¹‹å‰çš„è§‚æµ‹å™¨ç³»ç»Ÿä¸­ï¼Œç›´æ¥æ·»åŠ  $\alpha$ åæ§åˆ¶ç³»ç»Ÿå¤±æ§ï¼Œè€Œä¸”è§‚æµ‹å™¨ä¹Ÿä¸å†æ”¶æ•›ã€‚</p><p>â€‹    å¦‚æœæ˜¯ä¹‹å‰çš„æ²¡æœ‰è§‚æµ‹å™¨çš„æ¨¡å‹çš„è¯ï¼Œå¤§è‡´æ˜¯è¿™æ ·çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚å¹³è¡¡ç‚¹åœ¨3Â°ï¼Œå½“è½¦å­ä¸º0Â°æ—¶è½¦å­ä¼šå‘åå€¾ï¼Œè§’åº¦å€¼å‡å°ï¼›æ­¤æ—¶ä¸ºäº†ä½¿è½¦èº«å›åˆ°0Â°ï¼Œè½®å­ä¹Ÿå‘åç§»åŠ¨ï¼Œæœ€åè§’åº¦ä¸å˜ï¼Œè¶‹äºåŒ€åŠ é€Ÿç§»åŠ¨ã€‚</p><p><img src="https://s2.loli.net/2023/04/04/vXYmMF5ySwtxTjo.png" alt="simulink.png"></p><h4 id="è§‚æµ‹å™¨è®¾è®¡-1"><a href="#è§‚æµ‹å™¨è®¾è®¡-1" class="headerlink" title="è§‚æµ‹å™¨è®¾è®¡"></a>è§‚æµ‹å™¨è®¾è®¡</h4><p>å°†çœŸå®çš„æœºæ¢°ä¸­å€¼è®¾ä¸º$\alpha$ï¼Œåˆ™$\theta$åº”å½“å˜ä¸º$\theta - \alpha$ï¼Œå¾—åˆ°æ–°çš„çŠ¶æ€ç©ºé—´æ–¹ç¨‹</p><script type="math/tex; mode=display">\begin{bmatrix}\dot{X_1}\\\dot{X_2}\end{bmatrix} =\begin{bmatrix}0 & 1 \\ \frac{M+m}{Ml}g & 0\end{bmatrix}\begin{bmatrix}X_1 \\ X_2\end{bmatrix} +\begin{bmatrix}0 \\ -\frac{1}{Ml}\end{bmatrix} u + \begin{bmatrix}0 \\ -\frac{M+m}{Ml}g\end{bmatrix}\alpha</script><p>çŠ¶æ€ç©ºé—´å–$\hat{X} = \begin{bmatrix}\hat{\theta} &amp; \dot{\hat{\theta}} &amp; \hat{\alpha}\end{bmatrix}^T$ï¼Œè¾“å‡º $y = \begin{bmatrix}1&amp;0&amp;0\end{bmatrix}\begin{bmatrix}\theta \\ \dot{\theta} \\ \alpha \end{bmatrix}$</p><p>å¯è§‚æµ‹æ€§æ£€æµ‹å¾—å¯è§‚æµ‹</p><p><strong>è§‚æµ‹å™¨æ–¹ç¨‹</strong></p><script type="math/tex; mode=display">\begin{bmatrix}\dot{\hat{X_1}} \\ \dot{\hat{X_2}} \\ \dot{\hat{X_3}}\end{bmatrix} =\begin{bmatrix}0 & 1 & 0 \\ \frac{M+m}{Ml}g & 0 & -\frac{M+m}{Ml}g \\ 0 & 0 & 0\end{bmatrix}\begin{bmatrix}\hat{X_1} \\ \hat{X_2} \\ \hat{X_3}\end{bmatrix} +\begin{bmatrix}0 \\ -\frac{1}{Ml} \\ 0\end{bmatrix} u + \begin{bmatrix}l_1 \\ l_2 \\ l_3\end{bmatrix}(y - \hat{y})</script><p>åŒæ ·å¯ä»¤<strong>A-LC</strong>å’Œ<strong>A-BK</strong>çš„ç‰¹å¾å€¼å®éƒ¨åˆ†åˆ«å°äº<strong>0</strong>è®¡ç®—å‡º<strong>LçŸ©é˜µå’ŒKçŸ©é˜µ</strong>å³</p><p><strong>è¾“å‡º</strong></p><p>$u = -K_1(X_1-X_3)-K_2X_2$</p><h4 id="Simulinkä»¿çœŸ-2"><a href="#Simulinkä»¿çœŸ-2" class="headerlink" title="Simulinkä»¿çœŸ"></a>Simulinkä»¿çœŸ</h4><p><img src="https://s2.loli.net/2023/04/04/t1fSoAO8WzYEdXj.png" alt="simulink observer.png"></p><p><img src="https://s2.loli.net/2023/04/04/kQoaeYtBSzlypbT.png" alt="æ›²çº¿6.png"></p><p><img src="https://s2.loli.net/2023/04/04/ujckFSdrNGPTvHg.png" alt="æ›²çº¿7.png"></p><p><img src="https://s2.loli.net/2023/04/04/wFgnhzqyjfK9c8W.png" alt="æ›²çº¿8.png"></p><p>â€‹    åœ¨è§‚æµ‹å™¨æ·»åŠ äº† $\alpha$ åï¼Œä¼°è®¡å€¼ $\hat{\alpha}$ ç¡®å®å¯ä»¥æ”¶æ•›åˆ° $\alpha$ã€‚ä½†æ˜¯åœ¨$\alpha$çš„ä¼°è®¡å€¼ä¸çœŸå®å€¼ç›¸å·®è¾ƒå¤§æ—¶ï¼ŒX1ä¸X2çš„è§‚æµ‹æ•ˆæœéƒ½ä¸å¤ªå¥½ï¼Œå¯¼è‡´æ§åˆ¶æ•ˆæœä¹Ÿä¸å¤ªå¥½ã€‚</p><h5 id="è°ƒæ•´k"><a href="#è°ƒæ•´k" class="headerlink" title="è°ƒæ•´k"></a>è°ƒæ•´k</h5><p>ä¸Šé¢çš„æ§åˆ¶ä¸­ï¼Œä¸ºäº†åŠ å¿«æ”¶æ•›ï¼Œæˆ‘ç›´æ¥å°†è¾“å‡ºu*5åç»™åˆ°ç³»ç»Ÿä¸­ã€‚uçš„å³°å€¼è¾¾åˆ°äº†580å·¦å³ã€‚</p><p>ä½†æ˜¯è¿™æ ·åšæ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œè¿™ç›´æ¥æ”¹å˜äº†ç³»ç»Ÿçš„çŠ¶æ€æ–¹ç¨‹ï¼Œè™½ç„¶ç¡®å®æœ‰ä¸€äº›ç”¨ã€‚å¯æ˜¯æ›´æ”¹äº†Q,RçŸ©é˜µåä¾ç„¶æ²¡æœ‰å¤ªå¤§æ”¹å–„ã€‚</p><h5 id="è°ƒæ•´LçŸ©é˜µ"><a href="#è°ƒæ•´LçŸ©é˜µ" class="headerlink" title="è°ƒæ•´LçŸ©é˜µ"></a>è°ƒæ•´LçŸ©é˜µ</h5><p>â€‹    DR_CANåœ¨è¯¾ç¨‹ä¸­æåˆ°è¿‡ï¼Œæˆ‘ä»¬å¸Œæœ›è§‚æµ‹å™¨çš„æ”¶æ•›é€Ÿåº¦å¤§äºæ§åˆ¶å™¨ï¼Œæ‰€ä»¥å°è¯•ä½¿<strong>A-LC</strong>çŸ©é˜µçš„ç‰¹å¾å€¼æ›´å°ä¸€äº›ã€‚ä»¤$\lambda_1=\lambda_2=\lambda_3=-2$ï¼Œå¾—åˆ°æ–°çš„$L=[6,32,-0.4]^T$</p><p><img src="https://s2.loli.net/2023/04/04/8TV97J2O5d4WLht.png" alt="æ›²çº¿9.png"></p><p><img src="https://s2.loli.net/2023/04/04/4sgeKTIkS59ulL1.png" alt="æ›²çº¿11.png"></p><p><img src="https://s2.loli.net/2023/04/04/CPOhJ5zEi6SB8rQ.png" alt="æ›²çº¿10.png"></p><p>ç»§ç»­ä»¤$\lambda_1=\lambda_2=\lambda_3=-3$ï¼Œå¾—åˆ°çš„æ•ˆæœä¼¼ä¹æ›´å¥½ï¼Œè§’åº¦åå·®å³°å€¼åªæœ‰4Â°å¤šä¸€ç‚¹</p><p>é‚£$\lambda$æ˜¯ä¸æ˜¯è¶Šå°è¶Šå¥½å‘¢ï¼Ÿä»¤$\lambda=-100$åä»¿çœŸå‡ºæ¥çš„ç»“æœä¹Ÿä¸é”™ï¼Œä¹Ÿæ²¡æœ‰å¾ˆå¤¸å¼ ã€‚ä¸è¿‡æˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œä»¿çœŸå¹¶ä¸èƒ½å®Œå…¨çš„æ¨¡æ‹Ÿå®é™…æƒ…å†µï¼Œä¹Ÿä¸èƒ½å¤ªç›¸ä¿¡ä»¿çœŸç»“æœã€‚</p><h5 id="æ·»åŠ åˆå§‹è¯¯å·®"><a href="#æ·»åŠ åˆå§‹è¯¯å·®" class="headerlink" title="æ·»åŠ åˆå§‹è¯¯å·®"></a>æ·»åŠ åˆå§‹è¯¯å·®</h5><p>ä»¤$X_1=5Â°,\hat{X_1}=0Â°$ï¼Œå¾—åˆ°çš„æ•ˆæœä¹Ÿä¸é”™ã€‚</p><p><img src="https://s2.loli.net/2023/04/04/4u8n63Lq5myTQAN.png" alt="æ›²çº¿12.png"></p><p><img src="https://s2.loli.net/2023/04/04/Efs3J4dLxjgSAbn.png" alt="æ›²çº¿13.png"></p><h2 id="STM32æ§åˆ¶å®ç°"><a href="#STM32æ§åˆ¶å®ç°" class="headerlink" title="STM32æ§åˆ¶å®ç°"></a>STM32æ§åˆ¶å®ç°</h2><h4 id="ææ€§çº¦å®š"><a href="#ææ€§çº¦å®š" class="headerlink" title="ææ€§çº¦å®š"></a>ææ€§çº¦å®š</h4><p>æ ¹æ®ä¸Šé¢çš„æ¨¡å‹ï¼Œå°è½¦æœå‘å³æ–¹ï¼š</p><ul><li><p>â€‹    å‘å³å€¾æ–œæ—¶å€¾æ–œè§’Î¸ä¸ºæ­£ï¼›</p></li><li><p>â€‹    ä½¿å°è½¦å‘å³è¿åŠ¨ï¼Œå³è½®å­é¡ºæ—¶é’ˆè½¬ä¸ºæ­£</p></li></ul><h4 id="å‚æ•°ç¡®å®š"><a href="#å‚æ•°ç¡®å®š" class="headerlink" title="å‚æ•°ç¡®å®š"></a>å‚æ•°ç¡®å®š</h4><ul><li>m=0.55kg</li><li>M=0.4kg</li><li>l=0.05m</li></ul><p>å¾—åˆ°</p><script type="math/tex; mode=display">A = \begin{bmatrix}0 & 1 & 0 & 0 \\465.5 & 0 & 0 & 0 \\0 & 0 & 0 & 1 \\-13.475 & 0 & 0 & 0 \\\end{bmatrix}, \quadB = \begin{bmatrix}0 \\-50 \\0 \\2.5\end{bmatrix}</script><p>ä»ç„¶å–</p><script type="math/tex; mode=display">Q=\begin{bmatrix}10&0&0&0 \\0&1&0&0 \\0&0&1&0 \\0&0&0&1\end{bmatrix},\quad R=0.1</script><p>ä½¿ç”¨MATLABè®¡ç®—</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lqr(A,B,Q,R)</span><br></pre></td></tr></table></figure><p>å¾—åˆ°</p><script type="math/tex; mode=display">K=\begin{bmatrix}-32.3606 & -3.6129 & -3.1623 & -4.9876\end{bmatrix}</script><p>åˆ™</p><script type="math/tex; mode=display">u = -KX \\Motor = -a*KX</script><p>å…¶ä¸­uæ˜¯æ°´å¹³å¤–åŠ›ï¼Œå¯ä»¥è®¤ä¸ºæ§åˆ¶ç”µæœºè¾“å‡ºçš„ä¿¡å·æ­£æ¯”äºu</p><p>åˆ©ç”¨ç³»ç»Ÿå®šæ—¶å™¨å¯ä»¥å¾—åˆ°æ§åˆ¶å‡½æ•°çš„å®é™…è°ƒç”¨å‘¨æœŸä¸º0.01s</p>]]></content>
      
      
      
        <tags>
            
            <tag> è¿åŠ¨å­¦åˆ†æ </tag>
            
            <tag> å¹³è¡¡å°è½¦ </tag>
            
            <tag> LQR controller </tag>
            
            <tag> Rhomberg observer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>note of Tactile Sensor Papers</title>
      <link href="/2023/04/03/note-of-Tactile-Sensor-Papers/"/>
      <url>/2023/04/03/note-of-Tactile-Sensor-Papers/</url>
      
        <content type="html"><![CDATA[<h2 id="Soft-Bubble"><a href="#Soft-Bubble" class="headerlink" title="Soft Bubble"></a>Soft Bubble</h2><h3 id="ç¡¬ä»¶"><a href="#ç¡¬ä»¶" class="headerlink" title="ç¡¬ä»¶"></a>ç¡¬ä»¶</h3><ul><li>æ·±åº¦ç›¸æœºï¼šå°ºå¯¸å°ï¼Œå¸§ç‡é«˜ï¼Œæ”¯æŒUSBç­‰</li><li>æ°”å›Šå¤–å£³ï¼šé¡ºåº”æ€§å¼ºï¼Œæ‘©æ“¦åŠ›å¤§ï¼Œä¾¿äºæŠ“å–</li></ul><h3 id="åº”ç”¨æ¡ˆä¾‹"><a href="#åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><h4 id="ç‰©ä½“åˆ†ç±»"><a href="#ç‰©ä½“åˆ†ç±»" class="headerlink" title="ç‰©ä½“åˆ†ç±»"></a>ç‰©ä½“åˆ†ç±»</h4><p>ä½¿ç”¨<strong>æ·±åº¦ç¥ç»ç½‘ç»œResNet</strong>ä½œä¸ºå¯¹è±¡åˆ†æ‹£å™¨ã€‚</p><ul><li><p>è¾“å…¥</p><p>ä¼ æ„Ÿå™¨å—å‹æ—¶çš„æ·±åº¦å›¾åƒ</p></li><li><p>è¾“å‡º</p><p>æ–½å‹ç‰©ä½“å±äºæŸç±»åˆ«çš„æ¦‚ç‡</p><ul><li>å…·ä½“ç§ç±»<ul><li>Cube</li><li>Robot</li><li>Frustum</li><li>Triangular prism</li><li>Bridge</li><li>Hemisphere</li><li>none</li></ul></li></ul></li><li><p>ç®—æ³•</p><ul><li>lost function: cross-entropy lossï¼ˆäº¤å‰ç†µæŸå¤±ï¼Ÿè¿˜æ²¡å­¦åˆ°ï¼‰</li><li>optimizer: stochastic gradient descentï¼ˆéšæœºæ¢¯åº¦ä¸‹é™ï¼Ÿä¹Ÿè¿˜æ²¡å­¦åˆ°ï¼‰</li></ul></li></ul><h4 id="çº¹ç†è¯†åˆ«"><a href="#çº¹ç†è¯†åˆ«" class="headerlink" title="çº¹ç†è¯†åˆ«"></a>çº¹ç†è¯†åˆ«</h4><p>åœ¨å‰ä¸€ä¸ªå®éªŒçš„åŸºç¡€ä¸Šæ·»åŠ ä¸‰ç§å…·æœ‰ä¸åŒè¡¨é¢çº¹ç†ä½†å…·æœ‰åŒå¤§å°è§„æ ¼çš„ç«‹æ–¹ä½“è¿›è¡Œåˆ†ç±»</p><p><strong>ç»“è®º</strong></p><p>åˆ†è¾¨æˆåŠŸç‡ä¸å›¾åƒåˆ†è¾¨ç‡æ­£ç›¸å…³ï¼Œä½†ä¼šæœ‰ä¸€äº›æ³¢åŠ¨ã€‚</p><h4 id="å§¿æ€ä¼°è®¡ä¸è·Ÿè¸ª"><a href="#å§¿æ€ä¼°è®¡ä¸è·Ÿè¸ª" class="headerlink" title="å§¿æ€ä¼°è®¡ä¸è·Ÿè¸ª"></a>å§¿æ€ä¼°è®¡ä¸è·Ÿè¸ª</h4><ul><li><p>è¾“å…¥ä¿¡æ¯</p></li><li><p>ç®—æ³•ï¼šIterative Closest Point (<strong>ICP</strong>) algorithm</p><p>å°†ä¸¤ç»„æ›²çº¿ã€ä¸¤ç»„æ›²é¢æˆ–ä¸¤ç»„ç‚¹äº‘è¿›è¡Œé…å‡†</p><ul><li><p>åŸºæœ¬æ€æƒ³</p><p>è¾“å…¥ä¸ºä¸¤ç»„ç‚¹å’Œå˜æ¢çš„åˆå§‹ä¼°è®¡ï¼Œè¾“å‡ºä¸ºä¸¤ç»„ç‚¹ä¹‹é—´çš„æœ€ä¼˜å˜æ¢ã€‚</p><p>ï¼ˆè‡ªå·±æ¦‚æ‹¬çš„ï¼Œå¯èƒ½ä¸å…¨é¢ï¼‰é€šè¿‡è¿­ä»£çš„æ–¹å¼å¯»æ‰¾åˆå§‹ç‚¹é˜µå‘ç”Ÿçš„å˜æ¢çŸ©é˜µï¼Œä»£å…¥å¾—å‡ºä¼°è®¡çš„å˜æ¢åç‚¹é˜µï¼Œä¸çœŸå®ç‚¹é˜µæ¯”è¾ƒä»¥å¯»æ‰¾å‡ºè¯¯å·®è¶³å¤Ÿå°çš„å˜æ¢ã€‚</p></li><li><p>åŸºæœ¬æµç¨‹</p><p>1ï¼‰å°†å½“å‰ä¼°è®¡çš„å˜æ¢åº”ç”¨äºç¬¬ä¸€ç»„ç‚¹ï¼›</p><p>2ï¼‰å¯¹äºç¬¬ä¸€ç»„å˜æ¢åçš„æ¯ä¸ªç‚¹ï¼Œåœ¨ç¬¬äºŒç»„ä¸­æ‰¾åˆ°æœ€è¿‘çš„ç‚¹ï¼›3ï¼‰é€šè¿‡å‰”é™¤å¼‚å¸¸å€¼æ¥æ›´æ–°ç‚¹åŒ¹é…ï¼›</p><p>4ï¼‰ä½¿ç”¨æ›´æ–°åçš„ç‚¹åŒ¹é…è®¡ç®—å˜æ¢ï¼Œç›´åˆ°ä¼°è®¡çš„å˜æ¢æ”¶æ•›ã€‚</p></li><li><p>æ›´å¤š</p><p><a href="https://blog.csdn.net/kksc1099054857/article/details/80280964">ICPç®—æ³•çš„åŸç†ä¸å®ç°_é…·å°å·çš„åšå®¢-CSDNåšå®¢</a></p></li></ul></li><li><p>å§¿æ€ä¼°è®¡</p><p>ç‰©ä½“çš„å®é™…è½®å»“æ˜¯å·²çŸ¥çš„ï¼Œä½œä¸º<strong>ç›®æ ‡ç‚¹äº‘</strong>ï¼›ä¼ æ„Ÿå™¨å¾—åˆ°çš„ç‚¹äº‘ä¸º<strong>åˆå§‹ç‚¹äº‘</strong>ï¼Œä½¿ç”¨ICPç®—æ³•æ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„æœ€ä¼˜å˜æ¢å…³ç³»ï¼Œä¾¿å¯å¾—åˆ°ç‰©ä½“çš„å§¿æ€ã€‚</p><p>ä»åäºŒä¸ªä¸åŒæ–¹å‘åˆ†åˆ«åŒ¹é…ï¼Œå¯»æ‰¾æœ€åˆé€‚çš„ä¸€ä¸ªã€‚</p></li><li><p>å§¿æ€è·Ÿè¸ª</p><p>æ¯ä¸€æ¬¡å¤„ç†ä¸­ï¼Œæ·±åº¦å›¾åƒå³ä¸ºä¼ æ„Ÿå™¨å¼¹æ€§è†œçš„å¤–è¡¨é¢çš„ç‚¹äº‘ã€‚ä½¿ç”¨ICPç®—æ³•ä¸æ–­åœ°è¿­ä»£å‡ºå„é‡‡æ ·ç‚¹çš„ç‚¹äº‘ä¸ä¸Šä¸€ä¸ªæ ·æœ¬ç‚¹äº‘ä¹‹é—´çš„å˜æ¢çŸ©é˜µï¼Œæœ€ç»ˆåˆå¹¶å…¨éƒ¨çš„å˜æ¢çŸ©é˜µï¼Œä¾æ­¤å¾—å‡ºæ–½å‹ç‰©ä½“çš„è½®å»“ä¸å§¿æ€ã€‚</p><p>ä»¥1-2Hzçš„é¢‘ç‡è¿è¡Œï¼Œé‚£ä¹ˆå„ä¸ªé‡‡æ ·ç‚¹ä¹‹é—´ç”±ICPè¿­ä»£å‡ºçš„å„ä¸ªæœ€ä¼˜å˜æ¢çŸ©é˜µå³ä¸ºç‰©ä½“çš„è¿åŠ¨è½¨è¿¹</p></li></ul><hr><h2 id="TacTip"><a href="#TacTip" class="headerlink" title="TacTip"></a>TacTip</h2><h3 id="ç¡¬ä»¶ç»“æ„"><a href="#ç¡¬ä»¶ç»“æ„" class="headerlink" title="ç¡¬ä»¶ç»“æ„"></a>ç¡¬ä»¶ç»“æ„</h3><ul><li>ä»¿ç”Ÿæ¢é’ˆï¼šåœ¨ä¼ æ„Ÿå™¨å†…è¡¨é¢æ’åˆ—å…‰å­¦æ¢é’ˆæ¨¡ä»¿ç”Ÿç‰©çš®è‚¤ä¸‹æ–¹çš„MCCï¼ˆä¸­é—´è„Šï¼‰</li><li>æŒ‡çº¹ï¼šé€šè¿‡3Dæ‰“å°æŠ€æœ¯ä¸ºä¼ æ„Ÿå™¨è®¾è®¡å‡ºç‰¹æ®Šçš„æŒ‡çº¹ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜æ£€æµ‹ç²¾åº¦</li></ul><h3 id="Data-processing"><a href="#Data-processing" class="headerlink" title="Data processing"></a>Data processing</h3><p>æ¯ä¸€ä¸ªç‚¹ä½çš„æ•°æ®åŒ…æ‹¬æ—¶é—´ä¸ç»´åº¦æ•°æ®ï¼Œæ¯ä¸ªé’ˆè„šçš„Xï¼ŒYæ–¹å‘çš„åç§»å„è‡ªç‹¬ç«‹ã€‚</p><p>é€šè¿‡æ•°æ®è®­ç»ƒæ¨æµ‹å‡ºå„ä¸ªæ¢é’ˆçš„ä½ç½®çŠ¶æ€å¯¹åº”çš„ä½ç½®ã€‚ï¼ˆè¿™ä¸€å—åŸºæœ¬çœ‹ä¸æ‡‚ï¼‰</p><hr><h2 id="Tokyo-University"><a href="#Tokyo-University" class="headerlink" title="Tokyo University"></a>Tokyo University</h2><p>è¿™ä¸¤ç¯‡æ–‡ç« æ‰€ä»‹ç»çš„ä¼ æ„Ÿå™¨å¤§è‡´æ¡†æ¶ä¸å˜ï¼Œä½œè€…äººå‘˜ä¹Ÿæœ‰è¾ƒå¤šé‡åˆã€‚ä½†æ˜¯äºŒè€…ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œç¬¬äºŒç¯‡æ–‡ç« æ›´ä¾§é‡äºç†è®ºæ¨å¯¼ã€‚</p><h3 id="Measurement-of-force-vector-field-of-robotic-finger-using-vision-based-haptic-sensor"><a href="#Measurement-of-force-vector-field-of-robotic-finger-using-vision-based-haptic-sensor" class="headerlink" title="Measurement of force vector field of robotic finger using vision-based haptic sensor"></a>Measurement of force vector field of robotic finger using vision-based haptic sensor</h3><h4 id="ç¡¬ä»¶ç»“æ„-1"><a href="#ç¡¬ä»¶ç»“æ„-1" class="headerlink" title="ç¡¬ä»¶ç»“æ„"></a>ç¡¬ä»¶ç»“æ„</h4><ul><li>é€æ˜ç¡…èƒ¶ï¼šå—åŠ›è½½ä½“ï¼ŒåŒæ—¶æä¾›æœ‰è§„å¾‹å¯å¾ªçš„å½¢å˜</li><li>çº¢è“ç‚¹é˜µï¼šä½œä¸ºèƒ¶ä½“å½¢å˜å‚ç…§ç‰©ï¼Œç”±å½¢å˜åæ¨å—åŠ›</li><li>æ‘„åƒå¤´ï¼šæ•æ‰å›¾åƒ</li></ul><h4 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h4><ul><li>å‰æå‡è®¾<ul><li>the sensor is a semi-infinite elastic body.</li><li>the deformation of the elastic body is linear.</li></ul></li></ul><p>u=hf</p><p>æŸä¸€ç»´åº¦ä¸Šçš„ä½œç”¨åŠ›ä¼šåœ¨å¦ä¸€ç»´åº¦äº§ç”Ÿåˆ†åŠ›ï¼›</p><p>æŸä¸€ç»´åº¦ä¸Šçš„åŠ›å¯ä½¿æ ‡è®°åœ¨å¦ä¸€ç»´åº¦ä¸Šäº§ç”Ÿä½ç§»ï¼›</p><p>håˆ™ä¸ºä½œç”¨åŠ›ä¸æ ‡è®°ä½ç§»ä¹‹é—´çš„è½¬æ¢çŸ©é˜µã€‚</p><p>é€šè¿‡è§‚æµ‹æ ‡è®°çš„ä½ç§»ä¸æ–½åŠ çš„å·²çŸ¥åŠ›çš„å…³ç³»å¾—åˆ°hçŸ©é˜µã€‚</p><p>ä¾¿å¯é€šè¿‡ä½ç§»uå’Œè½¬æ¢çŸ©é˜µhåæ¨å‡ºæ–½åŠ äºä¼ æ„Ÿå™¨çš„å¤–åŠ›ã€‚</p><hr><h3 id="Vision-Based-Sensor-for-RealTime-Measuring-of-Surface-Traction-Fields"><a href="#Vision-Based-Sensor-for-RealTime-Measuring-of-Surface-Traction-Fields" class="headerlink" title="Vision-Based Sensor for RealTime Measuring of Surface Traction Fields"></a>Vision-Based Sensor for RealTime Measuring of Surface Traction Fields</h3><h4 id="ç¡¬ä»¶ç»“æ„-2"><a href="#ç¡¬ä»¶ç»“æ„-2" class="headerlink" title="ç¡¬ä»¶ç»“æ„"></a>ç¡¬ä»¶ç»“æ„</h4><ul><li>Transparent elastic bodyï¼šé€æ˜å¼¹æ€§ä»‹è´¨</li><li>black layerï¼šé®å…‰å±‚</li><li>Two layers of spherical markersï¼šä¸¤å±‚çº¢è“ç‚¹é˜µæ ‡è®°ç‰©</li><li>CCD cameraï¼šç›¸æœº</li></ul><h4 id="å…¬å¼æ¨å¯¼"><a href="#å…¬å¼æ¨å¯¼" class="headerlink" title="å…¬å¼æ¨å¯¼"></a>å…¬å¼æ¨å¯¼</h4><ul><li><p>å‰æå‡è®¾</p><p>elastic medium is linear, isotropic, and homogeneous.ï¼ˆçº¿æ€§ã€å„å‘åŒæ€§ã€å‡åŒ€æ€§ï¼‰</p></li><li><p>æ¨å¯¼å‡ºè¡¨é¢æ³•å‘åŠ›Fnä½¿ä½œç”¨ç‚¹åœ¨ä¸‰ä¸ªç»´åº¦å‘ç”Ÿçš„ä½ç§»å…¬å¼</p></li><li><p>æ¨å¯¼å‡ºè¡¨é¢åˆ‡å‘åŠ›Ftä½¿ä½œç”¨ç‚¹åœ¨ä¸‰ä¸ªç»´åº¦å‘ç”Ÿçš„ä½ç§»å…¬å¼</p></li><li><p>å…¬å¼åŒ…å«ææ–™çš„æ¨æ°æ¨¡é‡Eå’Œæ³Šæ¾æ¯”Rï¼Œå¯é€‚ç”¨äºå¤šç§ææ–™</p></li><li><p>æ ¹æ®çº¿æ€§å‡è®¾ï¼Œå¯ä»¥è®¤ä¸ºå„ä½œç”¨åŠ›å¯¹æ ‡è®°ç‰©äº§ç”Ÿçš„ä½ç§»ä½œç”¨ä¹Ÿå¯çº¿æ€§å åŠ ï¼Œå¯ç”¨Hå˜æ¢çŸ©é˜µè¡¨ç¤º</p></li></ul><h4 id="å›¾åƒå¤„ç†"><a href="#å›¾åƒå¤„ç†" class="headerlink" title="å›¾åƒå¤„ç†"></a>å›¾åƒå¤„ç†</h4><p>thresholdï¼šæ¶ˆé™¤èƒŒæ™¯å™ªéŸ³çš„é˜ˆå€¼ï¼Œç±»ä¼¼äºæé«˜æ°´ä½ä»¥å°†ä¸˜é™µåˆ†å‰²ä¸ºå²›å±¿</p><p>ç²¾åº¦ï¼š15å¾®ç±³</p><p>æ ‡è®°åæ ‡çš„è®¡ç®—</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b63b31b9-1ddf-439a-b58f-164e7689b95a/Untitled.png" alt="Untitled"></p><p>è¿™ä¸ªPæ˜¯pixelsï¼Œè¿™é‡Œæ˜¯ä»€ä¹ˆæ„æ€å‘¢</p><hr><h2 id="GelSlim"><a href="#GelSlim" class="headerlink" title="GelSlim"></a>GelSlim</h2><h3 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h3><ul><li><strong>incipient slipï¼š</strong>åˆå§‹æ»‘ç§»ï¼ŒæŒ‡æ¥è§¦è¡¨é¢çš„ä¸€éƒ¨åˆ†åŒºåŸŸå¼€å§‹æ»‘ç§»ï¼ˆé€šå¸¸æ˜¯å¤–å›´åŒºåŸŸï¼‰</li><li><strong>ICRï¼š</strong>æ—‹è½¬ä¸­å¿ƒï¼ˆé€Ÿåº¦ç¬å¿ƒï¼‰ï¼Œç±»ä¼¼äºâ€œ<em>åŸºç‚¹æ³•</em>â€æ±‚å„ç‚¹è¿åŠ¨çŠ¶æ€ã€‚</li></ul><p>åœ¨æ²¡æœ‰å‘ç”Ÿæ»‘ç§»æ—¶ï¼Œå°†æ¥åŒºåŸŸç†æƒ³åŒ–ä¸ºäºŒç»´åˆšæ€§æ¨¡å‹ï¼Œä»¥æ­¤æ¥è®¡ç®—å‡ºä¼ æ„Ÿå™¨ä¸Šçš„æ ‡è®°ä½ç§»çš„ä¼°è®¡å€¼ï¼›å½“ä¼°è®¡å€¼ä¸å®é™…å€¼ç›¸å·®è¾ƒå¤§æ—¶ï¼Œåˆ™å¯è®¤ä¸ºåˆå§‹æ»‘ç§»å¼€å§‹å‘ç”Ÿã€‚</p><p>å› ä¸ºå°†æ¥åŒºåŸŸç†æƒ³åŒ–ä¸ºäºŒç»´åˆšæ€§æ¨¡å‹ï¼Œæ¥è§¦åŒºåŸŸçš„è¿åŠ¨å°±ç†æƒ³åŒ–ä¸º<strong>å¹³é¢åˆšä½“è¿åŠ¨ï¼Œ</strong>ç”±æ­¤æ–¹ä¾¿é¢„ä¼°å§¿æ€ä¸åˆ¤æ–­ã€‚</p><ul><li><p>å…·ä½“æ­¥éª¤</p><ol><li><p>æ£€æµ‹å¹¶æ»¤æ³¢å¤„ç†å¾—åˆ°æ¥è§¦åŒºåŸŸ</p></li><li><p>åˆ©ç”¨opencvåº“å¾—åˆ°æ ‡è®°ç‚¹åœ¨åŒºåŸŸå†…çš„åæ ‡ã€‚é€‰å–ä¸€ä¸ªå‚è€ƒåæ ‡ç³»ï¼Œç”±æ­¤è®¡ç®—å„ä¸ªæ—¶åˆ»æ¥è§¦åŒºåŸŸçš„ä½ç§»ã€‚</p><p><aside> ğŸ’¡ å½“æ ‡è®°çš„ä½ç§»æ¥è¿‘æ ‡è®°é—´çš„é—´è·æ—¶ï¼Œæ›´æ–°å‚è€ƒåæ ‡ç³»ï¼Œè¿™æ ·å¯ä»¥é¿å…å¤šä¸ªåŒºåŸŸå†…å„æ ‡è®°ç‚¹é”™è¯¯åŒ¹é…ï¼ˆå› ä¸ºé€‰æ‹©ç¦»è‡ªå·±æœ€è¿‘çš„ä¸€ä¸ªç‚¹å°±å¯ä»¥è®¤ä¸ºæ˜¯ä¸‹ä¸€æ—¶åˆ»çš„è‡ªå·±ï¼Ÿï¼‰</p></li><li><p>å»é™¤æ¥è§¦åŒºåŸŸçš„<strong>å¤–éƒ¨åŒºåŸŸ</strong>ï¼Œä½¿ç”¨å†…éƒ¨åŒºåŸŸçš„æ ‡è®°ä½ç§»æ¥ä»£è¡¨åˆšä½“çš„ä½ç§»ï¼Œå¹¶è®¡ç®—é€Ÿåº¦ã€‚ï¼ˆå› ä¸ºå¤–å›´æ›´å¯èƒ½å…ˆå‘ç”Ÿåˆå§‹æ»‘ç§»ï¼‰</p></li><li><p>ä¼°è®¡ä½ç§»å¹¶ç”±æ­¤è®¡ç®—æˆ–åˆ¤æ–­æ˜¯å¦å‘ç”Ÿæ»‘ç§»</p></li></ol></li></ul><h3 id="æ‹§ç“¶ç›–å®éªŒ"><a href="#æ‹§ç“¶ç›–å®éªŒ" class="headerlink" title="æ‹§ç“¶ç›–å®éªŒ"></a>æ‹§ç“¶ç›–å®éªŒ</h3><ul><li>é»„è‰²ç®­å¤´ï¼šçœŸå®ä½ç§»</li><li>çº¢è‰²ç®­å¤´ï¼šä¼°è®¡ä½ç§»</li></ul><p>ç›¸å½“äºåœ¨æ‹§ç“¶ç›–çš„è¿‡ç¨‹ä¸­é€šè¿‡è§¦è§‰ä¼ æ„Ÿå™¨çš„æ»‘ç§»ä¿¡æ¯å½¢æˆé—­ç¯æ§åˆ¶ã€‚</p><hr><h2 id="GelSlim-application"><a href="#GelSlim-application" class="headerlink" title="GelSlim-application"></a>GelSlim-application</h2><blockquote><p>Tactile-Based Insertion for Dense Box-Packing</p></blockquote><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„<strong>GelSlim</strong>åœ¨å®é™…åº”ç”¨ä¸­çš„å°è¯•</p><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>åœ¨æ‘„åƒæœºç»™å‡ºå¤§è‡´çš„ç©ºéš™ä½ç½®ä¿¡æ¯åï¼Œæœºæ¢°è‡‚å€ŸåŠ©è§¦è§‰ä¼ æ„Ÿå™¨è¿›è¡Œå…·æœ‰æ›´é«˜ç²¾åº¦çš„ç‰©å“æ”¾ç½®ã€‚å¯¹å‘¨å›´ç‰©ä½“ä¸åŠ æŒç‰©ä½“æ²¡æœ‰è¾ƒå¤šçš„äº†è§£ï¼Œä¸”æœºå™¨äººè¦åœ¨ä¸ç ´åå‘¨å›´ç‰©ä½“ä½ç½®çš„æƒ…å†µä¸‹æ­£ç¡®æ”¾ç½®ï¼Œå…è®¸è¯•é”™ä¸çº é”™ã€‚</p><ul><li>è§’åº¦è¯¯å·®é˜ˆå€¼ï¼š5Â°</li><li>ä½ç½®è¯¯å·®é˜ˆå€¼ï¼š2.5mm</li></ul><h3 id="è¯¯å·®è·å–"><a href="#è¯¯å·®è·å–" class="headerlink" title="è¯¯å·®è·å–"></a>è¯¯å·®è·å–</h3><ul><li><p>è¯¯å·®è¢«åˆ†ä¸ºå…«ä¸ªç§ç±»</p><p>è§’åº¦æ­£è´Ÿè¯¯å·®ä¸ä½ç§»æ­£è´Ÿè¯¯å·®æ’åˆ—ç»„åˆ</p></li><li><p>ç”±GelSlimè·å–ç¢°æ’æ—¶çš„è§¦è§‰ä¿¡æ¯</p><p>ç‰©ä½“åœ¨ç¢°æ’æˆ–æ¥è§¦è¿‡ç¨‹ä¸­äº§ç”Ÿçš„è§¦è§‰ä¿¡æ¯ï¼ˆå®é™…ä¸Šæ˜¯å›¾åƒä¿¡æ¯ï¼‰è¢«æ•è·å¹¶ä¸”æœ‰åºå­˜å‚¨</p></li></ul><h4 id="è¯¯å·®ç±»å‹çš„åˆ¤æ–­"><a href="#è¯¯å·®ç±»å‹çš„åˆ¤æ–­" class="headerlink" title="è¯¯å·®ç±»å‹çš„åˆ¤æ–­"></a>è¯¯å·®ç±»å‹çš„åˆ¤æ–­</h4><p><strong>å·ç§¯ç¥ç»ç½‘ç»œDirectionNN</strong></p><ul><li>è¾“å…¥ï¼šè§¦è§‰ä¼ æ„Ÿå™¨ç»™å‡ºçš„æ¥è§¦ä¿¡æ¯</li><li>è¾“å‡ºï¼šå±äºå„ä¸ªè¯¯å·®ç±»å‹çš„æ¦‚ç‡</li></ul><h4 id="è¯¯å·®å¤§å°çš„åˆ¤æ–­"><a href="#è¯¯å·®å¤§å°çš„åˆ¤æ–­" class="headerlink" title="è¯¯å·®å¤§å°çš„åˆ¤æ–­"></a>è¯¯å·®å¤§å°çš„åˆ¤æ–­</h4><p>å³ä¾¿æ˜¯æ–¹å‘ç›¸åŒï¼Œè¯¯å·®å¤§å°çš„æ”¹å˜ä¹Ÿä¼šå¼•èµ·è§¦è§‰ä¿¡æ¯çš„æ”¹å˜</p><p><strong>é€’å½’ç¥ç»ç½‘ç»œMagnitudeNN</strong></p><p>ä¼°è®¡è¯¯å·®å¤§å°</p><h3 id="æ§åˆ¶ç­–ç•¥"><a href="#æ§åˆ¶ç­–ç•¥" class="headerlink" title="æ§åˆ¶ç­–ç•¥"></a>æ§åˆ¶ç­–ç•¥</h3><p>æ ¹æ®ä¸¤ä¸ªç½‘ç»œè¾“å‡ºçš„ç»“æœä¸€è‡´æ€§è¿›è¡Œåˆ¤æ–­ï¼Œæ›´ç›¸ä¿¡<strong>DirectionNNã€‚</strong></p><ul><li>æ ¹æ®ä¸¤ä¸ªç»“æœçš„å·®åˆ«å¤§å°åˆ¶å®šä¸åŒçš„æ§åˆ¶ç­–ç•¥</li></ul><h4 id="è¿­ä»£æµç¨‹"><a href="#è¿­ä»£æµç¨‹" class="headerlink" title="è¿­ä»£æµç¨‹"></a>è¿­ä»£æµç¨‹</h4><ol><li>å°è¯•æ”¾ç½®ç‰©å“</li><li>è‹¥å¤±è´¥ï¼Œåˆ™æ•è·è§¦è§‰ä¿¡æ¯</li><li>ä¸¤ä¸ªç¥ç»ç½‘ç»œåˆ†åˆ«æ ¹æ®ä¿¡æ¯ä¼°è®¡è¯¯å·®</li><li>æ§åˆ¶å™¨æ ¹æ®è¯¯å·®è¿›è¡Œè¿åŠ¨å†³ç­–</li><li>è‹¥å¤±è´¥ï¼Œåˆ™é‡å¤2~4ï¼Œç›´åˆ°æˆåŠŸ</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Tactile Sensor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello,FreeRTOS!</title>
      <link href="/2023/01/06/Hello_FreeRTOS!/"/>
      <url>/2023/01/06/Hello_FreeRTOS!/</url>
      
        <content type="html"><![CDATA[<h1 id="Helloï¼ŒFreeRTOSï¼"><a href="#Helloï¼ŒFreeRTOSï¼" class="headerlink" title="Helloï¼ŒFreeRTOSï¼"></a>Helloï¼ŒFreeRTOSï¼</h1><p><strong>å®˜ç½‘é“¾æ¥</strong></p><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://www.freertos.org/zh-cn-cmn-s/">FreeRTOS - Market leading RTOS (Real Time Operating System) for embedded systems with Internet of Things extensions</a></p></div><p><strong>æ­£ç‚¹åŸå­æ•™ç¨‹æ‰‹å†Œ</strong></p><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://semitia.top/upload_flies/STM32F1_FreeRTOS_V1.1.pdf">https://semitia.top/upload_flies/STM32F1_FreeRTOS_V1.1.pdf</a></p></div><h1 id="DEMO1-Blink-LEDç§»æ¤"><a href="#DEMO1-Blink-LEDç§»æ¤" class="headerlink" title="DEMO1: Blink_LEDç§»æ¤"></a>DEMO1: Blink_LEDç§»æ¤</h1><p>æŒ‰ç…§æ•™ç¨‹ç§»æ¤çš„æ—¶å€™ï¼Œç¼–è¯‘å‡ºæ¥ä¼šæœ‰æŠ¥é”™</p><blockquote><p>..\OBJ\LED.axf: Error: L6200E: Symbol PendSV_Handler multiply defined (by port.o and stm32f10x_it.o).</p><p>..\OBJ\LED.axf: Error: L6200E: Symbol SVC_Handler multiply defined (by port.o and stm32f10x_it.o).</p></blockquote><p>æŠ¥é”™ä¿¡æ¯æ˜¾ç¤º <strong>PendSV_Handler</strong>å’Œ<strong>SVC_Handler</strong>åœ¨<strong>port</strong>å’Œ<strong>stm32f10x_it</strong>é‡Œé¢é‡å¤å®šä¹‰äº†ã€‚ç½‘ä¸ŠæŸ¥åˆ°äº†æœ‰äººè¯´è¦æŠŠé…ç½®æ–‡ä»¶<strong>FreeRTOSConfig.h</strong>é‡Œçš„å®å®šä¹‰æ³¨é‡Šæ‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> xPortPendSVHandler PendSV_Handler</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> vPortSVCHandler SVC_Handler</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸¤ä¸ªæ˜¯ä¸ä¸ä¸­æ–­å‡½æ•°æœ‰å…³çš„é…ç½®ï¼Œç›´æ¥æ³¨é‡Šæ‰è‚¯å®šä¸åˆé€‚ã€‚åœ¨<strong>stm32æ³•f10x_it.c</strong>é‡Œé¢æ‰¾åˆ°è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯è¿™æ ·çš„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">SVC_Handler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PendSV_Handler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥é€‰æ‹©å°†è¿™ä¸¤ä¸ªå‡½æ•°ç»™æ³¨é‡Šæ‰ï¼ˆå®é™…ä¸Šæ•™ç¨‹çœ‹åˆ°åé¢å‘ç°è¿™å‡ ä¸ªå‡½æ•°æ—©æ™šè¦æ³¨é‡Šæ‰çš„ï¼‰ï¼Œè¿™æ ·è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«ä¼šæŒ‡å‘<strong>port.c</strong>é‡Œé¢çš„å‡½æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">__asm <span class="type">void</span> <span class="title function_">vPortSVCHandler</span><span class="params">( <span class="type">void</span> )</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">/* *INDENT-OFF* */</span></span><br><span class="line">    PRESERVE8</span><br><span class="line"></span><br><span class="line">    ldr r3, = pxCurrentTCB   <span class="comment">/* Restore the context. */</span></span><br><span class="line">    ldr r1, [ r3 ] <span class="comment">/* Use pxCurrentTCBConst to get the pxCurrentTCB address. */</span></span><br><span class="line">    ldr r0, [ r1 ]           <span class="comment">/* The first item in pxCurrentTCB is the task top of stack. */</span></span><br><span class="line">    ldmia r0 !, &#123; r4 - r11 &#125; <span class="comment">/* Pop the registers that are not automatically saved on exception entry and the critical nesting count. */</span></span><br><span class="line">    msr psp, r0 <span class="comment">/* Restore the task stack pointer. */</span></span><br><span class="line">    isb</span><br><span class="line">    mov r0, # <span class="number">0</span></span><br><span class="line">    msr basepri, r0</span><br><span class="line">    orr r14, # <span class="number">0xd</span></span><br><span class="line">    bx r14</span><br><span class="line"><span class="comment">/* *INDENT-ON* */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">__asm <span class="type">void</span> xPortPendSVHandler( <span class="type">void</span> )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">extern</span> uxCriticalNesting;</span><br><span class="line">    <span class="keyword">extern</span> pxCurrentTCB;</span><br><span class="line">    <span class="keyword">extern</span> vTaskSwitchContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* *INDENT-OFF* */</span></span><br><span class="line">    PRESERVE8</span><br><span class="line"></span><br><span class="line">    mrs r0, psp</span><br><span class="line">    isb</span><br><span class="line"></span><br><span class="line">    ldr r3, =pxCurrentTCB <span class="comment">/* Get the location of the current TCB. */</span></span><br><span class="line">    ldr r2, [ r3 ]</span><br><span class="line"></span><br><span class="line">    stmdb r0 !, &#123; r4 - r11 &#125; <span class="comment">/* Save the remaining registers. */</span></span><br><span class="line">    str r0, [ r2 ] <span class="comment">/* Save the new top of stack into the first member of the TCB. */</span></span><br><span class="line"></span><br><span class="line">    stmdb sp !, &#123; r3, r14 &#125;</span><br><span class="line">    mov r0, #configMAX_SYSCALL_INTERRUPT_PRIORITY</span><br><span class="line">    msr basepri, r0</span><br><span class="line">    dsb</span><br><span class="line">    isb</span><br><span class="line">    bl vTaskSwitchContext</span><br><span class="line">    mov r0, #<span class="number">0</span></span><br><span class="line">    msr basepri, r0</span><br><span class="line">    ldmia sp !, &#123; r3, r14 &#125;</span><br><span class="line"></span><br><span class="line">    ldr r1, [ r3 ]</span><br><span class="line">    ldr r0, [ r1 ] <span class="comment">/* The first item in pxCurrentTCB is the task top of stack. */</span></span><br><span class="line">    ldmia r0 !, &#123; r4 - r11 &#125; <span class="comment">/* Pop the registers and the critical nesting count. */</span></span><br><span class="line">    msr psp, r0</span><br><span class="line">    isb</span><br><span class="line">    bx r14</span><br><span class="line">    nop</span><br><span class="line"><span class="comment">/* *INDENT-ON* */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="FreeRTOSConfig-h"><a href="#FreeRTOSConfig-h" class="headerlink" title="FreeRTOSConfig.h"></a>FreeRTOSConfig.h</h1><p>â€‹    è¿™ä¸€éƒ¨åˆ†åœ¨æ•™ç¨‹ä¸­æœ‰è¯¦ç»†çš„è®²è§£ï¼Œåœ¨è¿™é‡Œæ‘˜å½•è¿‡æ¥ï¼Œå…¨éƒ¨è®°ä½å¯èƒ½ä¸å¤ªå®¹æ˜“ï¼Œä¸»è¦æ˜¯åœ¨å…·ä½“ä½¿ç”¨çš„æ—¶å€™èƒ½æ–¹ä¾¿å…·ä½“æŸ¥çœ‹å°±è¡Œäº†ã€‚</p><h2 id="INCLUDE"><a href="#INCLUDE" class="headerlink" title="INCLUDE_"></a>INCLUDE_</h2><h3 id="INCLUDE-xTaskGetSchedulerState"><a href="#INCLUDE-xTaskGetSchedulerState" class="headerlink" title="INCLUDE_xTaskGetSchedulerState"></a>INCLUDE_xTaskGetSchedulerState</h3><h3 id="INCLUDE-vTaskPrioritySet"><a href="#INCLUDE-vTaskPrioritySet" class="headerlink" title="INCLUDE_vTaskPrioritySet"></a>INCLUDE_vTaskPrioritySet</h3><h3 id="INCLUDE-uxTaskPriorityGet"><a href="#INCLUDE-uxTaskPriorityGet" class="headerlink" title="INCLUDE_uxTaskPriorityGet"></a>INCLUDE_uxTaskPriorityGet</h3><h3 id="INCLUDE-vTaskDelete"><a href="#INCLUDE-vTaskDelete" class="headerlink" title="INCLUDE_vTaskDelete"></a>INCLUDE_vTaskDelete</h3><h3 id="INCLUDE-vTaskCleanUpResources"><a href="#INCLUDE-vTaskCleanUpResources" class="headerlink" title="INCLUDE_vTaskCleanUpResources"></a>INCLUDE_vTaskCleanUpResources</h3><h3 id="INCLUDE-vTaskSuspend"><a href="#INCLUDE-vTaskSuspend" class="headerlink" title="INCLUDE_vTaskSuspend"></a>INCLUDE_vTaskSuspend</h3><h3 id="INCLUDE-vTaskDelayUntil"><a href="#INCLUDE-vTaskDelayUntil" class="headerlink" title="INCLUDE_vTaskDelayUntil"></a>INCLUDE_vTaskDelayUntil</h3><h3 id="INCLUDE-vTaskDelay"><a href="#INCLUDE-vTaskDelay" class="headerlink" title="INCLUDE_vTaskDelay"></a>INCLUDE_vTaskDelay</h3><h3 id="INCLUDE-eTaskGetState"><a href="#INCLUDE-eTaskGetState" class="headerlink" title="INCLUDE_eTaskGetState"></a>INCLUDE_eTaskGetState</h3><h3 id="INCLUDE-xTimerPendFunctionCall"><a href="#INCLUDE-xTimerPendFunctionCall" class="headerlink" title="INCLUDE_xTimerPendFunctionCall"></a>INCLUDE_xTimerPendFunctionCall</h3><h2 id="config"><a href="#config" class="headerlink" title="config"></a>config</h2><h1 id="DEMO2ï¼šä¸­æ–­å±è”½"><a href="#DEMO2ï¼šä¸­æ–­å±è”½" class="headerlink" title="DEMO2ï¼šä¸­æ–­å±è”½"></a>DEMO2ï¼šä¸­æ–­å±è”½</h1><h2 id="ä¸­æ–­å±è”½å¯„å­˜å™¨"><a href="#ä¸­æ–­å±è”½å¯„å­˜å™¨" class="headerlink" title="ä¸­æ–­å±è”½å¯„å­˜å™¨"></a>ä¸­æ–­å±è”½å¯„å­˜å™¨</h2><ul><li>PRIMASK</li></ul><blockquote><p>PRIMASK ç”¨äºç¦æ­¢é™¤ NMI å’Œ HardFalut å¤–çš„æ‰€æœ‰å¼‚å¸¸å’Œä¸­æ–­ï¼Œæ¸…é™¤åä½¿èƒ½ä¸­æ–­</p></blockquote><ul><li>FAULTMASK  </li></ul><blockquote><p>ä¸ PRIMASKç›¸æ¯” ï¼Œ FAULTMASK å¯ä»¥è¿ HardFault éƒ½å±è”½æ‰ ï¼Œå®ƒåœ¨é€€å‡ºæ—¶è‡ªåŠ¨æ¸…é›¶ã€‚</p></blockquote><ul><li>BASEPRI</li></ul><blockquote><p>åœ¨æœ‰äº›åœºåˆéœ€è¦å¯¹ä¸­æ–­å±è”½è¿›è¡Œæ›´ç»†è…»çš„æ§åˆ¶ï¼Œ æ¯”å¦‚åªå±è”½ä¼˜å…ˆçº§ä½äºæŸ<br>ä¸€ä¸ªé˜ˆå€¼çš„ä¸­æ–­ã€‚é‚£ä¹ˆè¿™ä¸ªä½œä¸ºé˜ˆå€¼çš„ä¼˜å…ˆçº§å€¼å­˜å‚¨åœ¨å“ªé‡Œå‘¢ï¼ŸBASEPRI å¯„å­˜å™¨ä¸­ã€‚å¦‚æœå‘ BASEPRI å†™ 0 çš„è¯å°±ä¼šåœæ­¢å±è”½ä¸­æ–­ã€‚  </p></blockquote><h2 id="ä¸­æ–­å±è”½çš„é…ç½®å®"><a href="#ä¸­æ–­å±è”½çš„é…ç½®å®" class="headerlink" title="ä¸­æ–­å±è”½çš„é…ç½®å®"></a>ä¸­æ–­å±è”½çš„é…ç½®å®</h2><p>â€‹    FreeRTOS çš„å¼€å…³ä¸­æ–­æ˜¯æ“ä½œ BASEPRI å¯„å­˜å™¨æ¥å®ç°çš„ï¼Œå®ƒå¯ä»¥å…³é—­ä½äºæŸä¸ªé˜ˆå€¼çš„ä¸­æ–­ï¼Œé«˜äºè¿™ä¸ªé˜ˆå€¼çš„ä¸­æ–­å°±ä¸ä¼šè¢«å…³é—­ ã€‚</p><h3 id="configLIBRARY-MAX-SYSCALL-INTERRUPT-PRIORITY"><a href="#configLIBRARY-MAX-SYSCALL-INTERRUPT-PRIORITY" class="headerlink" title="configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY"></a>configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY</h3><p>â€‹    æ­¤å®ç”¨æ¥è®¾ç½® FreeRTOS ç³»ç»Ÿå¯ç®¡ç†çš„æœ€å¤§ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯<strong>BASEPRI</strong>å¯„å­˜å™¨è¯´çš„é‚£ä¸ªé˜ˆå€¼ä¼˜å…ˆçº§ï¼Œè¿™ä¸ªå¤§å®¶å¯ä»¥è‡ªç”±è®¾ç½®ï¼Œè¿™é‡Œæˆ‘è®¾ç½®ä¸ºäº† 5ã€‚ä¹Ÿå°±æ˜¯é«˜äº 5 çš„ä¼˜å…ˆçº§(ä¼˜å…ˆçº§æ•°å°äº 5)ä¸å½’ FreeRTOS ç®¡ç†ã€‚</p><h3 id="configMAX-SYSCALL-INTERRUPT-PRIORITY"><a href="#configMAX-SYSCALL-INTERRUPT-PRIORITY" class="headerlink" title="configMAX_SYSCALL_INTERRUPT_PRIORITY"></a>configMAX_SYSCALL_INTERRUPT_PRIORITY</h3><p>â€‹    æ­¤å®æ˜¯ configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY å·¦ç§» 4 ä½è€Œæ¥çš„ã€‚<strong>æ­¤å®è®¾ç½®å¥½ä»¥åï¼Œä½äºæ­¤ä¼˜å…ˆçº§çš„ä¸­æ–­å¯ä»¥å®‰å…¨çš„è°ƒç”¨ FreeRTOS çš„ API å‡½æ•°ï¼Œé«˜äºæ­¤ä¼˜å…ˆçº§çš„ä¸­æ–­ FreeRTOS æ˜¯ä¸èƒ½ç¦æ­¢çš„ï¼Œ<emp>ä¸­æ–­æœåŠ¡å‡½æ•°ä¹Ÿä¸èƒ½è°ƒç”¨ FreeRTOS çš„ API å‡½æ•°ï¼</emp></strong> </p><h2 id="ä¸´ç•Œæ®µä»£ç ï¼š"><a href="#ä¸´ç•Œæ®µä»£ç ï¼š" class="headerlink" title="ä¸´ç•Œæ®µä»£ç ï¼š"></a>ä¸´ç•Œæ®µä»£ç ï¼š</h2><p>â€‹    ä¸´ç•Œæ®µä»£ç ä¹Ÿå«åšä¸´ç•ŒåŒºï¼Œæ˜¯æŒ‡é‚£äº›å¿…é¡»å®Œæ•´è¿è¡Œï¼Œä¸èƒ½è¢«æ‰“æ–­çš„ä»£ç æ®µï¼Œæ¯”å¦‚æœ‰çš„å¤–è®¾çš„åˆå§‹åŒ–éœ€è¦ä¸¥æ ¼çš„æ—¶åºï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸èƒ½è¢«æ‰“æ–­ã€‚FreeRTOS åœ¨è¿›å…¥ä¸´ç•Œæ®µä»£ç çš„æ—¶å€™éœ€è¦å…³é—­ä¸­æ–­ï¼Œå½“å¤„ç†å®Œä¸´ç•Œæ®µä»£ç ä»¥åå†æ‰“å¼€ä¸­æ–­ã€‚  </p><h2 id="ä»»åŠ¡çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°"><a href="#ä»»åŠ¡çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°" class="headerlink" title="ä»»åŠ¡çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°"></a>ä»»åŠ¡çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°</h2><p>å¯¹<strong>ä»»åŠ¡</strong>ä¸­çš„ä¸´ç•Œæ®µä»£ç è¯­å¥ä½¿ç”¨çš„ä¿æŠ¤å‡½æ•°</p><ul><li>taskENTER_CRITICAL() </li><li>taskEXIT_CRITICAL()  </li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">taskcritical_test</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        taskENTER_CRITICAL();<span class="comment">//è¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        taskEXIT_CRITICAL();<span class="comment">//é€€å‡ºä¸´ç•ŒåŒº</span></span><br><span class="line">        vTaskDelay(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸­æ–­çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°"><a href="#ä¸­æ–­çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°" class="headerlink" title="ä¸­æ–­çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°"></a>ä¸­æ–­çº§ä¸´ç•Œæ®µä»£ç ä¿æŠ¤å‡½æ•°</h2><p>å¯¹<strong>ä¸­æ–­å‡½æ•°</strong>ä¸­çš„ä¸´ç•Œæ®µä»£ç è¯­å¥ä½¿ç”¨çš„ä¿æŠ¤å‡½æ•°</p><ul><li>taskENTER_CRITICAL_FROM_ISR()</li><li>taskEXIT_CRITICAL_FROM_ISR()</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">TIM3_IRQHandler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(TIM_GetITStatus(TIM3,TIM_IT_Update)==SET) <span class="comment">//æº¢å‡ºä¸­æ–­</span></span><br><span class="line">    &#123;</span><br><span class="line">        status_value=taskENTER_CRITICAL_FROM_ISR();</span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line">            </span><br><span class="line">        taskEXIT_CRITICAL_FROM_ISR(status_value);</span><br><span class="line">    &#125;</span><br><span class="line">    TIM_ClearITPendingBit(TIM3,TIM_IT_Update); <span class="comment">//æ¸…é™¤ä¸­æ–­æ ‡å¿—ä½</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> FreeRTOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello,esp32!</title>
      <link href="/2023/01/03/Hello-ESP32/"/>
      <url>/2023/01/03/Hello-ESP32/</url>
      
        <content type="html"><![CDATA[<h1 id="Helloï¼Œ-esp32ï¼"><a href="#Helloï¼Œ-esp32ï¼" class="headerlink" title="Helloï¼Œ esp32ï¼"></a>Helloï¼Œ esp32ï¼</h1><p>â€‹    ä»Šå¤©ç»ˆäºåœ¨windowsä¸Šé…ç½®å¥½äº†esp32çš„å¼€å‘ç¯å¢ƒï¼Œæ„Ÿè°¢è¿™ä¸ªupä¸»æä¾›çš„æ–¹å¼ã€‚</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://www.bilibili.com/video/BV1QF411u72A/?spm_id_from=333.880.my_history.page.click&amp;vd_source=0f383e93e945bca07eaef9a9ee5d9db3">ä¹é‘«ESP32å®˜æ–¹å¼€å‘ç¯å¢ƒ Espressif IDE ä¸€é”®å®‰è£…æ•™ç¨‹-æ— éœ€æ’ä»¶å’Œæ‰‹åŠ¨é…ç½®_å“”å“©å“”å“©_bilibili</a></p></div><p>â€‹    æˆ‘ä¹‹å‰ä¹Ÿè¯•è¿‡å…¶ä»–çš„å¼€å‘æ–¹å¼ï¼ŒplatformIOå¼€å‘å‘¢å±€é™æ€§æ¯”è¾ƒå¤§ï¼ŒVScodeä¸Šçš„ESpressif IDFå‘¢ä¸€ç›´ä¸‹è½½å¤±è´¥ï¼Œæœ€åä¹Ÿæ²¡æŠ˜è…¾å‡ºæ¥ã€‚åœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹è¿™ä¸ªé…ç½®æ–¹å¼ï¼Œç»“åˆè‡ªå·±é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ã€‚</p><h2 id="IDEå®‰è£…"><a href="#IDEå®‰è£…" class="headerlink" title="IDEå®‰è£…"></a>IDEå®‰è£…</h2><p>å¯ä»¥åœ¨ä¹é‘«å®˜æ–¹çš„Githubä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨è§†é¢‘é‡Œçš„ç™¾åº¦ç½‘ç›˜ä¸‹è½½ã€‚å®‰è£…è¿‡ç¨‹éå¸¸æƒ¬æ„ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€ç‚¹æ³¨æ„äº‹é¡¹ã€‚</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://github.com/espressif/idf-installer#espressif-ide-offline-installer">espressif/idf-installer: ESP IDF Windows Installer (github.com)</a></p></div><p><img src="https://s2.loli.net/2023/01/04/8qiAbfNxI27vupz.png" alt="IDE.png"></p><h2 id="è¿æ¥-amp-çƒ§å½•"><a href="#è¿æ¥-amp-çƒ§å½•" class="headerlink" title="è¿æ¥ &amp; çƒ§å½•"></a>è¿æ¥ &amp; çƒ§å½•</h2><p>â€‹    æˆ‘è¿™ä¸ªæ¿å­ç›´æ¥ç”¨microUSBè¿æ¥è‡³ç”µè„‘ã€‚ä½†æ˜¯æ•°æ®çº¿ä¹Ÿè¦ç”¨ç¨å¾®é è°±çš„ï¼Œæˆ‘ä¸€å¼€å§‹ç”¨çš„ä¿©æ•°æ®çº¿ä¸å¤ªè¡Œï¼Œæ’ä¸Šå»æ¿å­èƒ½å–ç”µï¼Œä½†æ˜¯ç”µè„‘è¯†åˆ«ä¸åˆ°ä¸²å£ã€‚å¦‚æœä¸æ˜¯é©±åŠ¨çš„é—®é¢˜ï¼Œä¼°è®¡å°±æ˜¯çº¿çš„é—®é¢˜ã€‚æ¢äº†ä¸ªçº¿ä¹‹åå°±å¥½äº†ã€‚æˆ‘è¿™é‡Œæ˜¯ <strong>com9</strong></p><p><img src="https://s2.loli.net/2023/01/04/PzNvTuql8oGcIB6.png" alt="espä¸²å£.png" style="zoom:200%;" /></p><p>â€‹    çƒ§å½•çš„æ—¶å€™æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯connectä¸ä¸Šæ¿å­ï¼Œè¿™ä¸ªåœ¨ä¹‹å‰ç”¨PlatformIOçš„æ—¶å€™ä¹Ÿæœ‰ç±»ä¼¼çš„æƒ…å†µï¼Œåªè¦æŒ‰ä½ <strong>boot</strong> é”®çƒ§å½•å°±å¥½äº†ã€‚</p><p><img src="https://s2.loli.net/2023/01/04/Cw9gNGEkP7l3piY.png" alt="connecting.png"></p><h2 id="ä¸²å£é€šè®¯"><a href="#ä¸²å£é€šè®¯" class="headerlink" title="ä¸²å£é€šè®¯"></a>ä¸²å£é€šè®¯</h2><p>â€‹    æ‰“å¼€ç»ˆç«¯ï¼Œå°±å¯ä»¥çœ‹åˆ°æ¿å­å‘é€çš„æ¶ˆæ¯äº†ã€‚ä¸²å£çš„æ³¢ç‰¹ç‡æ²¡æœ‰åœ¨ä»£ç é‡Œçœ‹åˆ°ï¼Œä½†æ˜¯å®æµ‹æ˜¯ <strong>115200</strong>ï¼Œå…¶ä»–ä¸²å£åŠ©æ‰‹ä¹Ÿå¯ä»¥æ¥æ”¶æ¶ˆæ¯ã€‚</p><p><img src="https://s2.loli.net/2023/01/04/tc2jYemq1WxQR87.png" alt="espç»ˆç«¯.png"></p><p><img src="https://s2.loli.net/2023/01/04/vSZ7y2fYiwIphgq.png" alt="espä¸²å£2.png"></p><p>è¿™ä½åšä¸»å¾ˆå‰å®³ï¼Œåœ¨ä¹‹å‰å­¦ä¹ è“ç‰™åè®®æ ˆçš„æ—¶å€™ä¹Ÿæ˜¯è·Ÿç€è¿™ä½åšä¸»å­¦çš„ï¼Œ</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://wlink.blog.csdn.net/article/details/123952643">(15æ¡æ¶ˆæ¯) ä¸€ç¯‡æ–‡ç« è¶³å¤Ÿä½ å­¦ä¹ ESP32ï¼Œæä¾›å²ä¸Šæœ€å…¨çš„ESP32æ•™ç¨‹(é©±åŠ¨/è“ç‰™/Wi-Fi/LVGL/Arduinoâ€¦)_Wireless_Linkçš„åšå®¢-CSDNåšå®¢_esp32</a></p></div>]]></content>
      
      
      
        <tags>
            
            <tag> ESP32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matlab logs</title>
      <link href="/2022/12/29/Matlab-logs/"/>
      <url>/2022/12/29/Matlab-logs/</url>
      
        <content type="html"><![CDATA[<p>â€‹    MATLABå„åŠŸèƒ½ä½¿ç”¨çš„ç®€å•è®°å½•ã€‚</p><h2 id="lsqcurvefitå‚æ•°æ‹Ÿåˆ"><a href="#lsqcurvefitå‚æ•°æ‹Ÿåˆ" class="headerlink" title="lsqcurvefitå‚æ•°æ‹Ÿåˆ"></a>lsqcurvefitå‚æ•°æ‹Ÿåˆ</h2>]]></content>
      
      
      
        <tags>
            
            <tag> MATLAB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PIDæ³¢å½¢ç»˜åˆ¶åŠç§¯åˆ†ä¼˜åŒ–</title>
      <link href="/2022/11/26/PID%E6%B3%A2%E5%BD%A2%E7%BB%98%E5%88%B6%E5%8F%8A%E7%A7%AF%E5%88%86%E4%BC%98%E5%8C%96/"/>
      <url>/2022/11/26/PID%E6%B3%A2%E5%BD%A2%E7%BB%98%E5%88%B6%E5%8F%8A%E7%A7%AF%E5%88%86%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="MATLABä¸²å£ç»˜åˆ¶æ³¢å½¢"><a href="#MATLABä¸²å£ç»˜åˆ¶æ³¢å½¢" class="headerlink" title="MATLABä¸²å£ç»˜åˆ¶æ³¢å½¢"></a>MATLABä¸²å£ç»˜åˆ¶æ³¢å½¢</h2><p>â€‹    å¯¹äº<strong>MATLAB</strong>æˆ‘ä¹Ÿæ˜¯ä¹…ä»°å¤§åï¼Œæœ€è¿‘å®‰è£…äº†ä¸€ä¸ªï¼Œæ„Ÿè§‰åŠŸèƒ½å¾ˆä¸°å¯Œï¼Œä¹Ÿæ¯”è¾ƒæœ‰æ„æ€ã€‚å½“ç„¶æœ¬äººä¹Ÿæ˜¯åˆšå®‰è£…<strong>MABLAB</strong>ä¸ä¹…ï¼Œå¯¹å…¶ç†è§£è¿˜æ˜¯åˆ†æµ…è–„ï¼Œæš‚æ—¶ä¹Ÿåªæ˜¯ä¸€äº›ç®€å•çš„ä½¿ç”¨ã€‚</p><h3 id="å‡½æ•°è¯´æ˜"><a href="#å‡½æ•°è¯´æ˜" class="headerlink" title="å‡½æ•°è¯´æ˜"></a>å‡½æ•°è¯´æ˜</h3><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><h4 id="plot-äºŒç»´ç»˜å›¾"><a href="#plot-äºŒç»´ç»˜å›¾" class="headerlink" title="plot( ) äºŒç»´ç»˜å›¾"></a>plot( ) äºŒç»´ç»˜å›¾</h4><p><a href="https://ww2.mathworks.cn/help/matlab/ref/plot.html">äºŒç»´çº¿å›¾ - MATLAB plot - MathWorks ä¸­å›½</a></p><h4 id="axis-æ˜¾ç¤ºèŒƒå›´"><a href="#axis-æ˜¾ç¤ºèŒƒå›´" class="headerlink" title="axis( ) æ˜¾ç¤ºèŒƒå›´"></a>axis( ) æ˜¾ç¤ºèŒƒå›´</h4><p><a href="https://blog.csdn.net/youshijian99/article/details/80842218">(15æ¡æ¶ˆæ¯) Matlab axiså‡½æ•°_GeekçŒ«çš„åšå®¢-CSDNåšå®¢_matlab axis</a></p><h4 id="grid-æ …æ ¼"><a href="#grid-æ …æ ¼" class="headerlink" title="grid æ …æ ¼"></a>grid æ …æ ¼</h4><p><a href="https://www.mathworks.com/help/matlab/ref/grid.html">Display or hide axes grid lines - MATLAB grid (mathworks.com)</a></p></div><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>æ–°å»ºå‡½æ•°æ–‡ä»¶â€”â€”<strong>Serial.m</strong></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Serial</span><span class="params">()</span>   %åˆ›å»ºå‡½æ•°</span></span><br><span class="line">delete(instrfindall);   <span class="comment">%å…ˆå…³é—­ä¸²å£ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å‡ºé”™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> x            <span class="comment">%å…¨å±€å˜é‡ï¼Œä¾›ä¸²å£ä¸­æ–­å‡½æ•°ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">global</span> t;<span class="comment">%å…¨å±€å˜é‡ï¼Œè¿™é‡Œæ ¹æ®éœ€è¦ç»˜åˆ¶å›¾å½¢çš„ä¸ªäººéœ€è¦è€Œè®¾</span></span><br><span class="line"><span class="keyword">global</span> m;</span><br><span class="line"><span class="keyword">global</span> <span class="built_in">i</span>;</span><br><span class="line"></span><br><span class="line">t = [<span class="number">0</span>];      <span class="comment">%æ—¶é—´è½´</span></span><br><span class="line">m = [<span class="number">0</span>];      <span class="comment">%æ•°æ®è½´</span></span><br><span class="line"><span class="built_in">i</span> = <span class="number">0</span>;        <span class="comment">%ç”¨äºè®¡æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%ä¸²å£å‚æ•°é…ç½®</span></span><br><span class="line">x = serial(<span class="string">&#x27;com3&#x27;</span>);</span><br><span class="line">set(x,<span class="string">&#x27;BaudRate&#x27;</span>,<span class="number">115200</span>);</span><br><span class="line">set(x,<span class="string">&#x27;BytesAvailableFcnMode&#x27;</span>,<span class="string">&#x27;Terminator&#x27;</span>) <span class="comment">%ASCIIè§¦å‘ï¼Œå­—ç¬¦è§¦å‘</span></span><br><span class="line">set(x,<span class="string">&#x27;Terminator&#x27;</span>,<span class="string">&#x27;CR/LF&#x27;</span>)         <span class="comment">%æ¥æ”¶åˆ°\r\nåè§¦å‘ä¸­æ–­</span></span><br><span class="line">x.BytesAvailableFcn = @Callback  <span class="comment">%å®šä¹‰ä¸­æ–­å“åº”å‡½æ•°å¯¹è±¡ï¼Œç±»ä¼¼äºä¸­æ–­å‡½æ•°å</span></span><br><span class="line">fopen(x);</span><br><span class="line">pause</span><br><span class="line">fclose(x);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦å»ºå›è°ƒå‡½æ•°æ–‡ä»¶<strong>Callback.m</strong></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Callback</span><span class="params">(obj,event)</span>   %åˆ›å»ºä¸­æ–­æœåŠ¡å‡½æ•°ï¼Œç»˜åˆ¶å›¾åƒ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> t; <span class="comment">%æ—¶é—´</span></span><br><span class="line"><span class="keyword">global</span> m; <span class="comment">%çºµåæ ‡</span></span><br><span class="line"><span class="keyword">global</span> <span class="built_in">i</span>; <span class="comment">%æ—¶é—´å˜åŒ–å€¼</span></span><br><span class="line"></span><br><span class="line">    out = fscanf(obj);</span><br><span class="line">    data = str2num(out)<span class="comment">%å°†æ¥æ”¶åˆ°çš„å­—ç¬¦è½¬æ¢ä¸ºæ•°å€¼</span></span><br><span class="line">     </span><br><span class="line">     <span class="comment">%%----------------------ä»¥ä¸‹æ ¹æ®éœ€è¦è‡ªè¡Œç¼–å†™-------------------------------</span></span><br><span class="line">    t = [t <span class="built_in">i</span>];</span><br><span class="line">    m = [m data];</span><br><span class="line">    <span class="built_in">plot</span>(t,m)</span><br><span class="line">    xlabel(<span class="string">&#x27;t&#x27;</span>);</span><br><span class="line">    ylabel(<span class="string">&#x27;data&#x27;</span>);</span><br><span class="line">    axis([<span class="built_in">i</span><span class="number">-50</span> <span class="built_in">i</span>+<span class="number">50</span> <span class="number">0</span> <span class="number">1000</span>]);</span><br><span class="line">    grid on;</span><br><span class="line">    <span class="built_in">i</span>=<span class="built_in">i</span>+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ ·å¼é¢„è§ˆ"><a href="#æ ·å¼é¢„è§ˆ" class="headerlink" title="æ ·å¼é¢„è§ˆ"></a>æ ·å¼é¢„è§ˆ</h3><p>å¯ä»¥å‚è€ƒä¸‹æ–‡ã€‚</p><h2 id="ç§¯åˆ†ä¼˜åŒ–"><a href="#ç§¯åˆ†ä¼˜åŒ–" class="headerlink" title="ç§¯åˆ†ä¼˜åŒ–"></a>ç§¯åˆ†ä¼˜åŒ–</h2><h3 id="æ¢¯å½¢ç§¯åˆ†PID"><a href="#æ¢¯å½¢ç§¯åˆ†PID" class="headerlink" title="æ¢¯å½¢ç§¯åˆ†PID"></a>æ¢¯å½¢ç§¯åˆ†PID</h3><p>â€‹    ä»å¾®ç§¯åˆ†çš„è§’åº¦æ¥è¯´ï¼Œå½“å¾®åˆ†åˆ°æ— é™å°æ—¶ï¼ŒçŸ©å½¢ç§¯åˆ†ä¸æ¢¯å½¢ç§¯åˆ†æ˜¯æ²¡æœ‰åŒºåˆ«çš„ã€‚ä½†æ˜¯å®é™…ä¸Šé‡‡æ ·æ—¶é—´ä¸å¯èƒ½æ— ç©·å°ï¼Œé‡‡æ ·å‘¨æœŸè¶Šå¤§ï¼Œåå·®å°±è¶Šå¤§ã€‚è€Œæ¢¯å½¢ç§¯åˆ†åˆ™æ˜¯æ›´åŠ æ¥è¿‘å®é™…æ›²çº¿ï¼Œæ‰€ä»¥ç”¨æ¢¯å½¢ç§¯åˆ†å¯ä»¥å¾—åˆ°æ›´é«˜çš„ç²¾åº¦ã€‚</p><script type="math/tex; mode=display">\int _0^t e(t) \mathrm{d} t = \sum_{i=0}^t \frac{e(i) + e(i-1)}{2}</script><h3 id="ç§¯åˆ†åˆ†ç¦»PID"><a href="#ç§¯åˆ†åˆ†ç¦»PID" class="headerlink" title="ç§¯åˆ†åˆ†ç¦»PID"></a>ç§¯åˆ†åˆ†ç¦»PID</h3><p>åœ¨æ™®é€šçš„PIDæ§åˆ¶ç®—æ³•ä¸­ï¼Œç”±äºç§¯åˆ†ç³»æ•°æ˜¯å¸¸æ•°ï¼Œæ‰€ä»¥åœ¨æ•´ä¸ªæ§åˆ¶è¿‡ç¨‹ä¸­ï¼Œç§¯åˆ†å¢é‡ä¸å˜ã€‚è€Œç³»ç»Ÿå¯¹ç§¯åˆ†é¡¹çš„è¦æ±‚æ˜¯ï¼š<emp>ç³»ç»Ÿåå·®å¤§æ—¶ç§¯åˆ†å‡å¼±ç”šè‡³å…¨æ— ï¼Œåå·®å°æ—¶ç§¯ åˆ†åŠ å¼ºã€‚</emp>ç§¯åˆ†ç³»æ•°å¤§äº†ä¼šäº§ç”Ÿè¶…è°ƒï¼Œå°äº†åˆä¸èƒ½æ¶ˆé™¤é™å·®ã€‚å˜é€Ÿç§¯åˆ†PIDå¯ä»¥æ ¹æ®<strong>ç³»ç»Ÿåå·®å¤§å°</strong>æ”¹å˜ç§¯åˆ†çš„é€Ÿåº¦ã€‚<br>    åœ¨æ™®é€šçš„PIDæ§åˆ¶ç®—æ³•ä¸­ï¼Œå¼•å…¥ç§¯åˆ†ç¯èŠ‚ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†æ¶ˆé™¤é™å·®ã€‚<emp>ä½†åœ¨è¿‡ç¨‹çš„å¯åŠ¨ã€ç»“æŸæˆ–å¤§å¹…åº¦å¢å‡è®¾å®šæ—¶ï¼ŒçŸ­æ—¶é—´å†…ç³»ç»Ÿè¾“å‡ºæœ‰å¾ˆå¤§çš„åå·®ï¼Œ</emp>ä¼šé€ æˆPIDè¿ç®—çš„ç§¯åˆ†ç§¯ç´¯ï¼Œä½¿æ§åˆ¶é‡è¶…è¿‡å¯èƒ½å…è®¸çš„æœ€å¤§åŠ¨ä½œèŒƒå›´å¯¹åº”çš„æé™æ§åˆ¶é‡ï¼Œå¼•èµ·ç³»ç»Ÿè¾ƒå¤§çš„è¶…è°ƒï¼Œç”šè‡³å¼•èµ·è¾ƒå¤§çš„æŒ¯è¡ã€‚ç§¯åˆ†åˆ†ç¦»PIDå¯ä»¥è¾ƒå¥½åœ°è§£å†³è¿™â¼€é—®é¢˜ã€‚</p><h4 id="åŸºæœ¬æ€æƒ³"><a href="#åŸºæœ¬æ€æƒ³" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h4><p>â€‹    æ€è·¯æ˜¯åå·®å€¼è¾ƒå¤§æ—¶ï¼Œå–æ¶ˆç§¯åˆ†ä½œç”¨ï¼Œä»¥å…è¶…è°ƒé‡å¢å¤§ï¼›è€Œåå·®å€¼è¾ƒå°æ—¶ï¼Œå¼•å…¥ç§¯åˆ†ä½œç”¨ï¼Œä»¥ä¾¿æ¶ˆé™¤é™å·®ï¼Œæâ¾¼æ§åˆ¶ç²¾åº¦ã€‚<br>å…·ä½“çš„å®ç°æ­¥éª¤æ˜¯ï¼šæ ¹æ®å®é™…æƒ…å†µï¼Œè®¾å®šâ¼€ä¸ªé˜ˆå€¼</p><ul><li>å½“åå·®å¤§äºé˜ˆå€¼æ—¶ï¼Œæ¶ˆé™¤ç§¯åˆ†ä»…ç”¨PDæ§åˆ¶ï¼›</li><li>å½“åå·®å°äºç­‰äºé˜ˆå€¼æ—¶ï¼Œå¼•â¼Šç§¯åˆ†é‡‡â½¤PIDæ§åˆ¶ã€‚</li></ul><h4 id="ç§¯åˆ†é¡¹è¡¨è¾¾å¼"><a href="#ç§¯åˆ†é¡¹è¡¨è¾¾å¼" class="headerlink" title="ç§¯åˆ†é¡¹è¡¨è¾¾å¼"></a>ç§¯åˆ†é¡¹è¡¨è¾¾å¼</h4><script type="math/tex; mode=display">U_i(k) = \beta K_i\sum_{j=0}^{k-1}e(j)</script><p>å…¶ä¸­<em>Î²</em>ç§°ä¸º<strong>ç§¯åˆ†å¼€å…³ç³»æ•°</strong></p><script type="math/tex; mode=display">\beta = \begin{cases}1, & |e(k)| \leq \varepsilon \\ 0, & |e(k)| > \varepsilon\end{cases}</script><p>ç”±ä¸Šè¿°è¡¨è¿°åŠå…¬å¼æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œç§¯åˆ†åˆ†ç¦»ç®—æ³•çš„æ•ˆæœå…¶å®ä¸<strong>Îµ</strong>å€¼çš„é€‰å–æœ‰å¾ˆå¤§çš„å…³ç³»ï¼Œæ‰€ä»¥Îµå€¼çš„é€‰å–æ˜¯å®ç°çš„éš¾ç‚¹</p><ul><li><p>Îµå€¼è¿‡å¤§åˆ™è¾¾ä¸åˆ°ç§¯åˆ†åˆ†ç¦»çš„æ•ˆæœ</p></li><li><p>Îµå€¼è¿‡å°åˆ™éš¾ä»¥è¿›å…¥ç§¯åˆ†åŒºã€‚</p></li></ul><h3 id="å˜é€Ÿç§¯åˆ†PID"><a href="#å˜é€Ÿç§¯åˆ†PID" class="headerlink" title="å˜é€Ÿç§¯åˆ†PID"></a>å˜é€Ÿç§¯åˆ†PID</h3><h4 id="åŸºæœ¬æ€æƒ³-1"><a href="#åŸºæœ¬æ€æƒ³-1" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h4><p>å˜é€Ÿç§¯åˆ†PIDçš„åŸºæœ¬æ€æƒ³æ˜¯<emp>è®¾æ³•æ”¹å˜ç§¯åˆ†é¡¹çš„ç´¯åŠ é€Ÿåº¦ï¼Œä½¿å…¶ä¸åå·®å¤§å°ç›¸å¯¹åº”ã€‚</emp></p><ul><li>åå·®è¶Šå¤§ï¼Œç§¯åˆ†è¶Šæ…¢ï¼›</li><li>åå·®è¶Šå°åˆ™è¶Šå¿«ã€‚</li></ul><p>ä¸ºæ­¤ï¼Œè®¾ç½®ç³»æ•°<strong>f(e(k))</strong> ï¼Œå®ƒæ˜¯<strong>e(k)</strong>çš„å‡½æ•°ã€‚å½“<strong>e(k)</strong>å¢å¤§æ—¶ï¼Œ <strong>f</strong>å‡å°ï¼Œåä¹‹å¢å¤§ã€‚</p><h4 id="ç§¯åˆ†é¡¹è¡¨è¾¾å¼-1"><a href="#ç§¯åˆ†é¡¹è¡¨è¾¾å¼-1" class="headerlink" title="ç§¯åˆ†é¡¹è¡¨è¾¾å¼"></a>ç§¯åˆ†é¡¹è¡¨è¾¾å¼</h4><script type="math/tex; mode=display">U_i(k) = K_i[\sum_{j=0}^{k-1} + f(e(k))*e(k) ]</script><p><strong>f(e(k))</strong>å¯æ ¹æ®å…·ä½“æƒ…å†µè®¾å®šï¼Œæ¯”è¾ƒç®€å•çš„è®¾ç½®ä¸ºï¼š</p><script type="math/tex; mode=display">f(e(k)) = \begin{cases}1, & |e(k)| \leq B \\\frac{A - |e(k)| + B}{A}, & B < |e(k)| \leq A + B \\0, & |e(k)| > A + B\end{cases}</script><p>ç”±ä¸Šè¿°å…¬å¼å¯çŸ¥ï¼Œ<strong>f(e(k))</strong>çš„å€¼åœ¨[0,1]åŒºé—´å˜åŒ–ã€‚</p><ul><li><p>å½“åå·®å€¼<strong>e(k)</strong>å¤§äºåˆ†ç¦»åŒºé—´<strong>A + B</strong>æ—¶ï¼Œä¸å¯¹å½“å‰<strong>e(k)</strong>è¿›è¡Œç´¯åŠ ï¼›</p></li><li><p>å½“åå·®å€¼<strong>e(k)</strong>å°äº<strong>B</strong>æ—¶ï¼ŒåŠ å…¥å½“å‰åå·®<strong>e(k)</strong>è¿›è¡Œç´¯åŠ ï¼›</p></li><li><p>ä»‹äº<strong>B</strong>å’Œ<strong>A + B</strong>ä¹‹é—´æ—¶ï¼ŒæŒ‰ä¸€å®šå‡½æ•°å…³ç³»å˜åŒ–ã€‚</p></li></ul><p>è¿™ç§ç®—æ³•å¯¹Aï¼ŒBä¸¤ä¸ªå‚æ•°çš„è¦æ±‚ä¸ç²¾ç¡®ï¼Œå‚æ•°æ•´å®šè¾ƒå®¹æ˜“ã€‚ </p><h4 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> __<span class="title">PID_t</span>&#123;</span></span><br><span class="line">    <span class="type">float</span> target;</span><br><span class="line">    <span class="type">float</span> actual;</span><br><span class="line">    <span class="type">float</span> dead_zone;</span><br><span class="line">    <span class="type">float</span> Kp, Ki, Kd;</span><br><span class="line">    <span class="type">float</span> last_error, pre_error, sum_error;</span><br><span class="line">    <span class="type">float</span> I_MAX;</span><br><span class="line">    <span class="type">float</span> P_out, I_out, D_out, D_last_out;</span><br><span class="line">    <span class="type">float</span> out_MAX, out, out_last;</span><br><span class="line">    <span class="type">float</span> I_up, I_low;</span><br><span class="line">    <span class="type">float</span> RC_DF;</span><br><span class="line">&#125;PID_t;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(ABS(p-&gt;pre_error) &lt; P-&gt;I_low)</span><br><span class="line">&#123;</span><br><span class="line">    p-&gt;sum_error += (p-&gt;pre_error + p-&gt;last_error)/<span class="number">2</span>;</span><br><span class="line">    p-&gt;sum_error = limit(p-&gt;sum_error, p-&gt;I_MAX, -p-&gt;I_MAX);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ABS(p-&gt;pre_error) &lt; p-&gt;I_up)</span><br><span class="line">&#123;</span><br><span class="line">    p-&gt;sum_error += ((ABS(p-&gt;pre_error) - p-&gt;I_low)/(p-&gt;I_up - p-&gt;I_low)) * ((p-&gt;last_error + p-&gt;pre_error)/<span class="number">2</span>);</span><br><span class="line">    p-&gt;sum_error = limit(p-&gt;sum_error, p-&gt;I_MAX, -p-&gt;I_MAX);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶å®šä¹‰çš„æ˜¯<strong>I_up,I_low</strong>, ä½†æ˜¯å®é™…ä¸Šè¿™æ˜¯ä¸<strong>error</strong>ç›¸æ¯”è¾ƒçš„</p><h2 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h2><p>Kp = 350<img src="https://s2.loli.net/2022/11/27/JFxsQNWeq4nuVEP.png" alt="Kp350.png"></p><p>ki = 120</p><p><img src="https://s2.loli.net/2022/11/27/zjaUvYJpVNBcbif.png" alt="Kp350Ki120.png"></p><p>Kd = 100</p><p><img src="https://s2.loli.net/2022/11/27/rZwV9psKjQ8toIJ.png" alt="Kd80.png"></p><p>Kd = 80, up = 80, low = 50</p><p><img src="https://s2.loli.net/2022/11/27/RsTAucIzvqlJtpk.png" alt="up80low50.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> æ§åˆ¶æ–¹æ³• </tag>
            
            <tag> PID </tag>
            
            <tag> MATLAB </tag>
            
            <tag> USART </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>D-Hå‚æ•°æ³•ä¸æœºæ¢°è‡‚æ­£é€†è§£</title>
      <link href="/2022/11/20/D-H%E5%8F%82%E6%95%B0%E6%B3%95%E6%9C%BA%E6%A2%B0%E8%87%82%E6%AD%A3%E9%80%86%E8%A7%A3/"/>
      <url>/2022/11/20/D-H%E5%8F%82%E6%95%B0%E6%B3%95%E6%9C%BA%E6%A2%B0%E8%87%82%E6%AD%A3%E9%80%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="D-Hå‚æ•°æ³•"><a href="#D-Hå‚æ•°æ³•" class="headerlink" title="D-Hå‚æ•°æ³•"></a>D-Hå‚æ•°æ³•</h1><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://blog.csdn.net/maple_2014/article/details/105612912">(14æ¡æ¶ˆæ¯) ä¸€æ–‡å¸¦ä½ å®Œå…¨æŒæ¡æœºå™¨äººDHå‚æ•°å»ºæ¨¡(è¯¦ç»†æ­¥éª¤+å®ä¾‹+ä»£ç )_Marc Ponyçš„åšå®¢-CSDNåšå®¢_dhå»ºæ¨¡</a></p></div><h2 id="åæ ‡å˜æ¢çŸ©é˜µ"><a href="#åæ ‡å˜æ¢çŸ©é˜µ" class="headerlink" title="åæ ‡å˜æ¢çŸ©é˜µ"></a>åæ ‡å˜æ¢çŸ©é˜µ</h2><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://blog.csdn.net/weixin_44097528/article/details/122182393">(14æ¡æ¶ˆæ¯) è¯¦è§£åæ ‡å˜æ¢çŸ©é˜µ_Akinazeçš„åšå®¢-CSDNåšå®¢_åæ ‡å˜æ¢çŸ©é˜µ</a></p></div><h2 id="D-Hå‚æ•°"><a href="#D-Hå‚æ•°" class="headerlink" title="D-Hå‚æ•°"></a>D-Hå‚æ•°</h2><p>â€‹    ä¸€èˆ¬æ¥è¯´ï¼Œæƒ³è¦å¾—åˆ°ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„å˜æ¢çŸ©é˜µï¼Œéœ€è¦çŸ¥é“å…­ä¸ªé‡ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨<strong>D-H</strong>å‚æ•°æ³•æ—¶ï¼Œéœ€è¦æŒ‰ç…§ç‰¹å®šæ–¹å¼å»ºç«‹åæ ‡ç³»ï¼Œä¾æ‰˜äºè¿™äº›<em>â€œå‰æçº¦æŸâ€</em>ï¼Œæˆ‘ä»¬åªéœ€è¦4ä¸ªå‚æ•°ä¾¿å¯ä»¥å¾—å‡ºä¸¤åæ ‡ç³»ä¹‹é—´çš„å˜æ¢çŸ©é˜µã€‚</p><p>å…ˆè¦ç†è§£åæ ‡ç³»çš„<strong>å»ºç«‹è§„å®š</strong></p><blockquote><ul><li><p><strong>zè½´</strong>çš„æ–¹å‘å‚ç›´äºæ—‹è½¬é¢ï¼Œå³ä¸º<strong>è½¬è½´</strong>;</p></li><li><p><strong>x[i]</strong>æ–¹å‘çš„ç¡®å®šï¼šåŒæ—¶å‚ç›´äºz[i]ä¸z[i-1];</p></li></ul></blockquote><p>ä¾æ®è¿™æ ·çš„è§„å®šï¼Œå¯ä»¥å‘ç°ï¼š</p><blockquote><ul><li><p>z[i-1]<strong>åŒæ—¶å‚ç›´</strong>äºx[i-1]ä¸x[i];</p></li><li><p>x[i]<strong>åŒæ—¶å‚ç›´</strong>äºz[i-1]ä¸z[i];</p></li></ul></blockquote><p>ç”±æ­¤ï¼Œ<strong>z[i-1]å’Œx[i]</strong>ä¾¿æˆäº†è¿æ¥åæ ‡ç³»[i-1]å’Œåæ ‡ç³»[i]çš„é‡è¦å‚è€ƒã€‚å†çœ‹å››ä¸ªå‚æ•°çš„å®šä¹‰</p><div class="note blue icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><ul><li><strong>d[i]</strong>:åæ ‡è½´x[i-1]ä¸åæ ‡è½´x[i]æ²¿ç€<strong>z[i-1]</strong>çš„æœ‰å‘è·ç¦»ï¼›</li><li><strong>Î¸[i]</strong>:åæ ‡è½´x[i-1]ä¸åæ ‡è½´x[i]ä»¥<strong>z[i-1]</strong>ä¸ºè½¬è½´çš„æ—‹è½¬è§’(é€†æ—¶é’ˆï¼Œxiåœ¨å‰ä¸ºæ­£ï¼Œæˆ–è€…è¯´ä»x0è½¬åˆ°x1çš„è§’åº¦)ï¼›</li><li><strong>a[i]</strong>:åæ ‡è½´z[i-1]ä¸åæ ‡è½´z[i]æ²¿ç€<strong>x[i]</strong>çš„æœ‰å‘è·ç¦»ï¼›</li><li><strong>Î±[i]</strong>:åæ ‡è½´z[i-1]ä¸åæ ‡è½´z[i]ä»¥<strong>x[i]</strong>ä¸ºè½¬è½´çš„æ—‹è½¬è§’ï¼›</li></ul></div><h2 id="æ­£å‘æ±‚è§£"><a href="#æ­£å‘æ±‚è§£" class="headerlink" title="æ­£å‘æ±‚è§£"></a>æ­£å‘æ±‚è§£</h2><p>åœ¨å·²çŸ¥å„å…³èŠ‚è§’åº¦çš„æ¡ä»¶ä¸‹ï¼Œæ±‚å‡ºæœºæ¢°è‡‚æœ«ç«¯çš„åæ ‡ã€‚</p><p>ç”±<strong>D-H</strong>å‚æ•°å¯ä»¥å¾—åˆ°åæ ‡ç³»å˜æ¢çŸ©é˜µï¼ˆå°†å…¶è®°ä½œ<strong>$T_i$</strong>ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{bmatrix}x_{i-1} \\ y_{i-1} \\ z_{i-1} \\ 1\end{bmatrix}= \begin{bmatrix} \cos{Î¸_i} & -\sin{Î¸_i} \cos{\alpha_i} & \sin{Î¸_i}\sin{\alpha_i} & a_i\cos{Î¸_i} \\\sin{Î¸_i} & \cos{Î¸_i} \cos{\alpha_i} & -\cos{Î¸_i}\sin{\alpha_i} & a_i\sin{Î¸_i} \\ 0 & \sin{\alpha_i} & \cos{\alpha_i} & d_i \\ 0 & 0 & 0 & 1\end{bmatrix}\begin{bmatrix}x_{i} \\ y_{i} \\z_{i} \\ 1\end{bmatrix}</script><p>â€‹    ä»£å…¥<strong>i</strong>ç³»çš„ç‚¹$(x_i,y_i,z_i)$ï¼Œå·¦ä¹˜å˜æ¢çŸ©é˜µ$T_i$ï¼Œå¾—åˆ°è¿™ä¸ªç‚¹åœ¨<strong>i-1</strong>ç³»çš„åæ ‡ã€‚ç”±æ­¤ï¼Œå°†æœ«ç«¯åæ ‡$C_n$ä¸æ–­å·¦ä¹˜å„å˜æ¢çŸ©é˜µï¼Œä¾¿å¯ä»¥é€’æ¨å‡ºå…¶åœ¨ç¬¬ä¸€ä¸ªåæ ‡ç³»çš„åæ ‡$C_0$ã€‚</p><script type="math/tex; mode=display">C_0 = T_1 T_2 \cdots T_{n-1} T_n C_n</script><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>ä¸»è¦å°±æ˜¯ä¸¤ä¸ªéƒ¨åˆ†</p><blockquote><ul><li>çŸ©é˜µ<strong>Matrix</strong>çš„æ„å»ºåŠå…¶è¿ç®—</li><li>æœºæ¢°è‡‚<strong>robotic_arm</strong>çš„æ„å»ºåŠåŸºæœ¬åŠŸèƒ½</li></ul></blockquote><p>â€‹    éƒ½æ˜¯ç›´æ¥æ¨¡æ‹Ÿæ‰‹ç®—è¿‡ç¨‹ï¼ŒçŸ©é˜µç›¸ä¹˜çš„æ—¶é—´å¤æ‚åº¦æ˜¯<strong>O(mnk)</strong>ï¼Œä¸‰æ¬¡æ–¹é‡çº§çš„ï¼Œå¥½åœ¨çŸ©é˜µè§„æ¨¡éƒ½æ¯”è¾ƒå°ã€‚</p><h4 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> __<span class="title">Matrix_t</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> m;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">double</span> matrix[Matrix_MX][Matrix_MX];</span><br><span class="line">&#125;Matrix_t;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief </span></span><br><span class="line"><span class="comment"> * @param</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> __<span class="title">robotic_arm_t</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> n;<span class="comment">//number of nodes</span></span><br><span class="line">    <span class="type">float</span> d[arm_MX_nodes],a[arm_MX_nodes];</span><br><span class="line">    <span class="type">double</span> theta[arm_MX_nodes],alpha[arm_MX_nodes];</span><br><span class="line">    Matrix_t *T[arm_MX_nodes];</span><br><span class="line"></span><br><span class="line">&#125;<span class="type">robotic_arm_t</span>;</span><br></pre></td></tr></table></figure><h4 id="æœºæ¢°è‡‚åˆå§‹åŒ–"><a href="#æœºæ¢°è‡‚åˆå§‹åŒ–" class="headerlink" title="æœºæ¢°è‡‚åˆå§‹åŒ–"></a>æœºæ¢°è‡‚åˆå§‹åŒ–</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief </span></span><br><span class="line"><span class="comment"> * @param n the number of the nodes</span></span><br><span class="line"><span class="comment"> * @param d D-H parameters</span></span><br><span class="line"><span class="comment"> * @param a D-H parameters</span></span><br><span class="line"><span class="comment"> * @param theta D-H parameters</span></span><br><span class="line"><span class="comment"> * @param alpha D-H parameters</span></span><br><span class="line"><span class="comment"> * @return robotic_arm_t* </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">robotic_arm_t</span> *<span class="title function_">robotic_arm_init</span><span class="params">(<span class="type">int</span> n, <span class="type">float</span> *d, <span class="type">float</span> *a, <span class="type">double</span> *theta, <span class="type">double</span> *alpha)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">robotic_arm_t</span> *arm;</span><br><span class="line">    arm = (<span class="type">robotic_arm_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">robotic_arm_t</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    arm-&gt;T[i] = (Matrix_t*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Matrix_t));</span><br><span class="line"></span><br><span class="line">    arm-&gt;n = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        arm-&gt;d[i] = d[i];</span><br><span class="line">        arm-&gt;a[i] = a[i];</span><br><span class="line">        arm-&gt;alpha[i] = alpha[i];</span><br><span class="line">        arm-&gt;theta[i] = theta[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    get_Trans(arm);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘è¿™é‡Œæ„å»ºçš„æ¨¡å‹</p><p><img src="https://s2.loli.net/2022/11/23/FJehTzpxDroZPBg.jpg" alt="robotic_arm.jpg" style="zoom:50%;" /></p><div class="table-container"><table><thead><tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>d</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>Î¸</td><td>0</td><td>$\omega_0$</td><td>-$\omega_1$</td><td>$\frac{\Pi}{2} - \omega_2$</td></tr><tr><td>Î±</td><td>0</td><td>$-\frac{\Pi}{2}$</td><td>0</td><td>0</td></tr><tr><td>a</td><td>0</td><td>0</td><td>10</td><td>10</td></tr></tbody></table></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> test_d[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,test_a[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">10</span>&#125;;</span><br><span class="line"><span class="type">double</span> test_theta[<span class="number">4</span>]=&#123;<span class="number">0</span>&#125;,test_alpha[<span class="number">4</span>]=&#123;<span class="number">0</span>,-PI/<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">test_arm = robotic_arm_init(<span class="number">3</span>,test_d,test_a,test_theta,test_alpha);</span><br></pre></td></tr></table></figure><p>$\omega$ä¸ºå…³èŠ‚ï¼ˆèˆµæœºï¼‰è§’åº¦ï¼Œä»¥å›¾ä¸­çŠ¶æ€ä½œä¸ºåˆå§‹å€¼ï¼Œè®¤ä¸ºæ­¤æ—¶å…³èŠ‚ï¼ˆèˆµæœºï¼‰è§’åº¦ä¸º0ã€‚æ‰€ä»¥è¿˜æœ‰ä¸€ä¸ªç”±å…³èŠ‚è§’åº¦åˆ°DHå‚æ•°çš„è½¬æ¢å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æ ¹æ®æœºæ¢°è‡‚å…·ä½“æƒ…å†µå…·ä½“ä¿®æ”¹äº†ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">DH_update</span><span class="params">(<span class="type">robotic_arm_t</span> *arm, <span class="type">double</span> *servo)</span></span><br><span class="line">&#123;</span><br><span class="line">    arm-&gt;theta[<span class="number">1</span>] =  servo[<span class="number">0</span>];</span><br><span class="line">    arm-&gt;theta[<span class="number">2</span>] = -servo[<span class="number">1</span>];</span><br><span class="line">    arm-&gt;theta[<span class="number">3</span>] =  PI/<span class="number">2</span>-servo[<span class="number">2</span>];</span><br><span class="line">    get_Trans(arm);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è®¡ç®—è½¬ç§»çŸ©é˜µT"><a href="#è®¡ç®—è½¬ç§»çŸ©é˜µT" class="headerlink" title="è®¡ç®—è½¬ç§»çŸ©é˜µT"></a>è®¡ç®—è½¬ç§»çŸ©é˜µT</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Get the Transparent Matrix relay on the current arm state</span></span><br><span class="line"><span class="comment"> * @param arm </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">get_Trans</span><span class="params">(<span class="type">robotic_arm_t</span> *arm)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=arm-&gt;n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        arm-&gt;T[i]-&gt;m=<span class="number">4</span>, arm-&gt;T[i]-&gt;n=<span class="number">4</span>;</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">0</span>][<span class="number">0</span>] =  <span class="built_in">cos</span>(arm-&gt;theta[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">0</span>][<span class="number">1</span>] = -<span class="built_in">sin</span>(arm-&gt;theta[i])*<span class="built_in">cos</span>(arm-&gt;alpha[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">0</span>][<span class="number">2</span>] =  <span class="built_in">sin</span>(arm-&gt;theta[i])*<span class="built_in">sin</span>(arm-&gt;alpha[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">0</span>][<span class="number">3</span>] =  arm-&gt;a[i]*<span class="built_in">cos</span>(arm-&gt;theta[i]);</span><br><span class="line"></span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">1</span>][<span class="number">0</span>] =  <span class="built_in">sin</span>(arm-&gt;theta[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">1</span>][<span class="number">1</span>] =  <span class="built_in">cos</span>(arm-&gt;theta[i])*<span class="built_in">cos</span>(arm-&gt;alpha[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">1</span>][<span class="number">2</span>] = -<span class="built_in">cos</span>(arm-&gt;theta[i])*<span class="built_in">sin</span>(arm-&gt;alpha[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">1</span>][<span class="number">3</span>] =  arm-&gt;a[i]*<span class="built_in">sin</span>(arm-&gt;theta[i]);</span><br><span class="line"></span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">2</span>][<span class="number">0</span>] =  <span class="number">0</span>;</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">2</span>][<span class="number">1</span>] =  <span class="built_in">sin</span>(arm-&gt;alpha[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">2</span>][<span class="number">2</span>] =  <span class="built_in">cos</span>(arm-&gt;alpha[i]);</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">2</span>][<span class="number">3</span>] =  arm-&gt;d[i];</span><br><span class="line"></span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">3</span>][<span class="number">0</span>] =  <span class="number">0</span>;</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">3</span>][<span class="number">1</span>] =  <span class="number">0</span>;</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">3</span>][<span class="number">2</span>] =  <span class="number">0</span>;</span><br><span class="line">        arm-&gt;T[i]-&gt;matrix[<span class="number">3</span>][<span class="number">3</span>] =  <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­£å‘æ±‚è§£-1"><a href="#æ­£å‘æ±‚è§£-1" class="headerlink" title="æ­£å‘æ±‚è§£"></a>æ­£å‘æ±‚è§£</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Get the coordinates of the point in the end coordinate system in the main coordinate system</span></span><br><span class="line"><span class="comment"> *        Suppose the main coordinate system&#x27;s number is 0</span></span><br><span class="line"><span class="comment"> *        å¾—åˆ°æœ«ç«¯åæ ‡ç³»ä¸­çš„ä¸€ä¸ªç‚¹åœ¨ä¸»åæ ‡ç³»ä¸­çš„åæ ‡,å‡è®¾ä¸»åæ ‡ç³»ç¼–å·ä¸º0</span></span><br><span class="line"><span class="comment"> * @param arm </span></span><br><span class="line"><span class="comment"> * @param point </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">foward_solve</span><span class="params">(<span class="type">robotic_arm_t</span> *arm, Matrix_t *point)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=arm-&gt;n; i&gt;<span class="number">0</span>; i--)</span><br><span class="line">    *point = multiply_matrix2(arm-&gt;T[i],point);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€†å‘æ±‚è§£"><a href="#é€†å‘æ±‚è§£" class="headerlink" title="é€†å‘æ±‚è§£"></a>é€†å‘æ±‚è§£</h2><p>â€‹    é’ˆå¯¹äºæˆ‘æ‰‹ä¸Šçš„æœºæ¢°è‡‚ï¼Œç›´æ¥é‡‡ç”¨å‡ ä½•æ³•åˆ†æã€‚å¯æ˜¯æ–¹ç¨‹æˆ‘è§£ä¸å‡ºæ¥ğŸ˜‚ï¼Œäºæ˜¯å°†å…¶ç¨å¾®å˜å½¢ï¼Œåˆ©ç”¨<strong>äºŒåˆ†æ³•</strong>ä¹Ÿèƒ½è¿…é€Ÿæ±‚å¾—ç¬¦åˆç²¾åº¦è¦æ±‚çš„è§£ã€‚</p><p><img src="https://s2.loli.net/2022/11/23/ksmLN1CvphgzIEj.jpg" alt="å‡ ä½•é€†è§£.jpg" style="zoom:50%;" /></p><div class="note blue icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å…·ä½“äºŒåˆ†çš„æ€è·¯å°±æ˜¯<strong>alpha</strong>è¶Šå¤§ï¼Œæœºæ¢°è‡‚ä¼¸å¾—è¶ŠçŸ­ï¼Œ<strong>alpha</strong>è¶Šå°ï¼Œä¼¸å¾—è¶Šé•¿ã€‚æ¯”è¾ƒä¼¸çš„é•¿çŸ­æ˜¯å¦åˆ°è¾¾</p></div><h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Use the dichotomy method to find the angle of each joint according to the target coordinates </span></span><br><span class="line"><span class="comment"> *        ç”¨äºŒåˆ†æ³•æ ¹æ®ç›®æ ‡åæ ‡æ±‚å‡ºå…³èŠ‚è§’åº¦ã€‚ï¼ˆä½¿ç”¨äº†å‡ ä½•æ³•ï¼Œä»…é€‚ç”¨äºç‰¹å®šæœºæ¢°è‡‚ï¼‰</span></span><br><span class="line"><span class="comment"> *        æ ¹æ®æœ«ç«¯æœºæ¢°æ‰‹ä½å§¿æ±‚å‡ºæœ€åä¸€ä¸ªå…³èŠ‚çš„åæ ‡(è¿™ä¸€æ­¥è¿˜æ²¡å®ç°)ï¼Œç”±æ­¤è®¡ç®—å…¶ä½™å…³èŠ‚è§’åº¦ã€‚</span></span><br><span class="line"><span class="comment"> * @param arm è‡ªå·±çš„æœºæ¢°è‡‚ï¼Œéé€šè§£</span></span><br><span class="line"><span class="comment"> * @param point æœ€åä¸€ä¸ªå…³èŠ‚çš„åæ ‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">reverse_solve_dichonomy</span><span class="params">(<span class="type">robotic_arm_t</span> *arm, Matrix_t point)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> angle0, angle1, angle2, alpha_l=<span class="number">0</span>, alpha_r=PI, alpha_mid, beta, theta, len_xy, x, y, z, l1, l2, d;</span><br><span class="line">    x = point.matrix[<span class="number">0</span>][<span class="number">0</span>], y = point.matrix[<span class="number">1</span>][<span class="number">0</span>], z = point.matrix[<span class="number">2</span>][<span class="number">0</span>] - arm-&gt;d[<span class="number">1</span>];</span><br><span class="line">    d = <span class="built_in">sqrt</span>(x*x + y*y + z*z);</span><br><span class="line">    l1 = arm-&gt;a[<span class="number">2</span>], l2 = arm-&gt;a[<span class="number">3</span>];</span><br><span class="line">    len_xy = <span class="built_in">sqrt</span>(x*x + y*y);</span><br><span class="line">    <span class="keyword">if</span>(len_xy == <span class="number">0</span>) &#123;theta = PI/<span class="number">2</span>;&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;theta = <span class="built_in">atan</span>(z/len_xy);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(alpha_r-alpha_l &gt; <span class="number">0.00175</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        alpha_mid = (alpha_l+alpha_r)/<span class="number">2</span>;</span><br><span class="line">        beta = <span class="built_in">asin</span>(<span class="built_in">sin</span>(alpha_mid)*l1/l2);</span><br><span class="line">        <span class="keyword">if</span>(l1*<span class="built_in">cos</span>(alpha_mid) + l2*<span class="built_in">cos</span>(beta) &gt; d)</span><br><span class="line">        &#123;alpha_l = alpha_mid;&#125;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;alpha_r = alpha_mid;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x == <span class="number">0</span>) &#123;angle0 = PI/<span class="number">2</span>;&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;angle0 = <span class="built_in">atan</span>(y/x);&#125;</span><br><span class="line">    angle1 = theta - alpha_mid;</span><br><span class="line">    angle2 = alpha_mid + beta + PI/<span class="number">2</span>;</span><br><span class="line">    arm-&gt;theta[<span class="number">1</span>] =  angle0;</span><br><span class="line">    arm-&gt;theta[<span class="number">2</span>] = -angle1;</span><br><span class="line">    arm-&gt;theta[<span class="number">3</span>] = PI/<span class="number">2</span> - angle2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä¹Ÿå°è¯•äº†ä½¿ç”¨MATLABè§£æ–¹ç¨‹ï¼Œå¾—å‡ºçš„ç»“æœååˆ†çš„å¤æ‚ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ç›´æ¥ç”¨äºŒåˆ†æ³•æ¯”è¾ƒå¥½ã€‚</p><p><img src="https://s2.loli.net/2022/11/24/EtFa9Bnypj4YwlZ.png" alt="MATLAB.png"></p><h1 id="ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•"><a href="#ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•" class="headerlink" title="ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•"></a>ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•</h1><p>â€‹    åœ¨ä¹‹å‰çš„é€†è§£è¿‡ç¨‹ä¸­ï¼Œåªèƒ½é’ˆå¯¹å•ä¸ªæœºæ¢°è‡‚çš„å‡ ä½•ç‰¹å¾å•ç‹¬æ±‚è§£ï¼Œä¸å…·æœ‰æ³›ç”¨æ€§ã€‚è€Œä¸”ä»¥æˆ‘çš„æ•°å­¦æ°´å¹³ä¹Ÿåªèƒ½æ±‚è§£ç»“æ„ç®€å•çš„æœºæ¢°è‡‚ğŸ¤£ï¼Œå½“å…³èŠ‚æ•°å¢åŠ ç”šè‡³å†—ä½™æ—¶ï¼Œæ— æ³•ç›´æ¥ç”¨æ•°å­¦æ–¹æ³•æ±‚è§£ï¼Œæˆ–è€…è¯´æ˜¯å¤šè§£ã€‚æ‰€ä»¥å°è¯•é‡‡ç”¨<strong>ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•(Particle Swarm Optimization, PSO)</strong>æ¥å®ç°ä¸€ç§é€šç”¨çš„è§£æ³•ã€‚</p><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://zhuanlan.zhihu.com/p/346355572">ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•(Particle Swarm Optimization, PSO)çš„è¯¦ç»†è§£è¯» - çŸ¥ä¹ (zhihu.com)</a></p></div><p>è¿™ä½å¤§ä½¬å†™å¾—éå¸¸è¯¦ç»†ï¼Œæˆ‘è¿™é‡Œæ˜¯ä½¿ç”¨cè¯­è¨€å®ç°çš„ï¼Œå¹¶å°†å…¶ç”¨åœ¨äº†æœºæ¢°è‡‚é€†è§£ä¸Šé¢ã€‚</p><h2 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h3><ul><li>ç²’å­ç¾¤åˆå§‹åŒ–åŠå„ç²’å­éšæœºåˆå§‹åŒ–</li><li>å¼€å§‹è¿­ä»£<ul><li>è®¡ç®—é€‚åº”å€¼</li><li>æ›´æ–°ä¸ªä½“åŠç¾¤ä½“æœ€ä¼˜è§£ä¸æœ€ä¼˜é€‚åº”å€¼</li><li>æ›´æ–°wå€¼ï¼Œç²’å­é€Ÿåº¦ï¼Œç²’å­ä½ç½®</li></ul></li><li>ç»“æŸè¿­ä»£</li><li>è¿”å›å¯»å¾—çš„æœ€ä¼˜è§£</li></ul><h3 id="ç»“æ„ä½“-1"><a href="#ç»“æ„ä½“-1" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h3><p>çœ‹å®Œä¸Šé¢çš„åšå®¢ä¹‹åï¼Œæƒ³å¿…è¿™äº›å®šä¹‰æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief </span></span><br><span class="line"><span class="comment"> * @param X current state ç›®å‰åæ ‡ï¼ˆè§£ï¼‰</span></span><br><span class="line"><span class="comment"> * @param V current velocity ç›®å‰é€Ÿåº¦</span></span><br><span class="line"><span class="comment"> * @param opt_X optimal solution of individual&#x27;s history ä¸ªä½“å†å²æœ€ä¼˜è§£</span></span><br><span class="line"><span class="comment"> * @param opt_A optimal adaptability of individual&#x27;s history ä¸ªä½“å†å²æœ€ä¼˜é€‚åº”å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> __<span class="title">bird_t</span>&#123;</span></span><br><span class="line">    <span class="type">double</span> X[arm_MX_nodes], V[arm_MX_nodes];</span><br><span class="line">    <span class="type">double</span> opt_X[arm_MX_nodes];</span><br><span class="line">    <span class="type">double</span> opt_A;</span><br><span class="line">&#125;<span class="type">bird_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief </span></span><br><span class="line"><span class="comment"> * @param N size of the bird population ç§ç¾¤è§„æ¨¡</span></span><br><span class="line"><span class="comment"> * @param D è§£çš„ç»´åº¦</span></span><br><span class="line"><span class="comment"> * @param K è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"><span class="comment"> * @param W æƒ¯æ€§æƒé‡</span></span><br><span class="line"><span class="comment"> * @param C_ind ä¸ªä½“å­¦ä¹ å› å­</span></span><br><span class="line"><span class="comment"> * @param C_pop ç¾¤ä½“å­¦ä¹ å› å­</span></span><br><span class="line"><span class="comment"> * @param opt_X_pop optimal solution of population&#x27;s history ç¾¤ä½“å†å²æœ€ä¼˜è§£</span></span><br><span class="line"><span class="comment"> * @param opt_A_pop optimal adapatability of population&#x27;s history ç¾¤ä½“å†å²æœ€ä¼˜è§£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> __<span class="title">bird_population_t</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> N, D, K;</span><br><span class="line">    <span class="type">double</span> W, C_ind, C_pop;</span><br><span class="line">    <span class="type">double</span> opt_X_pop[arm_MX_nodes];</span><br><span class="line">    <span class="type">double</span> opt_A_pop;</span><br><span class="line">    <span class="type">bird_t</span> *bird[N_MX_SIZE];</span><br><span class="line"></span><br><span class="line">&#125;<span class="type">bird_population_t</span>;</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>â€‹    å•ä¸ªç²’å­çš„åˆå§‹åŒ–ï¼Œè‡³äºä¸ºä»€ä¹ˆè¦ç”¨ <em>â€˜birdâ€™</em> æ¥å‘½åå‘¢ï¼Œå› ä¸ºè¿™ä¸ªç®—æ³•å…¶å®ä¹Ÿç®—æ˜¯ä¸€ç§ä»¿ç”Ÿçš„æ€è·¯ï¼Œä½œè€…æ˜¯å—åˆ°é¸Ÿç¾¤è§…é£Ÿçš„å¯å‘å‘æ˜äº†è¿™ä¸ªç®—æ³•ã€‚æˆ‘ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™ä¸ªç®—æ³•æƒ³åˆ°çš„å°±æ˜¯é—ä¼ ç®—æ³•ï¼Œå…¶å®æ„Ÿè§‰éƒ½æ˜¯ä¼˜åŒ–çš„æœç´¢æ–¹æ³•ï¼Œä¸è¿‡ç›¸æ¯”äºé—ä¼ ç®—æ³•æ­¤ç®—æ³•åœ¨æ±‚æœºæ¢°è‡‚é€†è§£çš„åº”ç”¨ä¸­æ›´èƒœä¸€ç­¹ï¼Œå…·ä½“æ€ä¹ˆä¸ªä¼˜åŠ¿æ³•è¿˜æœ‰å¾…å»ç ”ç©¶ç ”ç©¶ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç²’å­éšæœºåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment"> * åœ¨è¿™é‡Œé¢åˆ†é…ç©ºé—´ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¯ä»¥é˜²æ­¢ç©ºé—´æµªè´¹</span></span><br><span class="line"><span class="comment"> * @param pop </span></span><br><span class="line"><span class="comment"> * @return bird_t* </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bird_t</span> *<span class="title function_">bird_init</span><span class="params">(<span class="type">bird_population_t</span> *pop)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">bird_t</span> *bird;</span><br><span class="line">    bird = (<span class="type">bird_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">bird_t</span>));</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;pop-&gt;D; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        bird-&gt;X[i] = PI*(rand()%<span class="number">180</span>)/<span class="number">180</span>;</span><br><span class="line">        bird-&gt;V[i] = PI*(rand()%<span class="number">20</span><span class="number">-10</span>)/<span class="number">180</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    bird-&gt;opt_A = BADDEST;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bird;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ç²’å­ç¾¤åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment"> * @param n </span></span><br><span class="line"><span class="comment"> * @param d </span></span><br><span class="line"><span class="comment"> * @param k </span></span><br><span class="line"><span class="comment"> * @param w </span></span><br><span class="line"><span class="comment"> * @param c_ind </span></span><br><span class="line"><span class="comment"> * @param c_pop </span></span><br><span class="line"><span class="comment"> * @return bird_population_t* </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bird_population_t</span> *<span class="title function_">bird_population_init</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> d, <span class="type">int</span> k, <span class="type">double</span> w, <span class="type">double</span> c_ind, <span class="type">double</span> c_pop)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">bird_population_t</span> *bird_population;</span><br><span class="line">    bird_population = (<span class="type">bird_population_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">bird_population_t</span>));</span><br><span class="line"></span><br><span class="line">    bird_population-&gt;N = n, bird_population-&gt;D = d, bird_population-&gt;K = k;</span><br><span class="line">    bird_population-&gt;W = w, bird_population-&gt;C_ind = c_ind, bird_population-&gt;C_pop = c_pop;</span><br><span class="line"></span><br><span class="line">    srand((<span class="type">unsigned</span>)time( <span class="literal">NULL</span> ) );     </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        bird_population-&gt;bird[i] = bird_init(bird_population);</span><br><span class="line">    &#125;</span><br><span class="line">    bird_population-&gt;opt_A_pop = BADDEST;</span><br><span class="line">    <span class="keyword">return</span> bird_population;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿­ä»£è¿‡ç¨‹"><a href="#è¿­ä»£è¿‡ç¨‹" class="headerlink" title="è¿­ä»£è¿‡ç¨‹"></a>è¿­ä»£è¿‡ç¨‹</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;bird_pop-&gt;K; i++)<span class="comment">//K</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;bird_pop-&gt;N;j++)<span class="comment">//N</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//è®¡ç®—é€‚åº”å€¼</span></span><br><span class="line">            Matrix_t *judge_point = point_init(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">            <span class="type">double</span> ada=<span class="number">0</span>;<span class="comment">//é€‚åº”å€¼</span></span><br><span class="line">            DH_update(arm,bird_pop-&gt;bird[j]-&gt;X);</span><br><span class="line">            foward_solve(arm,judge_point);</span><br><span class="line">            ada += (point.matrix[<span class="number">0</span>][<span class="number">0</span>] - judge_point-&gt;matrix[<span class="number">0</span>][<span class="number">0</span>])*(point.matrix[<span class="number">0</span>][<span class="number">0</span>] - judge_point-&gt;matrix[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">            ada += (point.matrix[<span class="number">1</span>][<span class="number">0</span>] - judge_point-&gt;matrix[<span class="number">1</span>][<span class="number">0</span>])*(point.matrix[<span class="number">1</span>][<span class="number">0</span>] - judge_point-&gt;matrix[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">            ada += (point.matrix[<span class="number">2</span>][<span class="number">0</span>] - judge_point-&gt;matrix[<span class="number">2</span>][<span class="number">0</span>])*(point.matrix[<span class="number">2</span>][<span class="number">0</span>] - judge_point-&gt;matrix[<span class="number">2</span>][<span class="number">0</span>]);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//æ›´æ–°ä¸ªä½“ä¸ç¾¤ä½“æœ€ä¼˜é€‚åº”å€¼ä¸æœ€ä¼˜è§£</span></span><br><span class="line">            <span class="keyword">if</span>(ada &lt; bird_pop-&gt;bird[j]-&gt;opt_A)</span><br><span class="line">            &#123;</span><br><span class="line">                bird_pop-&gt;bird[j]-&gt;opt_A = ada;</span><br><span class="line">                <span class="keyword">for</span>(k=<span class="number">0</span>; k &lt; arm-&gt;n; k++)</span><br><span class="line">                &#123;bird_pop-&gt;bird[j]-&gt;opt_X[k] = bird_pop-&gt;bird[j]-&gt;X[k];&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ada &lt; bird_pop-&gt;opt_A_pop)</span><br><span class="line">            &#123;</span><br><span class="line">                bird_pop-&gt;opt_A_pop = ada;</span><br><span class="line">                <span class="keyword">for</span>(k=<span class="number">0</span>; k &lt; arm-&gt;n; k++)</span><br><span class="line">                &#123;bird_pop-&gt;opt_X_pop[k] = bird_pop-&gt;bird[j]-&gt;X[k];&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//æ›´æ–°wå€¼ï¼Œæ›´æ–°å„ç»´åº¦é€Ÿåº¦ä¸ä½ç½®</span></span><br><span class="line">            w = W_MAX - (W_MAX - W_MIN)*((<span class="type">double</span>)i/bird_pop-&gt;K);</span><br><span class="line">            <span class="keyword">for</span>(k=<span class="number">0</span>; k &lt; arm-&gt;n; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                bird_pop-&gt;bird[j]-&gt;V[k] = (w+(rand()/<span class="number">16384</span><span class="number">-1</span>)*<span class="number">0.15</span>)*(bird_pop-&gt;bird[j]-&gt;V[k]) + (rand()/<span class="number">16384</span>)*<span class="number">1.8</span>*(bird_pop-&gt;opt_X_pop[k] - bird_pop-&gt;bird[j]-&gt;X[k]) + (rand()/<span class="number">16384</span>)*<span class="number">1.6</span>*(bird_pop-&gt;bird[j]-&gt;opt_X[k] - bird_pop-&gt;bird[j]-&gt;X[k]);</span><br><span class="line">                bird_pop-&gt;bird[j]-&gt;V[k] = (bird_pop-&gt;bird[j]-&gt;V[k] &gt; V_MAX) ? V_MAX : bird_pop-&gt;bird[j]-&gt;V[k];</span><br><span class="line">                bird_pop-&gt;bird[j]-&gt;V[k] = (bird_pop-&gt;bird[j]-&gt;V[k] &lt; V_MIN) ? V_MIN : bird_pop-&gt;bird[j]-&gt;V[k];</span><br><span class="line">                bird_pop-&gt;bird[j]-&gt;X[k] += bird_pop-&gt;bird[j]-&gt;V[k]; </span><br><span class="line">                bird_pop-&gt;bird[j]-&gt;X[k] = (bird_pop-&gt;bird[j]-&gt;X[k] &gt; X_MAX) ? X_MAX : bird_pop-&gt;bird[j]-&gt;X[k];</span><br><span class="line">                bird_pop-&gt;bird[j]-&gt;X[k] = (bird_pop-&gt;bird[j]-&gt;X[k] &lt; X_MIN) ? X_MIN : bird_pop-&gt;bird[j]-&gt;X[k];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//æ‰“å°è°ƒè¯•</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;    bird%d: \r\n        å½“å‰ä½ç½®X: &quot;</span>,j);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> m=<span class="number">0</span>; m&lt;arm-&gt;n; m++) &#123;<span class="built_in">printf</span>(<span class="string">&quot;%.3f|%.1f, &quot;</span>,bird_pop-&gt;bird[j]-&gt;X[m],rad_angle(bird_pop-&gt;bird[j]-&gt;X[m]));&#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\r\n        å½“å‰é€Ÿåº¦V: &quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> m=<span class="number">0</span>; m&lt;arm-&gt;n; m++) &#123;<span class="built_in">printf</span>(<span class="string">&quot;%.3f|%.1f, &quot;</span>,bird_pop-&gt;bird[j]-&gt;V[m],rad_angle(bird_pop-&gt;bird[j]-&gt;V[m]));&#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">            <span class="built_in">free</span>(judge_point);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">//æ‰“å°è°ƒè¯•</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d æœ€é€‚å€¼: %.3f æƒ¯æ€§w: %.3f\r\n&quot;</span>,i,bird_pop-&gt;opt_A_pop,w);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;   è§’åº¦X: &quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(k=<span class="number">0</span>; k &lt; arm-&gt;n; k++) &#123;<span class="built_in">printf</span>(<span class="string">&quot;%.2f|%.1f &quot;</span>,bird_pop-&gt;opt_X_pop[k],rad_angle(bird_pop-&gt;opt_X_pop[k]));&#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸€äº›å°ç»†èŠ‚"><a href="#ä¸€äº›å°ç»†èŠ‚" class="headerlink" title="ä¸€äº›å°ç»†èŠ‚"></a>ä¸€äº›å°ç»†èŠ‚</h3><p><img src="https://s2.loli.net/2022/11/23/2PGk5JcVnpuKwIq.png" alt="bug1.png"  /></p><p>â€‹    å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æˆ‘æ·»åŠ äº†æ—¶é—´éšæœºæ•°ç§å­ï¼Œä½†æ˜¯ç”Ÿæˆçš„ç²’å­ä»ç„¶æ˜¯å…¨éƒ½ä¸€æ ·çš„ã€‚è¿™é‡Œè¦å°†<code>srand((insigned)time(NULL));</code>æå‰è‡³åˆå§‹åŒ–å‡½æ•°å¤–ã€‚</p><p>â€‹    </p><p><code>w = W_MAX - (W_MAX - W_MIN)*((double)i/bird_pop-&gt;K);</code> åœ¨ç»™<strong>w</strong>åŠ æƒçš„æ—¶å€™åˆ«å¿˜äº†<code>double</code>ï¼Œä¸ç„¶åé¢ç®—å‡ºæ¥ä¸€ç›´æ˜¯0ã€‚</p><h1 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h1><p>æ„Ÿè°¢å¤§å®¶è€å¿ƒçœ‹å®Œäº†æœ¬ç¯‡åšå®¢ï¼Œå¦‚æœè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿åˆ†äº«ç»™ä»–äººã€‚ç”±äºæœ¬äººæ°´å¹³æœ‰é™ï¼Œéš¾å…æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºæ‰¹è¯„æŒ‡æ­£ã€‚å®Œæ•´çš„ä»£ç å¯ä»¥åœ¨æˆ‘çš„ä»£ç ä»“åº“æ‰¾åˆ°ï¼Œåç»­ä¹Ÿä¼šå°†å…¶ç§»æ¤åˆ°STM32ä¸Šã€‚åœ¨è¿™é‡Œè´´ä¸Šä¸»è¦ä»£ç æ–¹ä¾¿éšæ—¶æŸ¥çœ‹ï¼Œæ€è·¯ä¸ä»£ç ç›¸äº’å¯¹ç…§ä¹Ÿæ›´å®¹æ˜“ç†è§£ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> è¿åŠ¨å­¦åˆ†æ </tag>
            
            <tag> æœºæ¢°è‡‚ </tag>
            
            <tag> D-Hå‚æ•°æ³• </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³• </tag>
            
            <tag> STM32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DIYå¹³è¡¡å°è½¦</title>
      <link href="/2022/11/12/DIY%E5%B9%B3%E8%A1%A1%E5%B0%8F%E8%BD%A6/"/>
      <url>/2022/11/12/DIY%E5%B9%B3%E8%A1%A1%E5%B0%8F%E8%BD%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰æœŸåŸºæœ¬æ–¹æ¡ˆ"><a href="#å‰æœŸåŸºæœ¬æ–¹æ¡ˆ" class="headerlink" title="å‰æœŸåŸºæœ¬æ–¹æ¡ˆ"></a>å‰æœŸåŸºæœ¬æ–¹æ¡ˆ</h1><h2 id="é¢„æœŸæ•ˆæœ"><a href="#é¢„æœŸæ•ˆæœ" class="headerlink" title="é¢„æœŸæ•ˆæœ"></a>é¢„æœŸæ•ˆæœ</h2><h3 id="åŸºæœ¬ç›®æ ‡"><a href="#åŸºæœ¬ç›®æ ‡" class="headerlink" title="åŸºæœ¬ç›®æ ‡"></a>åŸºæœ¬ç›®æ ‡</h3><ul><li>æ ¹æ®æŒ‡ä»¤å®ç°ç²¾å‡†çš„é€Ÿåº¦æ§åˆ¶</li><li>è‡ªèº«åæ ‡å’Œå§¿æ€çš„è§£ç®—</li><li>ä¸ä¸Šä½æœºä¼ è¾“æ•°æ®</li></ul><h3 id="æ›´æœ‰æ„æ€çš„ç›®æ ‡"><a href="#æ›´æœ‰æ„æ€çš„ç›®æ ‡" class="headerlink" title="æ›´æœ‰æ„æ€çš„ç›®æ ‡"></a>æ›´æœ‰æ„æ€çš„ç›®æ ‡</h3><ul><li>åŒè½®å¹³è¡¡è½¦</li><li>æ§åˆ¶é›·è¾¾å¹³ç¨³</li></ul><h2 id="ç”µæœºé©±åŠ¨"><a href="#ç”µæœºé©±åŠ¨" class="headerlink" title="ç”µæœºé©±åŠ¨"></a>ç”µæœºé©±åŠ¨</h2><p>â€‹    ç”µæœºä½¿ç”¨<strong>12V</strong>ä¾›ç”µï¼Œå¯ä»¥ç›´æ¥ç”±ç”µæºæ¨¡å—ä¾›ç”µã€‚ä½¿ç”¨<strong>TB6612é©±åŠ¨æ¨¡å—</strong>å¯ä»¥æ»¡è¶³ä¸¤ä¸ªç”µæœºçš„é©±åŠ¨éœ€æ±‚ã€‚</p><h2 id="ä½å§¿æµ‹é‡"><a href="#ä½å§¿æµ‹é‡" class="headerlink" title="ä½å§¿æµ‹é‡"></a>ä½å§¿æµ‹é‡</h2><p>â€‹    ä½¿ç”¨<strong>MPU6050</strong>å¯ä»¥è·å–è§’é€Ÿåº¦å’ŒåŠ é€Ÿåº¦å€¼ï¼ˆä½†æ˜¯ä¹‹å‰è¯•ç”¨çš„æ—¶å€™å‘ç°å…¶è‡ªå¸¦çš„åº“ä½å§¿è§£ç®—ä¼šæœ‰ä¸å°‘æ—¶é—´çš„åˆå§‹åŒ–å»¶è¿Ÿï¼‰ã€‚</p><p>â€‹    MPU6050ä½¿ç”¨<strong>IIC</strong>é€šä¿¡ï¼Œåœ¨è·å¾—äº†æ–°çš„æµ‹é‡ä¹‹åä¼šåœ¨<strong>INT</strong>è„šè¾“å‡ºé«˜ç”µå¹³ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å³æ—¶æ€§ï¼Œå°†ä¸€ä¸ªGPIOé…ç½®ä¸ºå¤–éƒ¨ä¸­æ–­ï¼Œåœ¨ä¸­æ–­å‡½æ•°é‡Œæ›´æ–°æ•°æ®ã€‚</p><h2 id="è½®é€Ÿè·å–"><a href="#è½®é€Ÿè·å–" class="headerlink" title="è½®é€Ÿè·å–"></a>è½®é€Ÿè·å–</h2><p>â€‹    å°†ä¸¤ä¸ªå®šæ—¶å™¨é…ç½®ä¸º<strong>ç¼–ç å™¨æ¥å£æ¨¡å¼</strong>ï¼Œåˆ†åˆ«æ¥æ”¶ä¸¤ä¸ªç”µæœºå¯¹åº”çš„ç¼–ç å™¨æ•°æ®ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ABåŒç›¸è¾“å…¥çš„ç¼–ç å™¨ï¼Œå‚è€ƒæ‰‹å†Œï¼š</p><blockquote><p>å¦‚æœè®¡æ•°å™¨åªåœ¨TI2çš„è¾¹æ²¿è®¡æ•°ï¼Œåˆ™ç½®TIMx_SMCRå¯„å­˜å™¨ä¸­çš„SMS=001ï¼›å¦‚æœåªåœ¨TI1è¾¹æ²¿è®¡æ•°ï¼Œåˆ™ç½®SMS=010ï¼›å¦‚æœè®¡æ•°å™¨åŒæ—¶åœ¨TI1å’ŒTI2è¾¹æ²¿è®¡æ•°ï¼Œåˆ™ç½®SMS=011ã€‚  </p></blockquote><p>å¯¹å¯„å­˜å™¨çš„é…ç½®å·²ç»è¢«å°è£…åœ¨åº“å‡½æ•°<strong>TIM_EncoderInterfaceConfigï¼ˆ ï¼‰</strong>é‡Œäº†ï¼Œåªéœ€è¦é€‰æ‹©é…ç½®<strong>æ¨¡å¼3</strong>å³å¯ï¼Œåœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼ŒTI1å’ŒTI2åˆ†åˆ«å¯¹åº”TIMxçš„<strong>channel1</strong>å’Œ<strong>channel2</strong>çš„å¼•è„šï¼Œé»˜è®¤æƒ…å†µä¸‹TIM2å°±æ˜¯<strong>PA0 PA1</strong>,TIM3æ˜¯<strong>PA6 PA7</strong>ã€‚</p><p>ä¹Ÿå¯ä»¥ä¸MPU6050ä¼ æ„Ÿå™¨æ•°æ®èåˆã€‚</p><h2 id="è¿åŠ¨æ§åˆ¶"><a href="#è¿åŠ¨æ§åˆ¶" class="headerlink" title="è¿åŠ¨æ§åˆ¶"></a>è¿åŠ¨æ§åˆ¶</h2><h3 id="ç›´ç«‹ç¯"><a href="#ç›´ç«‹ç¯" class="headerlink" title="ç›´ç«‹ç¯"></a>ç›´ç«‹ç¯</h3><p>ç›´ç«‹ç¯ä½¿å°è½¦ä¿æŒç›´ç«‹ï¼Œå³ä¿æŒåœ¨<strong>æœºæ¢°ä¸­å€¼Î¸</strong>çš„ä½ç½®ï¼Œç†æƒ³æƒ…å†µä¸‹æ˜¯ä¿æŒ0Â°ã€‚</p><script type="math/tex; mode=display">$PWM_{balance} = KP * Î¸ + KD * \Delta Î¸</script><h3 id="é€Ÿåº¦ç¯"><a href="#é€Ÿåº¦ç¯" class="headerlink" title="é€Ÿåº¦ç¯"></a>é€Ÿåº¦ç¯</h3><p>â€‹    æ ¹æ®ä¸Šä½æœºå‘å¸ƒçš„é€Ÿåº¦æŒ‡ä»¤æˆ–è€…ç”±<strong>ä½ç½®ç¯</strong>è®¡ç®—å‡ºçš„ç›®æ ‡é€Ÿåº¦è®¡ç®—å‡ºè¾“å‡ºåŠ›çŸ©ã€‚</p><script type="math/tex; mode=display">PWM_{speed} = KP_s * Error + KD_s * \Delta Error</script><h3 id="é€Ÿåº¦ç¯ï¼ˆå¹³è¡¡è½¦ï¼‰"><a href="#é€Ÿåº¦ç¯ï¼ˆå¹³è¡¡è½¦ï¼‰" class="headerlink" title="é€Ÿåº¦ç¯ï¼ˆå¹³è¡¡è½¦ï¼‰"></a>é€Ÿåº¦ç¯ï¼ˆå¹³è¡¡è½¦ï¼‰</h3><p>â€‹    ä½†æ˜¯ç”±äºå®‰è£…ç­‰å¤–ç•Œå› ç´ å½±å“ï¼Œå°è½¦ä»¥ä¸ºçš„<strong>0Â°</strong>å¹¶éçœŸæ­£çš„å¹³è¡¡æ€ï¼Œäºæ˜¯æˆ‘ä»¬å¼•å…¥äº†<strong>é€Ÿåº¦ç¯</strong>ã€‚å½“å°è½¦é€Ÿåº¦ç¨³å®šæ—¶ï¼Œä¾¿å¯ä»¥è®¤ä¸ºå°è½¦è¿›å…¥å¹³è¡¡æ€ã€‚é€Ÿåº¦ç¯çš„è¾“å‡ºå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª<strong>è§’åº¦</strong>ï¼Œä½œä¸ºç›´ç«‹ç¯çš„è¾“å…¥ï¼Œç›´ç«‹ç¯ä¾¿æ¼”å˜æˆäº†ä½¿å°è½¦ä¿æŒä¸€å®šè§’åº¦ï¼Œåœ¨ä¿æŒè§’åº¦çš„æ—¶å€™ä¾¿ä¼šäº§ç”Ÿé€Ÿåº¦ã€‚</p><script type="math/tex; mode=display">balance \_ IN \_ speed = KP_S * Error + KD_S * \Delta Error</script><script type="math/tex; mode=display">PWM \_ balance \_ speed=KP * (Î¸ + balance \_ IN \_ speed) + KD * \Delta Î¸</script><p>åˆå¹¶æ•´ç†åä¾¿å¯å¾—åˆ°</p><script type="math/tex; mode=display">PWM \_ balance \_ speed = KP * Î¸ + KD * \Delta Î¸ + KPï¼ˆ KP_S * Error + KD_S * \Delta Errorï¼‰</script><p>ä¸¤è€…å…¶å®æ˜¯çº¿æ€§ç›¸åŠ çš„ï¼Œç›´æ¥å°†KP <em> KP_Såˆå¹¶ä¸ºKP_Sï¼ŒKP </em> KD_Såˆå¹¶ä¸ºKD_Sï¼Œæœ€ç»ˆç®€åŒ–ä¸º</p><script type="math/tex; mode=display">PWM_{balance} = KP * \theta + KD * \Delta \theta</script><script type="math/tex; mode=display">PWM_{speed} = KP_s *Error + KD_s * \Delta Error</script><script type="math/tex; mode=display">PWM = PWM_{speed} + PWM_{balance}</script><h3 id="è½¬å‘ç¯"><a href="#è½¬å‘ç¯" class="headerlink" title="è½¬å‘ç¯"></a>è½¬å‘ç¯</h3><p>â€‹    è½¬å‘ç¯æ¯”è¾ƒç®€å•ï¼Œç›´æ¥æ ¹æ®<strong>è§’åº¦</strong>è¾“å‡ºä¸€ä¸ªé€Ÿåº¦å·®ï¼Œç”¨<strong>PD</strong>æ§åˆ¶å³å¯ã€‚</p><h2 id="æ§åˆ¶é›·è¾¾å¹³ç¨³"><a href="#æ§åˆ¶é›·è¾¾å¹³ç¨³" class="headerlink" title="æ§åˆ¶é›·è¾¾å¹³ç¨³"></a>æ§åˆ¶é›·è¾¾å¹³ç¨³</h2><p>â€‹    æ ¹æ®è½¦å­å§¿æ€æ§åˆ¶èˆµæœºè§’åº¦ä»¥å°½å¯èƒ½ä¿è¯é›·è¾¾å¹³ç¨³ã€‚</p><h2 id="è¿åŠ¨æ¨¡å‹"><a href="#è¿åŠ¨æ¨¡å‹" class="headerlink" title="è¿åŠ¨æ¨¡å‹"></a>è¿åŠ¨æ¨¡å‹</h2><p>â€‹    è®¾ï¼šè½¦å­é€Ÿåº¦ä¸º<strong>v</strong> ï¼› ä¸¤è½®é€Ÿåº¦åˆ†åˆ«ä¸º<strong>v1ï¼Œv2</strong> ï¼›ä¸¤è½®é—´è·ä¸º<strong>d</strong> ï¼›é€Ÿåº¦ç¬å¿ƒä¸ºç‚¹ <strong>P</strong> ï¼› é€Ÿåº¦ç¬å¿ƒç¦»ä¸¤è½®è·ç¦»åˆ†åˆ«ä¸º <strong>r1 , r2</strong> ï¼›è½¦èº«è§’é€Ÿåº¦ä¸º <strong>w</strong> ï¼› è½¦å­è¿åŠ¨è½¨è¿¹åŠå¾„ä¸º<strong>R</strong> ï¼›<strong>é€†æ—¶é’ˆ</strong>è½¬ä¸ºæ­£æ–¹å‘</p><p>â€‹    å¯ä»¥ç®—å¾—ï¼š</p><script type="math/tex; mode=display">v =\frac{1}{2} ( v_1 + v_2 )</script><script type="math/tex; mode=display">\omega = \frac{v_2 - v_1}{d}</script><p>â€‹    </p><script type="math/tex; mode=display">R = d\frac{v_1 + v_2}{2(v_2 - v_1)}</script><p>ç›®å‰çš„æƒ³æ³•æ˜¯å»ºç«‹ä¸€ä¸ª<strong>ä¸–ç•Œåæ ‡ç³»</strong>å’Œä¸€ä¸ª<strong>è½¦å­åæ ‡ç³»</strong>ã€‚</p><ul><li>åœ¨<strong>è½¦å­åæ ‡ç³»</strong>ä¸­å¯ä»¥è½»æ¾åœ°è®¡ç®—å‡º<strong>ä¸‹ä¸€æ—¶åˆ»</strong>è½¦å­çš„ä½ç½®å’Œå§¿æ€ ï¼›</li><li>è€Œé€šè¿‡<strong>è¿™ä¸€æ—¶åˆ»</strong>è½¦å­çš„ä½ç½®å’Œå§¿æ€åˆå¯ä»¥å¾—åˆ°æ­¤æ—¶è½¦å­åæ ‡ç³»ä¸ä¸–ç•Œåæ ‡ç³»çš„<strong>å˜æ¢çŸ©é˜µ</strong>ï¼›</li><li>åˆ©ç”¨<strong>å˜æ¢çŸ©é˜µ</strong>å¯ä»¥å°†<strong>è½¦å­åæ ‡ç³»ä¸­</strong>ä¸‹ä¸€æ—¶åˆ»çš„ä½å§¿è½¬æ¢åˆ°<strong>ä¸–ç•Œåæ ‡ç³»</strong>ã€‚</li></ul><p>â€‹    å¦‚æ­¤ä¾¿å¯ä»¥å®ŒæˆçŠ¶æ€é€’æ¨ã€‚</p><script type="math/tex; mode=display">\Delta \theta_k = \frac{v_{k-1}}{R_{k-1}} \Delta t</script><script type="math/tex; mode=display">\Delta x_k = R_{k-1} (1 - \cos {\Delta \theta_k})</script><script type="math/tex; mode=display">\Delta y_k = R_{k-1} \sin{\Delta \theta_k}</script><script type="math/tex; mode=display">x_k = x_{k-1} + \Delta x_k \sin{\theta_{k-1}} + \Delta y_k \cos{\theta_{k-1}}</script><script type="math/tex; mode=display">y_k = y_{k-1} - \Delta x_k \cos{\theta_{k-1}} + \Delta y_k \sin{\theta_{k-1}}</script><script type="math/tex; mode=display">\theta_k = \theta_{k-1} + \Delta \theta_k</script><h1 id="ç»“æ„è®¾è®¡"><a href="#ç»“æ„è®¾è®¡" class="headerlink" title="ç»“æ„è®¾è®¡"></a>ç»“æ„è®¾è®¡</h1><h1 id="STM32ä»£ç "><a href="#STM32ä»£ç " class="headerlink" title="STM32ä»£ç "></a>STM32ä»£ç </h1><h2 id="è¿åŠ¨æ§åˆ¶è°ƒè¯•"><a href="#è¿åŠ¨æ§åˆ¶è°ƒè¯•" class="headerlink" title="è¿åŠ¨æ§åˆ¶è°ƒè¯•"></a>è¿åŠ¨æ§åˆ¶è°ƒè¯•</h2><p>â€‹    è°ƒè¯•é‡Œ<strong>ç¨‹è®¡æ­£è§£å‡ºä½å§¿</strong>çš„æ—¶å€™ï¼Œç”±äºæ–¹å‘ä¸ä¸€è‡´ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹<strong>è¯»å–é€Ÿåº¦</strong>çš„ææ€§ã€‚ä¸è¿‡æ”¹å®Œä¹‹åä¸€å®šè¦è®°å¾—æŠŠå‡ ä¸ªæ§åˆ¶å‡½æ•°é‡Œçš„ææ€§ä¹Ÿåšä¿®æ”¹ã€‚æ¯”å¦‚è§’åº¦æ§åˆ¶ç¯å¯èƒ½å˜æˆæ­£åé¦ˆï¼Œé€Ÿåº¦ç¯åˆå¯èƒ½å˜æˆé€†åé¦ˆã€‚</p><h2 id="ä¸²å£è°ƒè¯•"><a href="#ä¸²å£è°ƒè¯•" class="headerlink" title="ä¸²å£è°ƒè¯•"></a>ä¸²å£è°ƒè¯•</h2><p>â€‹    DEBUGæˆ–è€…è¿œç¨‹æ§åˆ¶çš„æ—¶å€™é€‰æ‹©ä½¿ç”¨ä¸²å£å¤–è®¾ã€‚å…¶ä¸­ç”¨åˆ°äº†ä¸‰ä¸ªä¸²å£ï¼Œå¯ä»¥æ ¹æ®æƒ…å†µé€‰æ‹©ä½¿ç”¨ã€‚</p><h3 id="æ¥æ”¶ä¸­æ–­é—®é¢˜"><a href="#æ¥æ”¶ä¸­æ–­é—®é¢˜" class="headerlink" title="æ¥æ”¶ä¸­æ–­é—®é¢˜"></a>æ¥æ”¶ä¸­æ–­é—®é¢˜</h3><p>â€‹    ç¨‹åºä¸»è¦ç”±ä¸€ä¸ªæ ¸å¿ƒä¸­æ–­å‡½æ•°æ„æˆï¼Œåœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°ç”±äºè¿™ä¸ªä¸­æ–­å‡½æ•°çš„å­˜åœ¨ï¼Œä¸²å£é€šè®¯ä¼šç»å¸¸å‡ºç°é€šè®¯é”™è¯¯ã€‚æ˜¾ç„¶æ˜¯å› ä¸ºä¸²å£ä¸­æ–­å‡½æ•°å’Œè¿™ä¸ªæ ¸å¿ƒä¸­æ–­å‡½æ•°å†²çªäº†ï¼Œä¸è¿‡æ˜¯ä¸­æ–­ä¼˜å…ˆçº§é…ç½®çš„é—®é¢˜ã€‚</p><p>â€‹    å¯æ˜¯æˆ‘å‘ç°äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼ŒUSART_IRQné…ç½®ä¸º0x00,0x00ï¼ŒEXTI9_5_IRQné…ç½®ä¸º0x00,0x01ä¼šä¸¥é‡å½±å“ä¸²å£æ•°æ®æ¥æ”¶çš„æ­£ç¡®æ€§ï¼Œä½†æ˜¯å°†åè€…é…ç½®ä¸º0x01,0x01å°±ä¸ä¼šã€‚<u>åŒæ ·æ˜¯ä¼˜å…ˆçº§ä½äºä¸²å£ï¼Œä¸ºä»€ä¹ˆæ”¹å˜äº†åè€…çš„**æŠ¢æ–­ä¼˜å…ˆçº§**å°±ä¼šäº§ç”Ÿè¿™æ ·çš„åŒºåˆ«å‘¢ï¼Ÿ</u></p><p>â€‹    å½“ä¸­æ–­ä¼˜å…ˆçº§é…ç½®å®Œæˆåï¼Œè‹¥å¤šä¸ªä¸­æ–­åŒæ—¶å‘ç”Ÿåˆ™å…ˆæ¯”è¾ƒæŠ¢å ä¼˜å…ˆçº§è°çš„å€¼å°è°å…ˆè¿›è¡Œï¼Œè‹¥æŠ¢å ä¼˜å…ˆçº§ç›¸åŒåˆ™æ¯”è¾ƒå­ä¼˜å…ˆçº§è°çš„å€¼å°è°å…ˆè¿›è¡Œï¼Œè‹¥ä¸¤è€…éƒ½ç›¸åŒï¼Œå°±æ¯”è¾ƒç¡¬ä»¶ä¸­æ–­ç¼–å·ï¼ˆè¯¥ç¼–å·ç”±ç¡¬ä»¶è‡ªèº«å†³å®šï¼‰ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯å½“ä¸€ä¸­æ–­æ­£åœ¨è¿›è¡Œæ—¶åˆä¸€ä¸­æ–­å‘ç”Ÿè‹¥åè€…çš„æŠ¢å ä¼˜å…ˆçº§çš„å€¼æ¯”å‰è€…å°åˆ™åè€…å¯ä»¥æ‰“æ–­æ­£åœ¨å‘ç”Ÿçš„ä¸­æ–­æ‰§è¡Œåè€…çš„ä¸­æ–­è¿›ç¨‹ï¼Œéœ€è¦æ³¨æ„ <emp>è‹¥åè€…çš„æŠ¢å ä¼˜å…ˆçº§ä¸å‰è€…ç›¸ç­‰ä½†å­ä¼˜å…ˆçº§çš„å€¼æ¯”å‰è€…å°æ­¤æ—¶åè€…ä¸èƒ½æ‰“æ–­æ­£åœ¨å‘ç”Ÿçš„ä¸­æ–­, å¿…é¡»ç­‰å…¶å®Œæˆåæ‰èƒ½è¿›è¡Œï¼Œ</emp> è‡³äºåè€…çš„ä¼˜å…ˆçº§æ¯”æ­£åœ¨å‘ç”Ÿçš„ä¸­æ–­ä¼˜å…ˆçº§ä½çš„æƒ…å†µï¼Œé‚£å°±è‚¯å®šæ˜¯ç­‰å¾…æ­£åœ¨è¿›è¡Œçš„ä¸­æ–­å®Œæˆåå†è¿›è¡Œã€‚</p><p>â€‹    æ‰€ä»¥è¯´<em>â€œæŠ¢å â€</em>ä¸€è¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒç”ŸåŠ¨çš„ã€‚</p><p>â€‹    <em>å½“ç„¶ï¼Œå¦‚æœç›´æ¥ç”¨DMAçš„è¯å°±æ²¡è¿™äº›é—®é¢˜äº†ã€‚</em></p><h3 id="USART2-DMA"><a href="#USART2-DMA" class="headerlink" title="USART2_DMA"></a>USART2_DMA</h3><p>â€‹    åœ¨DMAåˆå§‹åŒ–å‡½æ•°çš„æœ€åï¼Œè®¾ç½®çš„<strong>TX</strong>ä¸<strong>RX</strong>çš„å¼€é—­çŠ¶æ€æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿåœ¨ç†é¡ºäº†å…·ä½“çš„DMAæ”¶å‘è¿‡ç¨‹ä¹‹åä¾¿å¾ˆå®¹æ˜“ç†è§£äº†ã€‚</p><h4 id="å‘é€"><a href="#å‘é€" class="headerlink" title="å‘é€"></a>å‘é€</h4><blockquote><p>åˆ¤æ–­DMAæ˜¯å¦å¤„äºå‘é€å®Œæ¯•çš„ç©ºé—²çŠ¶æ€ã€‚flag=1ï¼Œæ­£åœ¨å‘é€</p><p>è®¾ç½®å‘é€æ•°æ®çš„åœ°å€ä¸å¤§å°</p><p>CMDä½¿èƒ½å¼€å§‹å‘é€</p><p>ï¼ˆå¯æ‰§è¡Œå…¶ä»–æ“ä½œï¼‰</p><p>DMAå‘é€å®Œæˆä¸­æ–­</p><p>æ¸…é™¤æ ‡å¿—ä½ï¼ˆåŒ…æ‹¬flagï¼‰</p><p>CMDå¤±èƒ½å…³é—­é€šé“</p></blockquote><h4 id="æ¥æ”¶"><a href="#æ¥æ”¶" class="headerlink" title="æ¥æ”¶"></a>æ¥æ”¶</h4><blockquote><p>ï¼ˆDMAäº‹å…ˆä¿æŒå¼€å¯ï¼‰</p><p>ä¸²å£è¾“å…¥ï¼ŒDMAåŒæ—¶è½¬è¿æ•°æ®</p><p>ä¼ è¾“å®Œæ¯•ï¼Œä¸²å£ç©ºé—²ä¸­æ–­</p><p>æ¸…é™¤æ ‡å¿—ä½</p><p>CMDå¤±èƒ½å…³é—­DMAé€šé“</p><p>è·å–DMAç¼“å­˜ä¸­æ•°æ®é•¿åº¦ä¸æ•°æ®</p><p>ï¼ˆåˆ‡æ¢æ¥æ”¶ç¼“å†²å™¨ï¼‰</p><p>æ›´æ–°DMAå‰©ä½™ç¼“å­˜ï¼ˆCNDTRï¼‰</p><p>CMDä½¿èƒ½å¼€å¯é€šé“ç­‰å¾…æ¥æ”¶  </p></blockquote><p>sendbyte(u8 t)ï¼Œä¸²å£ä¼šä»¥å¯¹åº”çš„å­—ç¬¦æ˜¾ç¤º</p><h3 id="USART1-DMA"><a href="#USART1-DMA" class="headerlink" title="USART1_DMA"></a>USART1_DMA</h3><p>â€‹    å› ä¸ºusart2çš„å¼•è„šå¯èƒ½è¦æ‹¿å»åšåˆ«çš„ï¼Œç»™USART1ä¹Ÿé…ä¸ªDMAã€‚</p><p>ç»™usart1é…ç½®DMAï¼Œæƒ³ç”¨è¿™äº›æ§åˆ¶ä»£ç ç¼–è¯‘çš„,è¿™æ ·åªç”¨æ”¹ä¸€ä¸ªå®å®šä¹‰å°±å¯ä»¥é€‰æ‹©é…ç½®æˆ–ä¸é…ç½®DMAï¼Œä½†æ˜¯å‡ºç°äº†è«åå…¶å¦™çš„é”™è¯¯ï¼Œå…ˆä¸ç”¨äº†ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> USART1_DMA 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>â€‹    é…ç½®äº†DMAåï¼Œä¸²å£1çš„printfå°±ä¸èƒ½ç”¨äº†ï¼Œä¼šå¡æ­»å¾ªç¯ã€‚ä¸è¿‡å¯ä»¥æ ¹æ®è‡ªå·±çš„é€šè®¯éœ€æ±‚å†™å‡ ä¸ªå‡½æ•°ï¼Œç”¨èµ·æ¥åè€Œæ›´åŠ æ–¹ä¾¿ã€‚</p><h4 id=""><a href="#" class="headerlink" title=" "></a> </h4><h5 id="sizeof"><a href="#sizeof" class="headerlink" title="sizeof( )"></a>sizeof( )</h5><p>è¿”å›çš„æ˜¯ä¸ç®—ç»“æŸç¬¦çš„å­—èŠ‚æ•°ï¼Œè€Œä¸æ˜¯ä½æ•°ã€‚å¦‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">5</span>] = <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">åˆ™</span><br><span class="line"><span class="comment">//printf_s(char *s, u8 newline)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> size = <span class="keyword">sizeof</span>(s) == <span class="number">4</span>;</span><br></pre></td></tr></table></figure><p>â€‹    æˆ‘å¤©çœŸçš„ä»¥ä¸ºè¿™æ˜¯å­—ç¬¦ä¸²çš„å¤§å°ï¼Œæˆ‘æ˜¯åæ¥æˆ‘å‘ç°è¿™ä¸ªsizeä¸€ç›´æ˜¯4ï¼Œæˆ‘æ„•ç„¶ï¼Œè¿™å…¶å®æ˜¯æŒ‡é’ˆçš„å¤§å°ã€‚</p><h5 id="malloc-n"><a href="#malloc-n" class="headerlink" title="malloc(n)"></a>malloc(n)</h5><p>nä¹Ÿæ˜¯åˆ†é…çš„<strong>å­—èŠ‚æ•°</strong>ï¼Œæ‰€ä»¥ä¹Ÿå¸¸å¸¸ä¼šçœ‹åˆ°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">something_t</span> *p = (something *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">something_t</span>));</span><br></pre></td></tr></table></figure><h5 id="sprintf"><a href="#sprintf" class="headerlink" title="sprintf( )"></a>sprintf( )</h5><p>ä¼šç›´æ¥è¦†ç›–åŸå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å‘æœ«å°¾æ·»åŠ ï¼Œå¦‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">5</span>] = <span class="string">&quot;1234&quot;</span>;</span><br><span class="line"><span class="built_in">sprintf</span>(s,<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">åˆ™</span><br><span class="line">s[<span class="number">0</span>]=<span class="string">&#x27;\r&#x27;</span>, s[<span class="number">1</span>]=<span class="string">&#x27;\n&#x27;</span>, s[<span class="number">2</span>]=<span class="string">&#x27;\0&#x27;</span>, s[<span class="number">3</span>]=<span class="string">&#x27;4&#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="strcat-amp-strncat"><a href="#strcat-amp-strncat" class="headerlink" title="strcat( ) &amp; strncat( )"></a>strcat( ) &amp; strncat( )</h5><h5 id="å‚æ•°ä¼ é€’"><a href="#å‚æ•°ä¼ é€’" class="headerlink" title="å‚æ•°ä¼ é€’"></a>å‚æ•°ä¼ é€’</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¶å®ƒä½è°ƒç”¨</span></span><br><span class="line"><span class="type">char</span> str[<span class="number">5</span>] = <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">printf_s(str,<span class="number">1</span>);<span class="comment">//æ–¹æ³•ä¸€</span></span><br><span class="line">printf_s(<span class="string">&quot;1234&quot;</span>,<span class="number">1</span>);<span class="comment">//æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="comment">//printf_s(char *s, u8 newline)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> size = <span class="keyword">sizeof</span>(s);</span><br><span class="line">    ......</span><br><span class="line">    <span class="built_in">strcat</span>(s,<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">    <span class="built_in">sprintf</span>(s,<span class="string">&quot;1234\r\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹    æ–¹æ³•ä¸€å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯å¤ªéº»çƒ¦ï¼›æ–¹æ³•äºŒä¼šè®©32åœæ­¢è¿è¡Œï¼Œä¸ªäººè®¤ä¸ºæ˜¯å› ä¸ºä¼ é€’è¿‡å»çš„æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä¸èƒ½å¤Ÿä¿®æ”¹ã€‚ä½†æ˜¯sizeèƒ½æ­£å¸¸è¿”å›ï¼Œå¦‚æœä¸å°è¯•å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸æ‰“å°ã€‚</p><p>â€‹    æƒ³æ¢è¡Œçš„è¯ï¼Œå¦‚æœ<code>printf_s(&quot;1234\r\n&quot;)</code>ï¼Œsizeof(s)è¿”å›çš„å€¼ä¾ç„¶æ˜¯4ï¼Œæ¯”è¾ƒå¥‡æ€ªã€‚ä¸ºäº†è°ƒç”¨èµ·æ¥æ–¹ä¾¿ï¼Œå¹²è„†ç›´æ¥æ–°å»ºä¸€ä¸ªå­—ç¬¦ä¸²æŒ‡é’ˆç®—äº†ã€‚</p><p><img src="C:\Users\Semitia\AppData\Roaming\Typora\typora-user-images\image-20230115153411523.png" alt="image-20230115153411523"></p><p>æˆ‘åœ¨debugé‡Œé¢ä¸€æ­¥æ­¥è¿›è¡Œå°±æ²¡æœ‰é—®é¢˜ï¼Œç»“æœå…¨é€Ÿè¿è¡Œçš„æ—¶å€™å°±å‡ºé—®é¢˜ï¼Œæˆ‘çœŸçš„æ “qäº†ã€‚</p><p><img src="C:\Users\Semitia\AppData\Roaming\Typora\typora-user-images\image-20230115154538616.png" alt="image-20230115154538616"></p><p>â€‹    </p><p>â€‹    å‘é€å­—ç¬¦ä¸²çš„æ—¶å€™è®¡ç®—lençš„æ—¶å€™åˆ«å¿˜äº†å¤šç®—ä¸€ä¸ªï¼Œæ˜¯ç•™ç»™ç»“æŸç¬¦çš„ç©ºé—´ã€‚å¦‚æœæ²¡æœ‰ç®—ä¸Šçš„è¯ï¼Œä¸²å£æ‰“å°å‡ºæ¥ä¼šæœ‰ä¸€äº›ä¹±ç ï¼ŒåŠ ä¸Šä¹‹åå°±æ²¡æœ‰äº†ï¼Œåº”è¯¥æ˜¯è¿™ä¸ªåŸå› å§ã€‚</p><h3 id="è“ç‰™SPP"><a href="#è“ç‰™SPP" class="headerlink" title="è“ç‰™SPP"></a>è“ç‰™SPP</h3><h4 id="åŸºæœ¬ä½¿ç”¨æ–¹æ³•"><a href="#åŸºæœ¬ä½¿ç”¨æ–¹æ³•" class="headerlink" title="åŸºæœ¬ä½¿ç”¨æ–¹æ³•"></a>åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h4><p>æ‰‹æœºå‘æ¶ˆæ¯çš„æ—¶å€™åˆ«å¿˜äº†åŠ å›è½¦</p><h4 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h4><p>â€‹    ä¹‹å‰UART2ï¼ŒUART3éƒ½æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯ä»Šå¤©è°ƒè¯•çš„æ—¶å€™å‘ç°æ’åœ¨UART3ä¸Šé¢ï¼Œè¿æ¥åˆ°è“ç‰™çš„æ—¶å€™å•ç‰‡æœºå°±ä¼šåœæ­¢è¿è¡Œã€‚</p><p>â€‹    DEBUGå‘ç°ç«Ÿç„¶å¡åœ¨15_10çš„ä¸­æ–­å‡½æ•°é‡Œé¢ï¼ŒæŸ¥è¯¢æ‰‹å†Œå‘ç°UART3çš„RXæ˜¯PB11ï¼Œè€Œè¿™ä¸ªä»£ç æ­£å¥½æŠŠPB11é…ç½®ä¸ºäº†è¶…å£°æ³¢æ¨¡å—çš„ä¸­æ–­å¼•è„šï¼Œä¸­æ–­å‡½æ•°é‡Œä¼šç­‰å¾…è¶…å£°æ³¢æ¨¡å—å›å¤çš„é«˜ç”µå¹³ï¼Œå¯¼è‡´ä¸€ç›´åœ¨ç­‰å¾…ã€‚ä¸€èˆ¬è¿™ä¸¤ä¸ªåŠŸèƒ½æ˜¯æ²¡æœ‰ä¸€èµ·ä½¿ç”¨çš„å¿…è¦çš„ï¼Œæ‰€ä»¥ç›´æ¥å…³é—­å…¶ä¸­ä¸€ä¸ªå³å¯ã€‚</p><p>â€‹    ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸²å£æ¥æ”¶åˆ°çš„æ•°æ®è§£æå‡ºç°é”™è¯¯ã€‚ç»“æœæ˜¯å› ä¸ºUSART3_RX_BUFå†™æˆäº†å¤åˆ¶çš„USART_RX_BUFæ²¡æ”¹è¿‡æ¥ğŸ˜‚ã€‚</p><h3 id="é€šè®¯åè®®"><a href="#é€šè®¯åè®®" class="headerlink" title="é€šè®¯åè®®"></a>é€šè®¯åè®®</h3><h4 id="USART1â€”â€”STM32ä¸ROS"><a href="#USART1â€”â€”STM32ä¸ROS" class="headerlink" title="USART1â€”â€”STM32ä¸ROS"></a>USART1â€”â€”STM32ä¸ROS</h4><p><strong>æ¶ˆæ¯ç±»å‹</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> WARN_MSG 1 <span class="comment">//warn</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SPD_MSG  2 <span class="comment">//speed</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> POS_MSG  3 <span class="comment">//position</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PARA_MSG 4 <span class="comment">// param</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DES_MSG  5 <span class="comment">//destination</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ACK_MSG  6 <span class="comment">//ACK</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INFO_MSG 7 <span class="comment">//</span></span></span><br></pre></td></tr></table></figure><h5 id="DES-MSG"><a href="#DES-MSG" class="headerlink" title="DES_MSG"></a>DES_MSG</h5><p>stm32å‘é€ç›®çš„åœ°åŠå½“å‰ä½ç½®</p><p><strong>ç¤ºä¾‹ï¼šâ€5+1234-4321+1111-2222+3333â€</strong></p><ul><li>å¸§å¤´ï¼š5</li><li>ç›®çš„åœ°æ¨ªåæ ‡+1234ï¼š1.234m</li><li>ç›®çš„åœ°çºµåæ ‡-4321ï¼š4.321m</li><li>å½“å‰æ¨ªåæ ‡+1111ï¼š1111mm</li><li>å½“å‰çºµåæ ‡-2222ï¼š2222mm</li><li>å½“å‰æœå‘+3333ï¼šå¼§åº¦åˆ¶3.333(ä¸ä¼šè¶…è¿‡Â±Ï€)</li><li>ç»“æŸç¬¦ï¼š\r\n</li></ul><h5 id="POS-MSG"><a href="#POS-MSG" class="headerlink" title="POS_MSG"></a>POS_MSG</h5><h6 id="stm32å‘é€å½“å‰åæ ‡ä¸æœå‘è§’åº¦"><a href="#stm32å‘é€å½“å‰åæ ‡ä¸æœå‘è§’åº¦" class="headerlink" title="stm32å‘é€å½“å‰åæ ‡ä¸æœå‘è§’åº¦"></a>stm32å‘é€å½“å‰åæ ‡ä¸æœå‘è§’åº¦</h6><p><strong>ç¤ºä¾‹</strong>ï¼š<strong>â€œ3+0282+9999+0000â€</strong></p><ul><li>å¸§å¤´</li></ul><h6 id="ROSå‘é€éœ€è¦åˆ°è¾¾çš„ä½ç½®"><a href="#ROSå‘é€éœ€è¦åˆ°è¾¾çš„ä½ç½®" class="headerlink" title="ROSå‘é€éœ€è¦åˆ°è¾¾çš„ä½ç½®"></a>ROSå‘é€éœ€è¦åˆ°è¾¾çš„ä½ç½®</h6><h5 id="SPD-MSG"><a href="#SPD-MSG" class="headerlink" title="SPD_MSG"></a>SPD_MSG</h5><p>ROSå‘é€å°è½¦è¿åŠ¨æŒ‡ä»¤</p><p><strong>è¿åŠ¨æ¶ˆæ¯ç±»å‹</strong></p><ul><li>for_bac=1ï¼šå‰å</li><li>turn=2ï¼šè½¬å‘</li></ul><p><strong>ç¤ºä¾‹ï¼šâ€21+1325\r\nâ€</strong></p><ul><li>å¸§å¤´ï¼š2</li><li>è¿åŠ¨ç±»å‹1ï¼šç›´çº¿é€Ÿåº¦ä¸º13.25</li><li>value+1325ï¼š</li></ul><h5 id="ACK"><a href="#ACK" class="headerlink" title="ACK"></a>ACK</h5><p>ROSå‘é€ACKè¡¨ç¤ºå·²ç»æ¥æ”¶DES_MSG</p><p><strong>ç¤ºä¾‹ï¼šâ€6\r\nâ€</strong></p><ul><li>å¸§å¤´ï¼š6</li><li>ç»“æŸç¬¦ï¼š\r\n</li></ul><h4 id="USART3â€”â€”STM32ä¸è“ç‰™æ¨¡å—"><a href="#USART3â€”â€”STM32ä¸è“ç‰™æ¨¡å—" class="headerlink" title="USART3â€”â€”STM32ä¸è“ç‰™æ¨¡å—"></a>USART3â€”â€”STM32ä¸è“ç‰™æ¨¡å—</h4><p>å¸§å¤´ä¸èƒ½ç”¨ç®€å•çš„å­—ç¬¦ï¼Œå› ä¸ºè“ç‰™æ¨¡å—åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šå‘é€å¤§é‡çš„ä¿¡æ¯ã€‚</p><h5 id="DES-MSG-1"><a href="#DES-MSG-1" class="headerlink" title="DES_MSG"></a>DES_MSG</h5><p><em>æ‰‹æœºé€šè¿‡è“ç‰™SPPå‘é€å°è½¦ç›®çš„åœ°</em></p><p>ç¤ºä¾‹ï¼š<strong>66612344321\r\n</strong></p><ul><li>å¸§å¤´ï¼š666</li><li>ç›®çš„åœ°æ¨ªåæ ‡ï¼š1234â€”â€”1.234m</li><li>ç›®çš„åœ°çºµåæ ‡ï¼š4321â€”â€”4.321m</li><li>ç»“æŸç¬¦ï¼š\r\n</li></ul><h5 id="SPD-MSG-1"><a href="#SPD-MSG-1" class="headerlink" title="SPD_MSG"></a>SPD_MSG</h5><p>ç¤ºä¾‹ï¼š<strong>â€œ668 +1673 +1293\r\nâ€</strong></p><ul><li>å¸§å¤´ï¼š668</li><li>é—´éš”ï¼š<strong>â€˜ â€˜</strong></li><li>ç›´çº¿é€Ÿåº¦+1673ï¼š16.73</li><li>è§’é€Ÿåº¦+1293ï¼š12.93</li><li>ç»“æŸç¬¦ï¼š\r\n</li></ul><h5 id="PARAM-MSG"><a href="#PARAM-MSG" class="headerlink" title="PARAM_MSG"></a>PARAM_MSG</h5><p><strong>å‚æ•°æ¶ˆæ¯ç±»å‹ï¼š</strong></p><ul><li>1ï¼š</li><li>2ï¼š</li><li>3ï¼š</li><li>4ï¼š</li><li>5:</li><li>6:</li><li>7ï¼šè½¬å‘ç¯KPï¼Œå€ç‡3</li><li>8ï¼šè½¬å‘ç¯KIï¼Œå€ç‡2</li></ul><p>ç¤ºä¾‹ï¼š<strong>â€œ667 8 +1000\r\nâ€</strong></p><ul><li><p>å¸§å¤´ï¼š668</p></li><li><p>é—´éš”ï¼š<strong>â€˜ â€˜</strong></p></li><li><p>å‚æ•°ç±»å‹8ï¼šè½¬å‘ç¯KI</p></li><li><p>value+1000ï¼šKI=10</p></li><li></li></ul><h2 id="æ§åˆ¶ä»£ç "><a href="#æ§åˆ¶ä»£ç " class="headerlink" title="æ§åˆ¶ä»£ç "></a>æ§åˆ¶ä»£ç </h2><h1 id="LattePanda"><a href="#LattePanda" class="headerlink" title="LattePanda"></a>LattePanda</h1><h2 id="å‰è¨€ä¸Ubuntu18-04å®‰è£…"><a href="#å‰è¨€ä¸Ubuntu18-04å®‰è£…" class="headerlink" title="å‰è¨€ä¸Ubuntu18.04å®‰è£…"></a>å‰è¨€ä¸Ubuntu18.04å®‰è£…</h2><p>â€‹    åŸæœ¬ç”¨çš„æ˜¯æ ‘è“æ´¾3Bï¼Œå®˜æ–¹çš„desktopç‰ˆæœ¬åªæœ‰22.04ç‰ˆçš„ï¼Œè£…ä¸Šä¹‹åå¥‡å¡æ— æ¯”ï¼Œæµè§ˆå™¨éƒ½ä¼šé—ªé€€ã€‚ä½†æ˜¯è¿™æ ·ä¹Ÿèƒ½ç”¨ï¼Œä¹‹åè£…ä¸Šäº†ROS2ï¼Œæƒ¨ç—›çš„å‘ç°åœ¨ç»ˆç«¯ç¼–è¯‘éƒ½ä¼šé—ªé€€ï¼Œæ‰€ä»¥å°è¯•æ¢æˆ18.04ï¼ˆæ„Ÿè§‰å¯¹æ€§èƒ½è¦æ±‚ä¼šä½ä¸€äº›ï¼‰ï¼Œæ­£å¥½18.04ä¹Ÿä¸å‚å®¶ä»£ç æ›´é€‚é…ï¼Œæ‰€ä»¥å°è¯•è£…äº†serverç‰ˆæœ¬ï¼Œå› ä¸ºæ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢ï¼Œéœ€è¦è‡ªå·±è”ç½‘ï¼Œå®‰è£…å›¾å½¢åŒ–ç•Œé¢ï¼Œè¿‡ç¨‹æ¯”è¾ƒæ›²æŠ˜ã€‚å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡åšå®¢</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://zhuanlan.zhihu.com/p/372861457">æ ‘è“æ´¾4Bå®‰è£…Ubuntu18.04+ROS Melodicç»ˆææ•™ç¨‹ - çŸ¥ä¹ (zhihu.com)</a></p></div><p>å®‰è£…ROSçš„è¯æˆ‘å‘ç°äº†ä¸€ä¸ªç¥ä»™åšä¸»æä¾›çš„ä¸€é”®å®‰è£…å‘½ä»¤ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://blog.csdn.net/qq_27865227/article/details/120191557?ops_request_misc=%7B%22request%5Fid%22%3A%22166141462416782391868234%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fblog.%22%7D&amp;request_id=166141462416782391868234&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-120191557-null-null.nonecase&amp;utm_term=å¦‚ä½•ä¸€è¡Œä»£ç &amp;spm=1018.2226.3001.4450">(15æ¡æ¶ˆæ¯) å¦‚ä½•ä¸€è¡Œä»£ç å®‰è£…ROS|2022æœ€æ–°ç‰ˆ|ä¸€è¡Œä»£ç å®‰è£…ROS2|ä¸€è¡Œä»£ç è§£å†³rosdep|ä¸€è¡Œä»£ç é…ç½®å¤šROSç¯å¢ƒ_é±¼é¦™ROSçš„åšå®¢-CSDNåšå®¢_roså®‰è£…è„šæœ¬</a></p></div><p>å¯æ˜¯å®‰è£…å®Œäº†ä¹‹åæˆ‘æ‚²æƒ¨çš„å‘ç°ï¼Œå°±æ˜¯æ ‘è“æ´¾æ€§èƒ½ä¸å¤Ÿï¼Œå›¾å½¢åŒ–ç•Œé¢è£…å®Œäº†ä¹‹åç›´æ¥æ˜¾ç¤ºèŠ±å±ã€‚</p><p>â€‹    æ‰€ä»¥æˆ‘å¹²è„†ä¸€é¼“ä½œæ°”ä¹°äº†ä¸ª<strong>LattePanda2</strong>ï¼Œæ€§èƒ½æ®è¯´çº¦ç­‰äºä¸¤ä¸ªæ ‘è“æ´¾4Bï¼Œå…«ä¸ªæ ‘è“æ´¾3Bã€‚æ˜¯X86æ¶æ„çš„ï¼Œè‡ªå¸¦Win10ï¼Œè¿˜é™„å¸¦äº†ä¸€ä¸ªLeonardoå‹å·çš„Arduinoï¼ŒçœŸä¸é”™ã€‚</p><h3 id="å®‰è£…Ubuntu18-04"><a href="#å®‰è£…Ubuntu18-04" class="headerlink" title="å®‰è£…Ubuntu18.04"></a>å®‰è£…Ubuntu18.04</h3><p>â€‹    Tipsï¼š</p><ul><li>ä¾›ç”µéœ€è¦ä¸€ä¸ªæ‰‹æœºå……ç”µå¤´å’Œä¸€ä¸ªè´¨é‡ä¸é”™çš„æ•°æ®çº¿ï¼Œè‡³å°‘2Aã€‚(ä¹‹å‰æ ‘è“æ´¾å…ˆæ˜¯éšä¾¿æ‰¾äº†ä¸€æ ¹çº¿ï¼Œç»“æœä¸€ç›´æ˜¾ç¤ºä¾›ç”µä¸è¶³)</li><li>ç”¨ä½œå¯åŠ¨ç›˜çš„Uç›˜è´¨é‡ä¹Ÿè¦å¥½ä¸€ç‚¹ï¼Œä¸ç„¶ä¼šä¸€ç›´åˆ»å½•å¤±è´¥ï¼ˆä¸€å¼€å§‹ç”¨çš„é€çš„Uç›˜ï¼Œç»“æœæŠ˜è…¾åŠå¤©ï¼‰</li></ul><p>å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡æ–‡ç« ï¼ˆè™½ç„¶æ˜¯è‹±æ–‡çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥çœ‹æ‡‚ï¼Œè€Œä¸”è¯´çš„å¾ˆè¯¦ç»†ï¼‰</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://github.com/imranmatin23/LattePanda-Ubuntu18.04-Spinnaker-Installation/blob/master/README_UBUNTU.md">LattePanda-Ubuntu18.04-Spinnaker-Installation/README_UBUNTU.md at master Â· imranmatin23/LattePanda-Ubuntu18.04-Spinnaker-Installation (github.com)</a></p></div><p>é•œåƒä¸‹è½½é“¾æ¥</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://releases.ubuntu.com/18.04/">Ubuntu 18.04.6 LTS (Bionic Beaver)</a></p></div><p>â€‹    æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…ç³»ç»Ÿï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¸Šé¢çš„åšå®¢ã€‚æœ‰ä¸€ç‚¹éœ€è¦é¢å¤–æä¸€å˜´ï¼Œå°±æ˜¯å®‰è£…åˆ°åé¢å‘ç°ä¸€ç›´æ˜¯ä¸€ä¸ªæ©™é»„è‰²èƒŒæ™¯ï¼Œæ²¡æœ‰æ˜¾ç¤ºä»»ä½•å…¶ä»–çª—å£ï¼Œä½†æ˜¯ä¼šå‘ç°èƒ½æ‹–å‡ºé¼ æ ‡ï¼ŒæŒ‰é”®ç›˜ä¹Ÿæœ‰ååº”ã€‚å…¶å®æ˜¯å› ä¸ºLattePandaå†…ç½®ä¸€ä¸ªå±å¹•ï¼Œä½†æ˜¯å¦‚æœç›´æ¥åªç”¨HDMIè¿æ˜¾ç¤ºå±çš„è¯è¿™ä¸ªæ˜¯çœ‹ä¸åˆ°çš„ï¼Œç›¸å½“äºåœ¨å·¦ä¸Šè§’æœ‰ä¸€ä¸ªçœ‹ä¸è§ä¸»å±å¹•ï¼Œç³»ç»Ÿå®‰è£…çš„æ“ä½œçª—å£åœ¨é‚£è¾¹ã€‚æ‰€ä»¥åªèƒ½å°è¯•ç”¨é¼ æ ‡æŠŠé‚£è¾¹çš„çª—å£æ‹–è¿‡æ¥ï¼Œå¤šè¯•å‡ æ¬¡æ€»èƒ½æŠ“è¿‡æ¥çš„ğŸ˜‚ã€‚</p><h3 id="è¿œç¨‹æ¡Œé¢"><a href="#è¿œç¨‹æ¡Œé¢" class="headerlink" title="è¿œç¨‹æ¡Œé¢"></a>è¿œç¨‹æ¡Œé¢</h3><ul><li>ä½¿ç”¨è½¯ä»¶ï¼šNo machine</li></ul><p>â€‹    åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹ï¼Œä¸»æœºä¸Šçš„å®¢æˆ·ç«¯å¯ä»¥æœç´¢åˆ°Ubuntuï¼ŒåŒå‡»è¿æ¥ã€‚æ¥ä¸‹æ¥éœ€è¦è¾“å…¥ç”¨æˆ·å’Œå¯†ç ï¼Œå°±æ˜¯å¯¹åº”Ubuntuä¸Šçš„ç”¨æˆ·åå’Œå¯†ç ã€‚æˆ‘è®¾ç½®çš„ç”¨æˆ·åæ˜¯<strong>Anya</strong>ï¼Œè®¡ç®—æœºåæ˜¯<strong>Bonder</strong>ï¼Œæ‰€ä»¥è¾“å…¥ <strong>anya</strong> å’Œ <strong>å¯†ç </strong>ã€‚</p><emp>æ³¨æ„è¿™é‡Œçš„ç”¨æˆ·åæ˜¯ä¸ç”¨è¾“å…¥å¤§å†™çš„ï¼ŒåŒºåˆ†äº†å¤§å°å†™åè€Œä¼šè¿æ¥ä¸ä¸Šã€‚</emp><h2 id="ROS1"><a href="#ROS1" class="headerlink" title="ROS1"></a>ROS1</h2><h3 id="å®‰è£…melodic"><a href="#å®‰è£…melodic" class="headerlink" title="å®‰è£…melodic"></a>å®‰è£…melodic</h3><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://github.com/imranmatin23/LattePanda-Ubuntu18.04-Spinnaker-Installation/blob/master/README_UBUNTU.md">LattePanda-Ubuntu18.04-Spinnaker-Installation/README_UBUNTU.md at master Â· imranmatin23/LattePanda-Ubuntu18.04-Spinnaker-Installation (github.com)</a></p></div><h3 id="å·¥ä½œç©ºé—´é…ç½®"><a href="#å·¥ä½œç©ºé—´é…ç½®" class="headerlink" title="å·¥ä½œç©ºé—´é…ç½®"></a>å·¥ä½œç©ºé—´é…ç½®</h3><p>æŒ‰ç…§å‡†å¤‡å·¥ä½œæ‰‹å†Œé…ç½®ï¼Œä¸è¿‡è¿˜æ˜¯ä¼šç¢°åˆ°ä¸å°‘é—®é¢˜ã€‚</p><p>æ‰‹å†Œé“¾æ¥</p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i></div><h4 id="è¿˜è¦å…ˆå®‰è£…ä¸€å¤§å †åŒ…"><a href="#è¿˜è¦å…ˆå®‰è£…ä¸€å¤§å †åŒ…" class="headerlink" title="è¿˜è¦å…ˆå®‰è£…ä¸€å¤§å †åŒ…"></a>è¿˜è¦å…ˆå®‰è£…ä¸€å¤§å †åŒ…</h4><ul><li>geographic-msgs</li><li>moveit-core</li><li>world-canvas-msgs</li><li>moveit-visual-tools</li><li>moveit-ros-move-group</li><li>moveit-ros-planning-interface</li></ul><h4 id="ä¸­é—´å‡ºç°äº†ä¸€äº›é—®é¢˜"><a href="#ä¸­é—´å‡ºç°äº†ä¸€äº›é—®é¢˜" class="headerlink" title="ä¸­é—´å‡ºç°äº†ä¸€äº›é—®é¢˜"></a>ä¸­é—´å‡ºç°äº†ä¸€äº›é—®é¢˜</h4><blockquote><p>E: æ— æ³•è·å¾—é” /var/lib/dpkg/lock-frontend - open (11: èµ„æºæš‚æ—¶ä¸å¯ç”¨)<br>E: æ— æ³•è·å– dpkg å‰ç«¯é” (/var/lib/dpkg/lock-frontend)ï¼Œæ˜¯å¦æœ‰å…¶ä»–è¿›ç¨‹æ­£å ç”¨å®ƒï¼Ÿ</p></blockquote><p>å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡æ–‡ç« </p><div class="note orange icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><a href="https://blog.csdn.net/zhang33565417/article/details/105164356">(17æ¡æ¶ˆæ¯) è§£å†³ Ubuntuä¸­ â€˜E: æ— æ³•è·å¾—é” /var/lib/dpkg/lock-frontend - open (11: èµ„æºæš‚æ—¶ä¸å¯ç”¨) â€™ é—®é¢˜_ç¨‹åºçŒ¿ç§ƒå¤´ä¹‹è·¯çš„åšå®¢-CSDNåšå®¢</a></p></div><p>é‡Œé¢çš„ä¸€äº›å‘½ä»¤çš„è§£é‡Šï¼š</p><blockquote><p>æ— æ³•å®šä½è½¯ä»¶åŒ… ros-melodic-world-canvas-msgs</p></blockquote><p>è¿™æ ·çš„è¯å¹²è„†ç›´æ¥åœ¨<strong>Github</strong>ä¸‹è½½ï¼Œç„¶åç²˜è´´åˆ° <em>/å·¥ä½œç©ºé—´/src</em> ä¸‹é¢ï¼Œé‡å‘½åä¸º <strong>world_canvas_msgs</strong>ã€‚</p><p><a href="https://github.com/corot/world_canvas_msgs">corot/world_canvas_msgs: Messages and services for the semantic maps framework (github.com)</a></p><p>â€‹    ä½†æ˜¯ç¼–è¯‘å‡ºæ¥æŠ¥é”™ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯åŒ…ä¸å¯¹ï¼Œå…¶ä»–åœ°æ–¹ä¹Ÿæ‰¾ä¸åˆ°è¿™ä¸ªåŒ…äº†ã€‚è¿™ä¸ªåŒ…å®é™…ä¸Šä¹Ÿä¸æ˜¯ <strong>melodic</strong> ç‰ˆæœ¬çš„ï¼Œä¸çŸ¥é“è¿™ä¸ªå•†å®¶å’‹æçš„ã€‚</p><p>â€‹    é‚£è¿™æ ·ä¸€ç›´å¡ç€ä¹Ÿä¸æ˜¯ä¸ªåŠæ³•ï¼Œæ‰€è°“<strong>æ–­è‡‚æ±‚ç”Ÿ</strong>ï¼Œå¹²è„†ç›´æ¥æŠŠ <strong>/src</strong>é‡Œé¢çš„åŒ…éƒ½åˆ æ‰ï¼Œåªç•™ä¸ªé©±åŠ¨åŒ…ï¼Œæ€»ç®—æ˜¯æˆåŠŸç¼–è¯‘ã€‚</p><blockquote><p>RVIZä¸æ˜¾ç¤ºå›¾å½¢åŒ–ç•Œé¢</p></blockquote><p>â€‹    ä¸ç®¡æˆ‘æ€ä¹ˆè¯•ï¼ŒRVIZåªæ˜¯æ˜¾ç¤ºåº”ç”¨å›¾æ ‡ï¼Œä¸æ˜¾ç¤ºå›¾å½¢åŒ–ç•Œé¢ã€‚æœ€åå½“æˆ‘æƒ³ä¸ç®¡è¿™ä¸ªçš„æ—¶å€™ï¼Œæˆ‘å³é”®äº†ä¸€ä¸‹è¿™ä¸ªè½¯ä»¶å›¾æ ‡ï¼Œå‘ç°å¯ä»¥çœ‹åˆ°è¿™ä¸ªå°çª—å£ï¼Œè€Œä¸”æ˜¯åŠ¨æ€çš„ã€‚æˆ‘é™é»˜ç‰‡åˆ»ï¼Œèµ«ç„¶ä¸€æƒŠï¼Œåˆå¦‚è§¦ç”µä¸€èˆ¬æƒ³èµ·æ¥LattePandaå†…ç½®æœ‰ä¸€ä¸ªè™šæ‹Ÿå±å¹•ï¼Œæˆ‘é¢¤æŠ–ç€å°†é¼ æ ‡æ‹½å‘å·¦ä¸Šè§’çš„è™šç©ºï¼Œè¯•æ¢æ€§çš„æ‹–ç€ä»€ä¹ˆï¼Œè¿˜çœŸæ‹–å‡ºæ¥äº†ä¸ªçª—å£â€¦â€¦å“ˆå“ˆå“ˆå“ˆï¼</p><p>â€‹    è™½ç„¶æˆ‘æ›´æ”¹äº†ä¸»å±å¹•ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æ¯…ç„¶å†³ç„¶çš„åœç”¨äº†è¿™ä¸ªå†…ç½®å±å¹•ï¼Œå¤ªå®³äººäº†ã€‚</p><h4 id="æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ ç¯å¢ƒå˜é‡"></a>æ·»åŠ ç¯å¢ƒå˜é‡</h4><pre><code>å› ä¸ºæ¯æ¬¡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯å°±è¦sourceè¿è¡Œä¸€ä¸‹åŠŸèƒ½åŒ…çš„å¯åŠ¨è„šæœ¬ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥å¹²è„†ç›´æ¥æ·»åŠ åˆ°ç¯å¢ƒå˜é‡å½“ä¸­ï¼Œè¿™æ ·æ¯æ¬¡æ–°å¼€ç»ˆç«¯å°±ä¼šè‡ªåŠ¨è¿è¡Œã€‚</code></pre><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;source ~/[å·¥ä½œç©ºé—´]/devel/setup.bash&quot; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨é›·è¾¾"><a href="#å¯åŠ¨é›·è¾¾" class="headerlink" title="å¯åŠ¨é›·è¾¾"></a>å¯åŠ¨é›·è¾¾</h4><p>è¿è¡Œ<strong>launchæ–‡ä»¶</strong>ï¼Œé›·è¾¾æ€»ç®—æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch ydlidar_ros_driver X2.launch</span><br></pre></td></tr></table></figure><h3 id="è®¢é˜…é›·è¾¾æŠ¥æ–‡"><a href="#è®¢é˜…é›·è¾¾æŠ¥æ–‡" class="headerlink" title="è®¢é˜…é›·è¾¾æŠ¥æ–‡"></a>è®¢é˜…é›·è¾¾æŠ¥æ–‡</h3><pre><code>å¯ä»¥é€šè¿‡`rostopic type [topic]`æŸ¥çœ‹è¯é¢˜æ¶ˆæ¯ç±»å‹ï¼Œé›·è¾¾è¿”å›çš„æŠ¥æ–‡ç±»å‹æ˜¯`&lt;sensor_msgs::LaserScan&gt;`ï¼Œè¯é¢˜æ˜¯`scan`è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯åœ¨æ–°ç»ˆç«¯ä½¿ç”¨`rostopic echo`çš„æ—¶å€™ä¹Ÿè¦å…ˆ`source [å·¥ä½œç©ºé—´]/devel/setup.bash`ï¼Œä¸ç„¶æ˜¯ä¼šæŠ¥é”™çš„ã€‚å¦‚æœäº‹å…ˆæ·»åŠ è¿‡ç¯å¢ƒå˜é‡çš„è¯å°±æ²¡æœ‰å…³ç³»äº†ã€‚</code></pre><blockquote><p>ERROR:Cannot load message class foe [message]. Are your messages built?</p></blockquote><h4 id="æŠ¥æ–‡æ ¼å¼"><a href="#æŠ¥æ–‡æ ¼å¼" class="headerlink" title="æŠ¥æ–‡æ ¼å¼"></a>æŠ¥æ–‡æ ¼å¼</h4><ul><li>seq æ˜¯æ¶ˆæ¯çš„é¡ºåºæ ‡è¯†å‘å¸ƒèŠ‚ç‚¹åœ¨å‘å¸ƒæ¶ˆæ¯æ—¶ï¼Œä¼šè‡ªåŠ¨ç´¯åŠ </li><li>stamp æ˜¯æ¶ˆæ¯ä¸­ä¸æ•°æ®ç›¸å…³è”çš„æ—¶é—´æˆ³</li><li>frame_id æ˜¯æ¶ˆæ¯ä¸­ä¸æ•°æ®ç›¸å…³è”çš„å‚è€ƒç³»id</li><li>angle_min èµ·å§‹è§’åº¦ï¼ˆradï¼‰</li><li>angle_max ç»“æŸè§’åº¦ï¼ˆradï¼‰</li><li>angle_increment è§’åº¦åˆ†è¾¨ç‡ï¼ˆradï¼‰</li><li>time_increment æ¯ä¸ªè§’åº¦æ‰«ææ—¶é—´</li><li>scan_time æ‰«æé—´éš”</li><li>range_min æµ‹é‡çš„æœ€å°è·ç¦»</li><li>range_max æµ‹é‡çš„æœ€å¤§è·ç¦»</li><li>ranges å„ä¸ªè§’åº¦çš„æµ‹é‡è·ç¦»</li><li>intensities å„ä¸ªè§’åº¦çš„å¼ºåº¦å€¼</li></ul><p><img src="https://s2.loli.net/2023/01/09/A53aZ4CfiVo6TRr.png" alt="é›·è¾¾æŠ¥æ–‡.png"></p><h4 id="æŠ¥æ–‡è§£æ"><a href="#æŠ¥æ–‡è§£æ" class="headerlink" title="æŠ¥æ–‡è§£æ"></a>æŠ¥æ–‡è§£æ</h4><pre><code>ä»0åˆ°nï¼Œå‡åŒ€åˆ†ä¸º8ç»„ã€‚å‡è®¾é›·è¾¾ä¸‰è§’æŒ‡å‘çš„æ–¹å‘ä¸ºå‰æ–¹ï¼Œé‚£ä¹ˆè¿™8ç»„å¯ä»¥ä¾æ¬¡åˆ’åˆ†ä¸º **back, back_right, right, front_right, front, front_left, left, back_left**</code></pre><h3 id="é¿éšœå®ç°"><a href="#é¿éšœå®ç°" class="headerlink" title="é¿éšœå®ç°"></a>é¿éšœå®ç°</h3><pre><code>å¤§è‡´çŸ¥é“é›·è¾¾æŠ¥æ–‡çš„æ„æ€ä¹‹åï¼Œå°±å¯ä»¥å†™ä¸€ä¸ªå¾ˆç®€å•çš„é¿éšœæ€è·¯äº†ã€‚æ ¹æ®å…«ä¸ªæ–¹å‘çš„**ranges[]** åˆ¤æ–­æ˜¯å¦ç¦»éšœç¢ç‰©è¿‡è¿‘ï¼Œè¿‡è¿‘åˆ™å°†`unsigned char warn`çš„ç›¸åº”ä½ç½®ä¸€ï¼Œæœ€ååªéœ€è¦ç”¨ä¸²å£ä¼ è¾“ä¸€ä¸ª **8å­—èŠ‚**çš„æ•°å°±å¯ä»¥å¸®åŠ©32è¿›è¡Œé¿éšœäº†ã€‚è‡ªå·±å†™å‘¢ä¸»è¦æ˜¯å®ç°èµ·æ¥ç›¸å¯¹ç®€å•ï¼Œè€Œä¸”è‡ªå·±ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œæ‰€ä»¥æ²¡æœ‰å»ç ”ç©¶ä½¿ç”¨æ›´å‰å®³çš„é¿éšœç®—æ³•ã€‚ä¸è¿‡è¿˜æ˜¯å…ˆæ”¶é›†ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆä¸é”™çš„åšå®¢</code></pre><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>]</p><p><a href="https://blog.csdn.net/ben_xiao_hai_123/article/details/119541384">æ¿€å…‰é›·è¾¾SLAMå»ºå›¾å¯¼èˆªç›¸å…³ç®—æ³•ï¼ˆgmapping DWA tebï¼‰åŠåŸç†ï¼ˆCostmapï¼‰èµ„æ–™æ”¶å½•_kay880çš„åšå®¢-CSDNåšå®¢_gmapping è·å–costmap</a></p></div><h3 id="ä¸²å£é€šè®¯"><a href="#ä¸²å£é€šè®¯" class="headerlink" title="ä¸²å£é€šè®¯"></a>ä¸²å£é€šè®¯</h3><pre><code>  å¯ä»¥å…ˆç”¨cutecomæµ‹è¯•ä¸€ä¸‹ä¸²å£åŠŸèƒ½ï¼Œä¸è¿‡å¥½åƒè¦è®¾ç½®ä¸º**CR/LF**æ‰èƒ½æ­£å¸¸é€šè®¯ã€‚**CR**è¡¨ç¤ºå›è½¦ï¼Œ**LF**è¡¨ç¤ºæ¢è¡Œï¼Œä¹Ÿå°±æ˜¯åˆ†åˆ«å¯¹åº”ç€**\r\n**ï¼Œstm32ä¸Šä¸²å£æ¶ˆæ¯æ¥æ”¶çš„ç»“æŸæ ‡å¿—æ˜¯**\r\n**</code></pre><p>â€‹    æˆ‘è¿™é‡Œä½¿ç”¨çš„ä¸²å£æ˜¯<strong>/dev/ttyUSB0</strong></p><h4 id="è‡ªå®šä¹‰msg"><a href="#è‡ªå®šä¹‰msg" class="headerlink" title="è‡ªå®šä¹‰msg"></a>è‡ªå®šä¹‰msg</h4><blockquote><p>find_package(</p><p>)</p><p>catkin_package(</p><p>)</p></blockquote><p>â€‹    find_packageé‡Œé¢çš„æ˜¯ç¼–è¯‘æˆ‘ä»¬è¿™ä¸ªåŠŸèƒ½åŒ…æ—¶æ‰€ä¾èµ–çš„åŒ…ã€‚è€Œcatkin_pckageé‡Œé¢çš„åˆæ˜¯ä¾èµ–çš„è¿™äº›åŒ…æ‰€ä¾èµ–çš„åŒ…ã€‚å‰è€…é…ç½®æ²¡é—®é¢˜è€Œåè€…é…ç½®æœ‰é—®é¢˜æ—¶ï¼Œå¯èƒ½å¯¼è‡´ç¼–è¯‘æ— è¯¯ä½†æ˜¯è¿è¡Œæ—¶å‡ºé”™ã€‚æ‰€ä»¥åˆå¯ä»¥å°†è¿™ä¸¤ä¸ªåˆ†åˆ«è®°ä¸º <em>ç¼–è¯‘æ—¶ä¾èµ–</em> ä¸ <em>è¿è¡Œæ—¶ä¾èµ–</em>ã€‚</p><p>(æŒ‰ç…§autolaborå®˜æ–¹æ‰‹å†Œé…ç½®)</p><p>åŠŸèƒ½åŒ…ä¸‹æ–°å»ºmsgç›®å½•ï¼Œæ·»åŠ <strong>UART.msg</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="type">char</span> warn_msg</span><br></pre></td></tr></table></figure><p><strong>package.xml</strong>æ·»åŠ åŒ…ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>message_runtime<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>CmakeLists.txt</strong>æ·»åŠ msgé…ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">find_package(catkin REQUIRED COMPONENTS</span><br><span class="line">  roscpp</span><br><span class="line">  rospy</span><br><span class="line">  std_msgs</span><br><span class="line">  message_generation</span><br><span class="line">)</span><br><span class="line">## é…ç½® msg æºæ–‡ä»¶</span><br><span class="line">add_message_files(</span><br><span class="line">  FILES</span><br><span class="line">  Person.msg</span><br><span class="line">)</span><br><span class="line"># ç”Ÿæˆæ¶ˆæ¯æ—¶ä¾èµ–äº std_msgs</span><br><span class="line">generate_messages(</span><br><span class="line">  DEPENDENCIES</span><br><span class="line">  std_msgs</span><br><span class="line">)</span><br><span class="line">#æ‰§è¡Œæ—¶ä¾èµ–</span><br><span class="line">catkin_package(</span><br><span class="line">#  INCLUDE_DIRS include</span><br><span class="line">#  LIBRARIES demo02_talker_listener</span><br><span class="line">  CATKIN_DEPENDS roscpp rospy std_msgs message_runtime</span><br><span class="line">#  DEPENDS system_lib</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/01/10/4doaeZhf9W6TPlz.png" alt="debug_msg2.png"></p><p><img src="https://s2.loli.net/2023/01/10/MWpUkriCHITc7wK.png" alt="debug_msg1.png"></p><p>éœ€è¦åœ¨<strong>.xml</strong>é‡Œæ·»åŠ <strong>std_msg</strong>åŒ…ï¼›<strong>CmakeLists</strong>é‡Œ <em>generate_messages</em> é‡å¤å®šä¹‰ï¼Œéœ€è¦åˆ æ‰ã€‚</p><h4 id="ä¸²å£è°ƒç”¨"><a href="#ä¸²å£è°ƒç”¨" class="headerlink" title="ä¸²å£è°ƒç”¨"></a>ä¸²å£è°ƒç”¨</h4><p>å› ä¸ºæ˜¯<strong>melodic</strong>ç‰ˆæœ¬ï¼Œæœ‰å¯¹åº”çš„<strong>serial</strong>åŒ…ï¼Œæ‰€ä»¥é…ç½®èµ·æ¥å°±æ¯”åœ¨<strong>noetic</strong>ä¸Šé¢è¦æ–¹ä¾¿ä¸å°‘ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-melodic-serial</span><br></pre></td></tr></table></figure><h5 id="è°ƒç”¨è‡ªå®šä¹‰å¤´æ–‡ä»¶serial-head-h"><a href="#è°ƒç”¨è‡ªå®šä¹‰å¤´æ–‡ä»¶serial-head-h" class="headerlink" title="è°ƒç”¨è‡ªå®šä¹‰å¤´æ–‡ä»¶serial_head.h"></a>è°ƒç”¨è‡ªå®šä¹‰å¤´æ–‡ä»¶serial_head.h</h5><p>â€‹    ä¸ºäº†æ–¹ä¾¿åœ¨å„ä¸ªæ–‡ä»¶é‡Œè°ƒç”¨ä¸²å£ï¼Œå¹²è„†ç›´æ¥å†™ä¸€ä¸ªå°è£…ä¸²å£å„ä¸ªåŠŸèƒ½çš„å¤´æ–‡ä»¶ï¼Œä¾›å…¶ä»–æºæ–‡ä»¶è°ƒç”¨ã€‚</p><p>â€‹    éœ€è¦åœ¨<code>/åŠŸèƒ½åŒ…/include/åŠŸèƒ½åŒ…å</code>ä¸‹åˆ›å»º<strong>å¤´æ–‡ä»¶</strong>ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨vscodeç¼–å†™ä»£ç ï¼Œéœ€è¦æ·»åŠ è·¯å¾„ã€‚</p><p><code>&quot;/home/ç”¨æˆ·/å·¥ä½œç©ºé—´/src/åŠŸèƒ½åŒ…/include/**&quot;</code></p><p>â€‹    æºæ–‡ä»¶é‡Œè°ƒç”¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;[åŒ…å]/[å¤´æ–‡ä»¶].h&quot;</span></span></span><br></pre></td></tr></table></figure><p>â€‹    é…ç½®<strong>CmakeLists</strong></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span></span><br><span class="line">  <span class="variable">$&#123;catkin_INCLUDE_DIRS&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="å‘é€æ•°æ®"><a href="#å‘é€æ•°æ®" class="headerlink" title="å‘é€æ•°æ®"></a>å‘é€æ•°æ®</h4><p>â€‹    ä¸²å£åŒ…å‘é€çš„æ•°æ®éœ€è¦æ˜¯<code>string</code>ç±»å‹ã€‚</p><p>â€‹    å¦‚æœç›´æ¥å‘é€å›ºå®šçš„å­—ç¬¦ä¸²å€’æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥ç›´æ¥ä¸32é€šè®¯ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string msgs = <span class="string">&quot;123456\r\n&quot;</span>;</span><br><span class="line">ser.<span class="built_in">SendMsgs</span>(msgs);</span><br></pre></td></tr></table></figure><p>â€‹    ä½†æ˜¯å®é™…ä¸Šéœ€è¦å°†<code>u8</code>ç±»å‹çš„æ•°æ®è½¬åŒ–ä¸º<code>string</code>ç±»å‹ç„¶åå‘é€ã€‚</p><p>â€‹    ä½†æ˜¯ä¸èƒ½ç›´æ¥åƒè¿™æ ·æŠŠæ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚ä¸€å¼€å§‹çš„æ—¶å€™æˆ‘å°±æ˜¯è¿™æ ·åšçš„ï¼Œä½†æ˜¯è®©ROSè‡ªå·±å‘é€è‡ªå·±æ¥æ”¶æµ‹è¯•å‘ç°æ ¹æœ¬æ˜¾ç¤ºä¸å‡ºå­—ç¬¦ä¸²ï¼Œå¦‚æœç›´æ¥å‘é€ç»™32çš„è¯ï¼Œ32ä¼šç›´æ¥åœæ­¢è¿è¡Œã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">string msgs;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> number=<span class="number">123</span>;</span><br><span class="line">msgs[<span class="number">0</span>] = number/<span class="number">100</span> + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">number%=<span class="number">100</span>;</span><br><span class="line">msgs[<span class="number">1</span>] = number/<span class="number">10</span> + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">number%=<span class="number">10</span>;</span><br><span class="line">msgs[<span class="number">2</span>] = number + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">msgs[<span class="number">3</span>] = <span class="string">&#x27;\r&#x27;</span>;</span><br><span class="line">msgs[<span class="number">4</span>] = <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">msgs[<span class="number">5</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"><span class="built_in">SendMsgs</span>(msgs);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¦‚æœç›´æ¥è¾“å…¥å­—ç¬¦ä¸²å°±æ²¡æœ‰ä»»ä½•é—®é¢˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string msgs = <span class="string">&quot;123\r\n&quot;</span>;</span><br><span class="line"><span class="built_in">SendMsgs</span>(msgs);</span><br></pre></td></tr></table></figure><p>â€‹    å¾ˆå¥‡æ€ªçš„æ˜¯å¦‚æœå°†ä¸¤è€…çš„å…ƒç´ éƒ½åˆ†åˆ«æ‰“å°å‡ºæ¥çš„è¯æ˜æ˜æ˜¯æ²¡æœ‰ä»»ä½•åŒºåˆ«çš„ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ç»“æŸç¬¦ã€‚</p><p>â€‹    ä¸å¾—ä¸è¯´ç”¨è¿™ç©æ„å„¿DEBUGæ˜¯çœŸå¿ƒéš¾å—ï¼Œå¡å¾—ä¸å¾—äº†ã€‚ä¸‹æ¬¡å°½é‡è¦ç°åœ¨è‡ªå·±ç”µè„‘ä¸Šè°ƒå¥½ï¼Œç›´æ¥ç§»æ¤è¿‡å»ã€‚</p><p>â€‹    æœ€åå®ç°é€šè¿‡ä¸²å£å‘é€å‘¨å›´éšœç¢æƒ…å†µç»™stm32,32ä¾æ­¤å®Œæˆè¿åŠ¨è§„åˆ’ã€‚ç»ˆäºä¸ç”¨å†ç¢°è¿™ä¸ªé¬¼ä¸œè¥¿äº†ï¼Œâ”­â”®ï¹â”­â”®</p><p>â€‹    å½“ç„¶å¦‚æœæƒ³è¿›ä¸€æ­¥å‘æŒ¥ä¸Šä½æœºåŠŸèƒ½ï¼Œå®ç°æ›´é«˜çº§çš„é¿éšœï¼Œå»ºå›¾ç­‰åŠŸèƒ½çš„è¯è¿˜æ˜¯è¦ç¢°â”­â”®ï¹â”­â”®</p><h2 id="ROS2"><a href="#ROS2" class="headerlink" title="ROS2"></a>ROS2</h2><p>â€‹    ç›´æ¥è·Ÿç€æ•™ç¨‹èµ°åŸºæœ¬æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥å¾—åˆ°é›·è¾¾çš„æŠ¥æ–‡ï¼Œè¯é¢˜åä¸º<strong>scan</strong>ã€‚å½“ç„¶å‰ææ˜¯æ¿å­ä¸èƒ½å¤ªå¡ï¼Œæˆ‘ä¹‹å‰ç”¨çš„æ ‘è“æ´¾3Bç›´æ¥ç¼–è¯‘åˆ°ä¸€åŠé—ªé€€ï¼Œå¡çš„ä¸è¡Œï¼Œå‹æ ¹ç”¨ä¸äº†ã€‚</p><h2 id="é€šä¿¡åè®®"><a href="#é€šä¿¡åè®®" class="headerlink" title="é€šä¿¡åè®®"></a>é€šä¿¡åè®®</h2><h2 id="é¿éšœç®—æ³•"><a href="#é¿éšœç®—æ³•" class="headerlink" title="é¿éšœç®—æ³•"></a>é¿éšœç®—æ³•</h2>]]></content>
      
      
      
        <tags>
            
            <tag> è¿åŠ¨å­¦åˆ†æ </tag>
            
            <tag> å¹³è¡¡å°è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¡å°”æ›¼æ»¤æ³¢å­¦ä¹ ç¬”è®°</title>
      <link href="/2022/11/04/Kalman%20filter%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/11/04/Kalman%20filter%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å¡å°”æ›¼æ»¤æ³¢"><a href="#å¡å°”æ›¼æ»¤æ³¢" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢"></a>å¡å°”æ›¼æ»¤æ³¢</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>â€‹    æœ€è¿‘åœ¨å­¦ä¹ å¡å°”æ›¼æ»¤æ³¢ç®—æ³•ï¼Œè¿™å…¶ä¸­ç”¨åˆ°äº†ä¸€äº›æ•°å­¦å’Œç°ä»£æ§åˆ¶ç†è®ºçš„çŸ¥è¯†ã€‚ç”±äºæˆ‘åœ¨å­¦ä¹ ä¹‹å‰æ²¡æœ‰å•¥çŸ¥è¯†å‚¨å¤‡ï¼Œåœ¨ç½‘ä¸Šçœ‹äº†å¾ˆå¤šåšå®¢ã€èŠ±äº†å¾ˆå¤šæ—¶é—´ä¹‹åä¾ç„¶æ˜¯ä¸€ç§ä¼¼æ‡‚éæ‡‚çš„æ„Ÿè§‰ã€‚ç»ˆäºæ‰¾åˆ°äº†ä¸€äº›å¾ˆæ£’çš„æ•™ç¨‹ï¼Œæ„Ÿè§‰ç®—æ˜¯ç¨å¾®ç†è§£äº†ä¸€äº›ï¼Œæ•´ç†äº†ä¸€äº›å­¦ä¹ ç¬”è®°ï¼Œæ¢³ç†æ€è·¯ï¼Œä¹Ÿæ–¹ä¾¿æ—¥åæŸ¥é˜…ã€‚</p><p><strong>æ•™ç¨‹é“¾æ¥</strong></p><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><ul><li><a href="https://www.bilibili.com/video/BV1ez4y1X7eR/?spm_id_from=333.788&amp;vd_source=0f383e93e945bca07eaef9a9ee5d9db3">ã€å¡å°”æ›¼æ»¤æ³¢å™¨ã€‘1_é€’å½’ç®—æ³•_Recursive Processing_å“”å“©å“”å“©_bilibili</a></li><li><a href="https://www.bilibili.com/video/BV1Rh41117MT/?spm_id_from=333.337.search-card.all.click&amp;vd_source=0f383e93e945bca07eaef9a9ee5d9db3">ä»æ”¾å¼ƒåˆ°ç²¾é€šï¼å¡å°”æ›¼æ»¤æ³¢ä»ç†è®ºåˆ°å®è·µ~_å“”å“©å“”å“©_bilibili</a></li><li><a href="https://blog.csdn.net/Yemiekai/article/details/116372288">https://blog.csdn.net/Yemiekai/article/details/116372288</a></li></ul></div><h2 id="æ•°å­¦åŸºç¡€"><a href="#æ•°å­¦åŸºç¡€" class="headerlink" title="æ•°å­¦åŸºç¡€"></a>æ•°å­¦åŸºç¡€</h2><h3 id="åæ–¹å·®çŸ©é˜µ"><a href="#åæ–¹å·®çŸ©é˜µ" class="headerlink" title="åæ–¹å·®çŸ©é˜µ"></a>åæ–¹å·®çŸ©é˜µ</h3><blockquote><p>å°†<strong>æ–¹å·®ã€åæ–¹å·®</strong>åœ¨ä¸€ä¸ªçŸ©é˜µä¸­è¡¨ç°å‡ºæ¥ï¼Œä½“ç°å˜é‡é—´çš„<strong>è”åŠ¨å…³ç³»</strong></p></blockquote><p>å‡è®¾æœ‰<strong>X,Y,Z</strong>ä¸‰ç»„æ•°æ®ï¼Œæ¯ç»„æ•°æ®æœ‰<strong>n</strong>ä¸ª</p><h4 id="æ–¹å·®ï¼š"><a href="#æ–¹å·®ï¼š" class="headerlink" title="æ–¹å·®ï¼š"></a>æ–¹å·®ï¼š</h4><script type="math/tex; mode=display">\sigma_x^2 = \frac{1}{n}\sum(x_i - \bar{x})^2</script><p>æ–¹å·®è¶Šå¤§ï¼Œæ•°æ®æ³¢åŠ¨è¶Šå¤§</p><h4 id="åæ–¹å·®ï¼š"><a href="#åæ–¹å·®ï¼š" class="headerlink" title="åæ–¹å·®ï¼š"></a>åæ–¹å·®ï¼š</h4><script type="math/tex; mode=display">\sigma_x\sigma_y = \sigma_y\sigma_x = \frac{1}{n}\sum(x_i - \bar{}x)(y_i - \bar{y})</script><p>åæ–¹å·®è¶Šå°ï¼ŒX,Yç›¸å…³æ€§è¶Šä½</p><h4 id="åæ–¹å·®çŸ©é˜µï¼š"><a href="#åæ–¹å·®çŸ©é˜µï¼š" class="headerlink" title="åæ–¹å·®çŸ©é˜µï¼š"></a>åæ–¹å·®çŸ©é˜µï¼š</h4><script type="math/tex; mode=display">\begin{bmatrix}\sigma_x^2 & \sigma_x\sigma_y & \sigma_x\sigma_z \\ \sigma_y\sigma_x & \sigma_y^2 & \sigma_y\sigma_z \\ \sigma_z\sigma_x & \sigma_z\sigma_y & \sigma_z^2\\ \end{bmatrix}</script><h4 id="è¿‡æ¸¡çŸ©é˜µ"><a href="#è¿‡æ¸¡çŸ©é˜µ" class="headerlink" title="è¿‡æ¸¡çŸ©é˜µ"></a>è¿‡æ¸¡çŸ©é˜µ</h4><p>è¿‡æ¸¡çŸ©é˜µ<strong>a</strong>ç”¨ä»¥è®¡ç®—åæ–¹å·®çŸ©é˜µ<strong>P</strong>ï¼š</p><script type="math/tex; mode=display">P = \frac{1}{n}a^Ta</script><p>ç»“åˆå…¬å¼å®¹æ˜“ç†è§£ï¼š(æ­¤å¤„ä¸º3x3çŸ©é˜µ)</p><script type="math/tex; mode=display">a = \begin{bmatrix}x1 & y1 & z1 \\ x2 & y2 & z2 \\ x3 & y3 & z3 \\ \end{bmatrix} - \frac{1}{3}\begin{bmatrix}1 & 1 & 1 \\ 1 & 1 & 1 \\ 1 & 1 & 1 \\ \end{bmatrix}\begin{bmatrix}x1 & y1 & z1 \\ x2 & y2 & z2 \\ x3 & y3 & z3 \\ \end{bmatrix}</script><p>è¢«å‡æ•°å³ä¸º<strong>åŸçŸ©é˜µ</strong>ï¼Œè€Œå‡æ•°åˆ™ä¸º<strong>å¹³å‡å€¼çŸ©é˜µ</strong></p><h3 id="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"><a href="#çŠ¶æ€ç©ºé—´æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"></a>çŠ¶æ€ç©ºé—´æ–¹ç¨‹</h3><script type="math/tex; mode=display">\hat{X}_k = A\hat{X}_{k-1} + Bu_{k-1} + W_{k-1}</script><script type="math/tex; mode=display">Z_k = HX_k + V_k</script><p><strong>å˜é‡è¯´æ˜ï¼š</strong></p><ul><li><script type="math/tex">\hat{X}_k</script>ï¼šå®é™…çŠ¶æ€å€¼</li><li><script type="math/tex">\hat{X}_{k-1}</script>ï¼šä¸Šä¸€æ—¶åˆ»çŠ¶æ€å€¼</li><li>$u_k-1$ï¼šæ§åˆ¶è¾“å…¥é‡</li><li><em>Aã€Hã€B</em>ï¼šè½¬æ¢çŸ©é˜µ</li><li>$Z_k$ï¼šæµ‹é‡å€¼</li><li>$W_{k-1}$ï¼šè¿‡ç¨‹å™ªå£°</li><li>$V_k$ï¼šæµ‹é‡å™ªå£°</li></ul><p><strong>å…³äºä¼ é€’æ–¹ç¨‹ï¼š</strong></p><p>â€‹    å¦‚æœæˆ‘ä»¬æŒæ¡äº†ä¸€ä¸ªç‰©ä½“çš„è¿åŠ¨è§„å¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶åˆ»çš„çŠ¶æ€å¯ä»¥é€šè¿‡ä¸Šä¸€ä¸ªæ—¶åˆ»çš„çŠ¶æ€è®¡ç®—å‡ºæ¥ã€‚ä½†æ˜¯ä¹Ÿä¸èƒ½ä¿è¯å®Œå…¨ç²¾å‡†ï¼Œæ‰€ä»¥æ·»åŠ äº†<strong>è¿‡ç¨‹å™ªå£°â€”â€”W</strong></p><p>â€‹    ä¸¾ä¸ªä¾‹å­â€”â€”ç»å…¸çš„é˜»å°¼å¼¹ç°§æŒ¯å­æ¨¡å‹ï¼š</p><p><img src="https://s2.loli.net/2022/11/05/njC8ubrIcYQRiF9.jpg" alt="é˜»å°¼å¼¹ç°§.jpg"></p><p>å¼¹ç°§æ¢å¤åŠ› = kXï¼Œé˜»åŠ› = Bvã€‚å°†Xçš„å¯¼æ•°vè®°ä½œ$\dot{X}$ï¼ŒXçš„äºŒé˜¶å¯¼aè®°ä½œ$\ddot{X}$ï¼Œä¾¿å¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">m\ddot{X} + B\dot{X} + kX = F</script><p>å–çŠ¶æ€å˜é‡<strong>X1ä¸ºä½ç§»</strong>ï¼Œ<strong>X2ä¸ºé€Ÿåº¦</strong>ï¼ŒFè®°ä¸ºæ§åˆ¶è¾“å…¥<strong>u</strong>ï¼Œæ ¹æ®ä¹‹å‰å…¬å¼å¯å¾—ï¼š</p><script type="math/tex; mode=display">\dot{X_1} = X_2</script><script type="math/tex; mode=display">\dot{X_2} = \ddot{X} = \frac{1}{m}u - \frac{B}{m}X_2 - \frac{k}{m}X_1</script><p>å†™æˆçŸ©é˜µçš„å½¢å¼å°±æ˜¯ï¼š</p><script type="math/tex; mode=display">\begin{bmatrix} \dot{X_1} \\ \dot{X_2} \end{bmatrix} = \begin{bmatrix} 0 & 1 \\ -\frac{k}{m} & -\frac{B}{m} \end{bmatrix}\begin{bmatrix} X_1 \\ X_2 \end{bmatrix} + \begin{bmatrix} 0 \\ \frac{1}{m} \end{bmatrix}u</script><p>å¯¹åº”ç€çŠ¶æ€è¶‹åŠ¿çŸ©é˜µä¸çŠ¶æ€çš„å…³ç³»ï¼š</p><script type="math/tex; mode=display">\dot{X_t} = AX_t + Bu_t</script><p>å†™æˆç¦»æ•£çš„å½¢å¼å°±æ˜¯ï¼š</p><script type="math/tex; mode=display">X_k = AX_{k-1} + Bu_{k}</script><p>å½“ç„¶æœ€ååŠ ä¸Šä¸ç¡®å®šå› ç´ W</p><p><strong>å…³äºæµ‹é‡æ–¹ç¨‹ï¼š</strong></p><p>â€‹    ä¸€èˆ¬è€Œè¨€æˆ‘ä»¬å¯èƒ½ä¼šä¹ æƒ¯æŠŠ<strong>å¾…æ±‚é‡</strong>æ”¾åœ¨ç­‰å¼å·¦è¾¹ï¼Œå·²çŸ¥é‡æ”¾åœ¨ç­‰å¼å³è¾¹ã€‚ä½†æ˜¯åœ¨è¿™é‡Œ$Z_k$æ‰æ˜¯æˆ‘ä»¬å®é™…è·å¾—çš„æ•°æ®ã€‚</p><p>â€‹    å…³äºè½¬æ¢çŸ©é˜µHï¼Œä¸€èˆ¬æˆ‘ä»¬æ— æ³•ç›´æ¥æµ‹å¾—éœ€è¦çš„å¾…æµ‹é‡ï¼Œæ‰€ä»¥ä¼šæµ‹é‡å…¶ä»–é‡è®¡ç®—å‡ºå¾…æµ‹é‡ã€‚ä¸¾ä¸ªä¾‹å­</p><blockquote><p>æ¿€å…‰æµ‹è·ä»ªæµ‹è·ï¼šå‘å°„æ¿€å…‰ï¼Œæ ¹æ®è¿”å›ç”¨æ—¶è®¡ç®—è·ç¦»ã€‚ç›´æ¥è·å¾—çš„ç‰©ç†é‡æ˜¯ <strong>æ—¶é—´($Z_n$)</strong>ï¼Œè€Œæˆ‘ä»¬æƒ³è·å¾—çš„ <strong>è·ç¦»($X_n$)</strong>ï¼Œäºæ˜¯æœ‰äº†è½¬æ¢çŸ©é˜µ <strong>H($ \begin{bmatrix}\frac{2}{c}\end{bmatrix}$)</strong></p><script type="math/tex; mode=display">Z_n = \begin{bmatrix}\frac{2}{c}\end{bmatrix}X_n + V_n</script></blockquote><h2 id="æ•´ä½“ä»‹ç»"><a href="#æ•´ä½“ä»‹ç»" class="headerlink" title="æ•´ä½“ä»‹ç»"></a>æ•´ä½“ä»‹ç»</h2><h3 id="é¢„æµ‹"><a href="#é¢„æµ‹" class="headerlink" title="é¢„æµ‹"></a>é¢„æµ‹</h3><p><strong>å…ˆéªŒä¼°è®¡æ–¹ç¨‹ï¼š</strong></p><script type="math/tex; mode=display">\hat{X}_k^- = A\hat{X}_{k-1} + Bu_{k-1}</script><p><strong>å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µï¼š</strong></p><script type="math/tex; mode=display">P_k^{-} = AP_{k-1}A^T + Q</script><h3 id="çŸ«æ­£"><a href="#çŸ«æ­£" class="headerlink" title="çŸ«æ­£"></a>çŸ«æ­£</h3><p><strong>å¡å°”æ›¼å¢ç›Šï¼š</strong></p><script type="math/tex; mode=display">K_k = \frac{P_k^- H^T}{HP_k^- H^T + R}</script><p><strong>åéªŒä¼°è®¡ï¼š</strong></p><script type="math/tex; mode=display">\hat{X}_k = \hat{X}_k^- + K_k( Z_k - H\hat{X}_k^-)</script><p><strong>åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µï¼š</strong></p><script type="math/tex; mode=display">P_k = ( I - K_kH)P_k^-</script><h3 id="å˜é‡è¯´æ˜"><a href="#å˜é‡è¯´æ˜" class="headerlink" title="å˜é‡è¯´æ˜"></a>å˜é‡è¯´æ˜</h3><ul><li><script type="math/tex">\hat{X}_k^-</script>ï¼škæ—¶åˆ»å…ˆéªŒä¼°è®¡å€¼â€”â€”<strong>ç®—å‡ºæ¥çš„</strong></li><li>$\hat{X}_k$ï¼šæœ€ä¼˜ä¼°è®¡å€¼</li><li>$\hat{X}_{k-1}$ï¼šk-1æ—¶åˆ»æœ€ä¼˜ä¼°è®¡å€¼</li><li>$u_k-1$ï¼šæ§åˆ¶è¾“å…¥é‡</li><li>$K_k$ï¼šå¡å°”æ›¼å¢ç›Š</li><li>$Z_k$ï¼šæµ‹é‡å€¼â€”â€”<strong>æµ‹å‡ºæ¥çš„</strong></li><li>$W_{k-1}$ï¼šè¿‡ç¨‹å™ªå£°</li><li>$V_k$ï¼šæµ‹é‡å™ªå£°</li><li>Hï¼šç”±çŠ¶æ€é‡å‘æµ‹é‡é‡è½¬æ¢çš„çŸ©é˜µ</li></ul><p>å˜é‡<strong>å¸¦ä¸ªå¸½å­</strong>ä¸€èˆ¬æ˜¯<strong>ä¼°è®¡å€¼</strong>ï¼›å˜é‡å³ä¸Šè§’<strong>æœ‰ä¸ªâ€-â€œ</strong>ä¸€èˆ¬æ˜¯<strong>å…ˆéªŒå€¼</strong>ã€‚</p><h3 id="æµç¨‹æ¦‚è¿°"><a href="#æµç¨‹æ¦‚è¿°" class="headerlink" title="æµç¨‹æ¦‚è¿°"></a>æµç¨‹æ¦‚è¿°</h3><ol><li>ç”±ä¸Šä¸€æ—¶åˆ»<strong>æœ€ä¼˜ä¼°è®¡å€¼ $\hat{X}_{k-1}$</strong>è®¡ç®—<strong>å…ˆéªŒä¼°è®¡å€¼ $\hat{X}_k^-$</strong></li><li>è·å–<strong>æµ‹é‡å€¼ $Z_k$</strong></li><li>ç”±ä¸Šä¸€æ—¶åˆ»<strong>è¯¯å·®åæ–¹å·®çŸ©é˜µ $P_{k-1}$</strong>è®¡ç®—<strong>å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $P_K^-$</strong></li><li>è®¡ç®—<strong>å¡å°”æ›¼å¢ç›Š$K_k$</strong></li><li>è®¡ç®—<strong>æœ€ä¼˜ä¼°è®¡å€¼<script type="math/tex">\hat{X}_k</script></strong></li><li>æ›´æ–°<strong>åéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $P_k$</strong></li><li>ä¸æ–­æ›´æ–°è¿­ä»£</li></ol><h2 id="å…¬å¼è¯´æ˜ä¸æ¨å¯¼"><a href="#å…¬å¼è¯´æ˜ä¸æ¨å¯¼" class="headerlink" title="å…¬å¼è¯´æ˜ä¸æ¨å¯¼"></a>å…¬å¼è¯´æ˜ä¸æ¨å¯¼</h2><h3 id="å…ˆéªŒä¼°è®¡æ–¹ç¨‹"><a href="#å…ˆéªŒä¼°è®¡æ–¹ç¨‹" class="headerlink" title="å…ˆéªŒä¼°è®¡æ–¹ç¨‹"></a>å…ˆéªŒä¼°è®¡æ–¹ç¨‹</h3><blockquote><script type="math/tex; mode=display">\hat{X}_k^- = A\hat{X}_{k-1} + Bu_{k-1}</script></blockquote><p>â€‹    ç”±ä¸Šä¸€æ—¶åˆ»çš„<strong>æœ€ä¼˜ä¼°è®¡å€¼</strong>ï¼Œæ ¹æ®è¿åŠ¨æ¨¡å‹æ¨æµ‹è¿™ä¸€æ—¶åˆ»çš„çŠ¶æ€å€¼ï¼Œå³<strong>å…ˆéªŒä¼°è®¡å€¼</strong>ã€‚å’Œ<strong>ä¼ é€’æ–¹ç¨‹</strong>ç±»ä¼¼ã€‚</p><h3 id="åéªŒä¼°è®¡æ–¹ç¨‹"><a href="#åéªŒä¼°è®¡æ–¹ç¨‹" class="headerlink" title="åéªŒä¼°è®¡æ–¹ç¨‹"></a>åéªŒä¼°è®¡æ–¹ç¨‹</h3><blockquote><script type="math/tex; mode=display">\hat{X}_k = \hat{X}_k^- + K_k( Z_k - H\hat{X}_k^-)</script></blockquote><p>â€‹    æƒ³è¦å¾—åˆ°<strong>æœ€ä¼˜ä¼°è®¡å€¼</strong>ï¼Œæ¦‚æ‹¬æ¥è¯´æ˜¯æ ¹æ®æ•°æ®çš„å¯é æ€§å°†<strong>æµ‹é‡å€¼</strong>å’Œ<strong>è®¡ç®—å€¼</strong>åŠ æƒå åŠ èµ·æ¥ï¼Œå¾—åˆ°çš„å°±æ˜¯<strong>åéªŒä¼°è®¡å€¼</strong>ï¼Œä¹Ÿå°±æ˜¯æ»¤æ³¢è¿‡åå¾—åˆ°çš„è¿™ä¸€æ—¶åˆ»çš„<strong>æœ€ä¼˜ä¼°è®¡å€¼</strong>ã€‚æ ¹æ®<strong>æ•°æ®èåˆ</strong>åŸç†å¾—åˆ°å…¬å¼ï¼š</p><script type="math/tex; mode=display">\hat{X}_k = \hat{X}_k^- + G( H^-Z_k - \hat{X}_k^-)</script><p>ä½†æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„éƒ½æ˜¯ä»¤ $G = K_kH$ å˜æ¢åçš„å½¢å¼ï¼Œå³ï¼š</p><script type="math/tex; mode=display">\hat{X}_k = \hat{X}_{k}^- + K_k ( Z_k - H\hat{X}_{k}^- )</script><p>å…¶ä¸­ $K_k$âˆˆ[0, $H^-$]</p><ul><li>å½“$K_k$ == 0 æ—¶ï¼Œæµ‹é‡è¯¯å·®å¾ˆå¤§ï¼Œä¿¡ä»»è®¡ç®—å‡ºæ¥çš„å€¼ï¼Œå³ $\hat{X}_{k} == \hat{X}_{k}^-$;</li><li>å½“$K_k == H^-$æ—¶ï¼Œæ— æµ‹é‡è¯¯å·®ï¼Œä¿¡ä»»æµ‹é‡å€¼ï¼Œå³$\hat{X}_{k} == H^-Z_k$ï¼›</li></ul><h3 id="å¡å°”æ›¼å¢ç›Š"><a href="#å¡å°”æ›¼å¢ç›Š" class="headerlink" title="å¡å°”æ›¼å¢ç›Š"></a>å¡å°”æ›¼å¢ç›Š</h3><blockquote><script type="math/tex; mode=display">K_k = \frac{P_k^- H^T}{HP_k^- H^T + R}</script></blockquote><p>è¦è®¡ç®—å¡å°”æ›¼å¢ç›Šï¼Œå³æ±‚å‡ºä½¿è¯¯å·®åæ–¹å·®æœ€å°çš„ $k_k$ï¼Œåœ¨æ±‚å‡ºå…¶å…³äº$K_k$ çš„è¡¨è¾¾å¼åå†æ±‚å¯¼å¾—åˆ°æå€¼ç‚¹ã€‚</p><h3 id="çŠ¶æ€ç©ºé—´æ–¹ç¨‹ï¼š"><a href="#çŠ¶æ€ç©ºé—´æ–¹ç¨‹ï¼š" class="headerlink" title="çŠ¶æ€ç©ºé—´æ–¹ç¨‹ï¼š"></a><strong>çŠ¶æ€ç©ºé—´æ–¹ç¨‹ï¼š</strong></h3><blockquote><script type="math/tex; mode=display">\hat{X}_k^- = A\hat{X}_{k-1} + Bu_{k-1} + W_{k-1}</script><script type="math/tex; mode=display">Z_k = HX_k + V_k</script></blockquote><p><img src="https://s2.loli.net/2022/11/03/hviNkZWEIeG39sw.jpg" alt="note1.jpg"></p><p><img src="https://s2.loli.net/2022/11/03/iwQRzfS7FlnPmZM.jpg" alt="note2.jpg"></p><h3 id="å…ˆåéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ"><a href="#å…ˆåéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ" class="headerlink" title="å…ˆåéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ"></a>å…ˆåéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ</h3><blockquote><script type="math/tex; mode=display">P_k^{-} = AP_{k-1}A^T + Q</script><script type="math/tex; mode=display">P_k = ( I - K_kH)P_k^-</script></blockquote><p><img src="https://s2.loli.net/2022/11/03/8bS1wKNJ3EoAOy2.jpg" alt="note.jpg"></p><h2 id="åº”ç”¨ä¸¾ä¾‹"><a href="#åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="åº”ç”¨ä¸¾ä¾‹"></a>åº”ç”¨ä¸¾ä¾‹</h2><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><h4 id="kalman-filter"><a href="#kalman-filter" class="headerlink" title="kalman_filter"></a>kalman_filter</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">filter</span><span class="params">(Matrix_t Z)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    count++;</span><br><span class="line">    pre_angle1 += Z.matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    pre_angle2 += Z.matrix[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    pre_angle3 = (pre_angle1 + pre_angle2)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    _X = <span class="built_in">mul_matrix</span>(F,X);</span><br><span class="line">    _P = <span class="built_in">add_matrix</span>(<span class="built_in">mul_matrix</span>(<span class="built_in">mul_matrix</span>(F, P), <span class="built_in">tran_matrix</span>(F)), Q);</span><br><span class="line">    K  = <span class="built_in">mul_matrix</span>(<span class="built_in">mul_matrix</span>(_P,<span class="built_in">tran_matrix</span>(H)), <span class="built_in">inv_matrix</span>(<span class="built_in">add_matrix</span>(<span class="built_in">mul_matrix</span>(<span class="built_in">mul_matrix</span>(H,_P),<span class="built_in">tran_matrix</span>(H)),R)));</span><br><span class="line">    X  = <span class="built_in">add_matrix</span>(_X,<span class="built_in">mul_matrix</span>(K,<span class="built_in">sub_matrix</span>(Z,<span class="built_in">mul_matrix</span>(H,_X) ) ) );</span><br><span class="line">    P  = <span class="built_in">mul_matrix</span>(<span class="built_in">sub_matrix</span>(<span class="built_in">get_I</span>(<span class="number">2</span>),<span class="built_in">mul_matrix</span>(K,H)),_P); </span><br><span class="line"></span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%d\t%.2f\t%.2f\t%.2f\t%.2f\t%.2f\t%.2f\t%.2f\n&quot;</span>,count, pre_angle1, pre_angle2, pre_angle3, X.matrix[<span class="number">0</span>][<span class="number">0</span>], X.matrix[<span class="number">1</span>][<span class="number">0</span>], Z.matrix[<span class="number">0</span>][<span class="number">0</span>], Z.matrix[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸€æ¬¡<strong>filter( )</strong>å°±æ˜¯è¿›è¡Œäº†ä¸€æ¬¡è¿­ä»£ã€‚</p><p>è¿™é‡Œä½¿ç”¨<strong>fprintf</strong>å°†æ•°æ®æ‰“å°è‡³excelæ–‡ä»¶ï¼Œç»˜å‡ºæ³¢å½¢ã€‚</p><p>å½“ç„¶ï¼Œè¿™é‡Œè¿˜ç”¨åˆ°äº†ä¸€äº›çŸ©é˜µè¿ç®—å‡½æ•°ï¼Œæˆ‘å†™åœ¨<strong>Matrix.h</strong>é‡Œé¢ï¼Œä¸‹æ¬¡æƒ³è¿ç®—çŸ©é˜µå°±ç›´æ¥è°ƒç”¨å•¦ï¼Œéå¸¸æ–¹ä¾¿ã€‚ä¸è¿‡æ›´å¤šçš„è¿ç®—å‡½æ•°æœ‰å¾…è¿›ä¸€æ­¥çš„å®Œå–„ã€‚</p><ul><li>add_matrixï¼šçŸ©é˜µåŠ æ³•</li><li>sub_matrixï¼šçŸ©é˜µå‡æ³•</li><li>mul_matrixï¼šçŸ©é˜µä¹˜æ³•</li><li>inv_matrixï¼šçŸ©é˜µæ±‚é€†</li><li>tran_matrixï¼šçŸ©é˜µè½¬ç½®</li></ul><h3 id="MPU6050æ»¤æ³¢"><a href="#MPU6050æ»¤æ³¢" class="headerlink" title="MPU6050æ»¤æ³¢"></a>MPU6050æ»¤æ³¢</h3><h4 id="çŠ¶æ€å˜é‡"><a href="#çŠ¶æ€å˜é‡" class="headerlink" title="çŠ¶æ€å˜é‡"></a>çŠ¶æ€å˜é‡</h4><script type="math/tex; mode=display">X = \begin{bmatrix}angle \\ bias\end{bmatrix}</script><p>â€‹    é€‰æ‹©<strong>angle</strong>å’Œ<strong>bias</strong>ä½œä¸ºçŠ¶æ€å˜é‡ï¼Œå…¶ä¸­angleä¸ºè§’åº¦ï¼Œbiasä¸ºé™€èºä»ªçš„é›¶æ¼‚ã€‚biaså°±æ˜¯åœ¨ä¼ æ„Ÿå™¨é™æ­¢æ—¶ä¹Ÿä¼šæœ‰çš„è¾“å‡ºçš„è§’é€Ÿåº¦å€¼ï¼Œè¿™ä¸ªåªæ˜¯ä¸ç¡®å®šçš„ï¼Œè€Œä¸”ä¼šå˜åŒ–ã€‚ä½†æ˜¯å³ä½¿æˆ‘ä»¬éšä¾¿ç»™å®ƒä¸€ä¸ªåˆå€¼ï¼Œæœ€ç»ˆä¹Ÿä¼šéšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ æ”¶æ•›åˆ°çœŸå®å€¼é™„è¿‘</p><p><img src="https://s2.loli.net/2022/12/12/i3baZ5zcTdPnUXV.png" alt="é›¶æ¼‚æ”¶æ•›.png"></p><h4 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h4><script type="math/tex; mode=display">X^-_k = \begin{bmatrix}angle \\bias\end{bmatrix}=\begin{bmatrix}1 & -dt \\0 & 1 \\\end{bmatrix}X_{k-1}+\begin{bmatrix}gyro*dt \\0\end{bmatrix}</script><h4 id="å…ˆéªŒåæ–¹å·®çŸ©é˜µ"><a href="#å…ˆéªŒåæ–¹å·®çŸ©é˜µ" class="headerlink" title="å…ˆéªŒåæ–¹å·®çŸ©é˜µ"></a>å…ˆéªŒåæ–¹å·®çŸ©é˜µ</h4><script type="math/tex; mode=display">P^-_k = \begin{bmatrix}1 & -dt \\ 0 & 1\\\end{bmatrix}P^-_{k-1}\begin{bmatrix}1 & 0 \\-dt & 1 \\\end{bmatrix}+\begin{bmatrix}Q_{angle} & 0 \\0 & Q_{bias} \\\end{bmatrix}</script><h4 id="æµ‹é‡æ–¹ç¨‹"><a href="#æµ‹é‡æ–¹ç¨‹" class="headerlink" title="æµ‹é‡æ–¹ç¨‹"></a>æµ‹é‡æ–¹ç¨‹</h4><p>ä¼ å…¥çš„åªæœ‰æ»¤æ³¢ä¹‹å‰çš„è§’åº¦å€¼ï¼Œæ•…æœ‰</p><script type="math/tex; mode=display">Z = HX + V \\H = \begin{bmatrix}1 & 0\end{bmatrix}</script><p>è¿™é‡Œçš„åŸå§‹è§’åº¦å€¼æ˜¯ç”±IMUçš„<strong>ä¸‰è½´åŠ é€Ÿåº¦å€¼</strong>ç›´æ¥è§£ç®—è€Œæ¥ã€‚</p><p>åé¢çš„å‡ ä¸ªæ–¹ç¨‹å°±æ²¡ä»€ä¹ˆå˜åŒ–äº†ã€‚</p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>â€‹    æ„Ÿè°¢å¤§å®¶è€å¿ƒçœ‹å®Œäº†æœ¬ç¯‡åšå®¢ï¼Œæ¬¢è¿å¤§å®¶åˆ†äº«ï¼›ç”±äºæˆ‘è‡ªå·±ä¹Ÿæ˜¯åˆå­¦è€…ï¼Œå¯¹å¡å°”æ›¼æ»¤æ³¢çš„ç†è§£è¿˜ä¸ç®—æ·±å…¥ï¼Œéš¾å…ä¼šæœ‰ä¸å®Œå–„ä¹‹å¤„ï¼Œè¿™ç¯‡æ–‡ç« ä½œä¸ºä¸€ç¯‡ç¬”è®°ç”±äºå¤§å®¶åˆ†äº«ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶æ‰¹è¯„æŒ‡æ­£ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Kalman Filter </tag>
            
            <tag> æ§åˆ¶æ–¹æ³• </tag>
            
            <tag> æ»¤æ³¢å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IIC &amp; PCA9685</title>
      <link href="/2022/11/01/%E8%88%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97%E8%B0%83%E8%AF%95%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/11/01/%E8%88%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97%E8%B0%83%E8%AF%95%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>â€‹    æœ‰äº›æ—¶å€™éœ€è¦åŒæ—¶é©±åŠ¨å¤šä¸ªèˆµæœºï¼Œéœ€è¦ä¸ºæ¯ä¸€ä¸ªèˆµæœºè°ƒåˆ¶å‡ºå¯¹åº”çš„<strong>PWM</strong>è„‰å†²ä¿¡å·ï¼›å¦‚æœèˆµæœºå¾ˆå¤šçš„è¯ï¼Œä¼šå ç”¨ä¸»æ§çš„å¾ˆå¤šèµ„æºã€‚å¹¸è¿çš„æ˜¯æœ‰è¿™æ ·ä¸€æ¬¾æ¨¡å—ï¼Œåªéœ€è¦<strong>ä¸¤ä¸ªGPIOå£</strong>ï¼Œä¾¿å¯ä»¥é€šè¿‡<strong>I^2^Cé€šä¿¡åè®®</strong>æ§åˆ¶<strong>16</strong>è·¯èˆµæœºï¼ˆäº‹å®ä¸Šå¯ä»¥ä¸²è”å¤šä¸ªæ¨¡å—ï¼Œæ§åˆ¶æ›´å¤šèˆµæœºï¼‰ã€‚åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å…¶ä½¿ç”¨æ–¹æ³•å’Œä»£ç å®ç°æ–¹æ³•ã€‚</p><h1 id="I-2-Cé€šè®¯åè®®"><a href="#I-2-Cé€šè®¯åè®®" class="headerlink" title="I^2^Cé€šè®¯åè®®"></a>I^2^Cé€šè®¯åè®®</h1><p>ä¸€ç¯‡ä»‹ç»çš„å¾ˆè¯¦ç»†çš„æ–‡ç« ï¼š<a href="https://zhuanlan.zhihu.com/p/362287272">ä¸€æ–‡çœ‹æ‡‚I2Cåè®® - çŸ¥ä¹ (zhihu.com)</a></p><div class="note pink icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>è¿™é‡Œé™„ä¸Šè¾ƒä¸ºæƒå¨çš„æ–‡ä»¶é“¾æ¥</p><ul><li><a href="https://semitia.top/upload_flies/TI_I2C_slva704.pdf">https://semitia.top/upload_flies/TI_I2C_slva704.pdf</a></li><li><a href="https://semitia.top/upload_flies/NXP_I2C_UM10204.pdf">https://semitia.top/upload_flies/NXP_I2C_UM10204.pdf</a></li><li><a href="https://semitia.top/upload_flies/ZLG_I2C.pdf">https://semitia.top/upload_flies/ZLG_I2C.pdf</a></li></ul></div><p>æ­¤ç¯‡ç¬”è®°åˆ™æ˜¯ç»“åˆ<strong>ã€ŠTI_I2C_slva704ã€‹</strong>å’Œ<strong>ä»£ç </strong>ç®€å•è®°å½•ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚</p><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>â€‹    <strong>IIC</strong>ä½¿ç”¨ä¸¤ä¸ªæ¥å£<strong>(SCLå’ŒSDA)</strong>è¿›è¡Œ<strong>åŠåŒå·¥é€šä¿¡</strong>ã€‚åˆ†ä¸º<strong>ä¸»æœºï¼ˆMaster)</strong>å’Œ<strong>ä»æœºï¼ˆSlave deviceï¼‰</strong>ï¼Œæ¯ä¸ªè®¾å¤‡æœ‰è‡ªå·±ç‰¹å®šçš„<strong>åœ°å€</strong>ï¼Œä¸€ä¸ªè®¾å¤‡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¯„å­˜å™¨å‚¨å­˜æ•°æ®ï¼Œä¸»æœºé€šè¿‡IICæ€»çº¿å¯¹è®¾å¤‡åŠå…¶å¯„å­˜å™¨è¿›è¡Œè¯»å†™å’Œé…ç½®ã€‚</p><h2 id="ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹"><a href="#ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹" class="headerlink" title="ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹"></a>ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹</h2><h3 id="å‘é€æ•°æ®ï¼š"><a href="#å‘é€æ•°æ®ï¼š" class="headerlink" title="å‘é€æ•°æ®ï¼š"></a>å‘é€æ•°æ®ï¼š</h3><ol><li>ä¸»æœºå‘é€<strong>START</strong>ä¿¡å·å’Œ<strong>è®¾å¤‡åœ°å€</strong>æ¥æŒ‡å®šä¸€ä¸ªè®¾å¤‡</li><li>ä¸»æœºå‘é€æ•°æ®</li><li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·</li></ol><h3 id="æ¥æ”¶æ•°æ®ï¼š"><a href="#æ¥æ”¶æ•°æ®ï¼š" class="headerlink" title="æ¥æ”¶æ•°æ®ï¼š"></a>æ¥æ”¶æ•°æ®ï¼š</h3><ol><li>ä¸»æœºå‘é€<strong>START</strong>ä¿¡å·å’Œ<strong>è®¾å¤‡åœ°å€</strong>æ¥æŒ‡å®šä¸€ä¸ªè®¾å¤‡</li><li>ä¸»æœºæŒ‡å®šè¦è¯»å–çš„<strong>å¯„å­˜å™¨</strong></li><li>ä¸»æœºè¯»å–æ•°æ®</li><li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·</li></ol><h2 id="STARTå’ŒSTOPä¿¡å·"><a href="#STARTå’ŒSTOPä¿¡å·" class="headerlink" title="STARTå’ŒSTOPä¿¡å·"></a>STARTå’ŒSTOPä¿¡å·</h2><ul><li><strong>STATRT</strong>ï¼šåœ¨<strong>SCL</strong>æ‹‰é«˜çš„æƒ…å†µä¸‹ï¼Œ<strong>SDA</strong>ç”µå¹³ç”±é«˜å˜ä½ï¼Œå³<strong>ä¸‹é™æ²¿</strong></li><li><strong>STOP</strong>ï¼šåœ¨<strong>SCL</strong>æ‹‰é«˜çš„æƒ…å†µä¸‹ï¼Œ<strong>SDA</strong>ç”µå¹³ç”±ä½å˜é«˜ï¼Œå³<strong>ä¸Šå‡æ²¿</strong></li></ul><p><img src="https://s2.loli.net/2022/11/02/Rkjp2zrVq8NGIy9.png" alt="IIC_1.png"></p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><h4 id="START"><a href="#START" class="headerlink" title="START"></a>START</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">IIC_Start</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">SDA_OUT();     </span><br><span class="line">IIC_SDA=<span class="number">1</span>;    </span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">delay_us(<span class="number">4</span>);</span><br><span class="line">IIC_SDA=<span class="number">0</span>;</span><br><span class="line">delay_us(<span class="number">4</span>);</span><br><span class="line">IIC_SCL=<span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><ul><li><code>SDA_OUT();</code>ï¼šå°†<strong>SDA</strong>ç«¯å£è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼ï¼›åœ¨åˆ‡æ¢è¯»å†™çŠ¶æ€çš„æ—¶å€™ï¼Œä¹Ÿè¦ä¿®æ”¹IOå£é…ç½®</li><li><code>IIC_SCL=0;</code>ï¼šIICæ€»çº¿æ¥ä¸Šæ‹‰ç”µé˜»ï¼Œæ•…é»˜è®¤<strong>é«˜ç”µå¹³</strong>çŠ¶æ€ä¸º<strong>æ€»çº¿ç©ºé—²</strong>çŠ¶æ€ï¼›ä¸»æœºæ¥ä¸‹æ¥è¦å‘é€æŒ‡ä»¤ï¼Œæ‰€ä»¥è¦æ‹‰ä½ç”µå¹³ï¼Œä¸»æœºæ§åˆ¶ä½æ€»çº¿ã€‚</li></ul><h4 id="STOP"><a href="#STOP" class="headerlink" title="STOP"></a>STOP</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">IIC_Stop</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">SDA_OUT();<span class="comment">//sdaÃÃŸÃŠÃ¤Â³Ã¶</span></span><br><span class="line">IIC_SCL=<span class="number">0</span>;</span><br><span class="line">IIC_SDA=<span class="number">0</span>;<span class="comment">//STOP:when CLK is high DATA change form low to high</span></span><br><span class="line">delay_us(<span class="number">4</span>);</span><br><span class="line">IIC_SCL=<span class="number">1</span>; </span><br><span class="line">IIC_SDA=<span class="number">1</span>;<span class="comment">//Â·Â¢Ã‹ÃI2CÃ—ÃœÃÃŸÂ½Ã¡ÃŠÃ¸ÃÃ…ÂºÃ…</span></span><br><span class="line">delay_us(<span class="number">4</span>);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ACK-NACK-æœ‰æ— åº”ç­”"><a href="#ACK-NACK-æœ‰æ— åº”ç­”" class="headerlink" title="ACK/NACK æœ‰æ— åº”ç­”"></a>ACK/NACK æœ‰æ— åº”ç­”</h2><p>â€‹    åœ¨å®Œæˆä¸€ä¸ªå­—èŠ‚çš„ä¿¡æ¯ä¼ è¾“åï¼Œ<strong>æ¥æ”¶æ–¹</strong>å¯ä»¥å‘é€<strong>ACK</strong>ä»¥å‘ŠçŸ¥å‘é€æ–¹æ•°æ®è¢«æˆåŠŸæ¥æ”¶ï¼›ä¹Ÿå¯ä»¥é€‰æ‹©ä¸å‘é€ã€‚åœ¨æ¥æ”¶æ–¹å‘é€ACKä¹‹å‰ï¼Œå‘é€æ–¹å¿…é¡»é‡Šæ”¾SDAçº¿ï¼›æ¥æ”¶æ–¹<strong>æ‹‰ä½SDA</strong>ä»¥å‘é€ACKã€‚</p><p>â€‹    å€˜è‹¥åœ¨ACKä½SDAä»ç„¶ä¸ºé«˜ç”µä½ï¼Œåˆ™è®¤ä¸ºæ˜¯<strong>NACKâ€”â€”æ— åº”ç­”</strong>ï¼Œæ— åº”ç­”çš„ä¸€äº›æƒ…å†µï¼š</p><ul><li>æ¥æ”¶æ–¹æ²¡æœ‰åšå¥½æ¥æ”¶çš„å‡†å¤‡</li><li>æ¥æ”¶æ–¹æ— æ³•ç†è§£æ¥æ”¶åˆ°çš„æ•°æ®</li><li>æ¥æ”¶æ–¹æ— æ³•å†æ¥æ”¶æ›´å¤šæ•°æ®</li><li>ä¸»æœºä½œä¸ºæ¥æ”¶æ–¹å®Œæˆäº†æ•°æ®æ¥æ”¶</li></ul><p>â€‹    åœ¨è¿™æ ·çš„è§„å®šä¸‹ï¼Œå¦‚æœå‡ºç°äº†ä¸»æœºæ•°æ®æ¥æ”¶å¤±è´¥çš„æƒ…å†µçš„è¯è¯¥å¦‚ä½•åˆ¤å®šå‘¢ï¼Ÿæ˜¯ä¸æ˜¯å†²çªäº†å‘¢ï¼Ÿæˆ–è®¸ä¸»æœºå¯ä»¥é€šè¿‡ç¼–ç¨‹åˆ¤å®šæ¥å—å¤±è´¥ï¼Œè¿›è€Œé€‰æ‹©æ˜¯å¦é‡æ–°è¯·æ±‚æ•°æ®ã€‚</p><p><img src="https://s2.loli.net/2022/11/02/4eo2YpZhjNr7V5s.png" alt="IIC_2.png"></p><h2 id="WRITEå†™æ“ä½œ"><a href="#WRITEå†™æ“ä½œ" class="headerlink" title="WRITEå†™æ“ä½œ"></a>WRITEå†™æ“ä½œ</h2><ul><li><p>æ•°æ®ä¼ è¾“ä»¥<strong>ä¸€ä¸ªå­—(8bits)</strong>èŠ‚ä¸ºå•ä½ï¼Œæœ€å…ˆå‘é€<strong>MSB</strong>ï¼›</p></li><li><p>åœ¨<strong>STOPå’ŒSTART</strong>ä¿¡å·å¤–éœ€ä¿è¯<strong>SDA</strong>åªåœ¨<strong>SCL</strong>ä¸º<strong>ä½ç”µå¹³</strong>æ—¶å‘ç”Ÿè·³å˜ï¼›<strong>SCLé«˜</strong>æ—¶ä¿è¯<strong>SDA</strong>ç¨³å®šä»¥è¯»å–æ•°æ®ã€‚</p></li></ul><p>æ³¨ï¼š</p><p><strong>MSB &amp; LSB</strong>ï¼š</p><blockquote><p>MSB stands for most significant bit, while LSB is least significant bit. In binary terms, the MSB is the bit that has the greatest effect on the number, and it is the left-most bit. For example, for a binary number 0011 0101, the Most Significant 4 bits would be 0011. The Least Significant 4 bits would be 0101.</p></blockquote><h3 id="åè®®æµç¨‹"><a href="#åè®®æµç¨‹" class="headerlink" title="åè®®æµç¨‹"></a>åè®®æµç¨‹</h3><ol><li>ä¸»æœºå‘é€<strong>START</strong>ä¿¡å·</li><li>ä¸»æœºå‘é€<strong>7bitsè®¾å¤‡åœ°å€</strong></li><li><strong>R/W</strong>ä½ç½®0â€”â€”å†™0ï¼Œè¯»1</li><li>ç­‰å¾…åº”ç­”</li><li>ä¸»æœºå‘é€<strong>ä»è®¾å¤‡å¯„å­˜å™¨åœ°å€</strong></li><li>ç­‰å¾…åº”ç­”</li><li>å†™å…¥æ•°æ®</li><li>ç­‰å¾…åº”ç­”</li><li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·ï¼Œæ“ä½œç»“æŸã€‚</li></ol><p><img src="https://s2.loli.net/2022/11/02/zMwCgD3Qt1vx5cy.png" alt="IIC_3.png"></p><h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>æ­¤å¤„ä»…ä¸ºå‘é€ä¸€ä¸ªå­—èŠ‚çš„æµç¨‹ï¼Œå®Œæ•´æµç¨‹è¯·å‚è€ƒä¸‹æ–¹PCA9685å®æˆ˜ä»£ç </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">IIC_Send_Byte</span><span class="params">(u8 txd)</span></span><br><span class="line">&#123;                        </span><br><span class="line">    u8 t;   </span><br><span class="line">SDA_OUT();     </span><br><span class="line">    IIC_SCL=<span class="number">0</span>;<span class="comment">//Ã€Â­ÂµÃÃŠÂ±Ã–Ã“Â¿ÂªÃŠÂ¼ÃŠÃ½Â¾ÃÂ´Â«ÃŠÃ¤</span></span><br><span class="line">    <span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">8</span>;t++)</span><br><span class="line">    &#123;              </span><br><span class="line">        IIC_SDA=(txd&amp;<span class="number">0x80</span>)&gt;&gt;<span class="number">7</span>;</span><br><span class="line">        txd&lt;&lt;=<span class="number">1</span>;   </span><br><span class="line">delay_us(<span class="number">2</span>); </span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">delay_us(<span class="number">2</span>); </span><br><span class="line">IIC_SCL=<span class="number">0</span>;</span><br><span class="line">delay_us(<span class="number">2</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="READè¯»æ“ä½œ"><a href="#READè¯»æ“ä½œ" class="headerlink" title="READè¯»æ“ä½œ"></a>READè¯»æ“ä½œ</h2><h3 id="åè®®æµç¨‹-1"><a href="#åè®®æµç¨‹-1" class="headerlink" title="åè®®æµç¨‹"></a>åè®®æµç¨‹</h3><ol><li>å‰ä¸¤ä¸ªå­—èŠ‚ä¸å†™æ“ä½œç›¸åŒ</li><li>ä¸»æœºé‡å¤å‘é€ä¸€æ¬¡<strong>START</strong>ä¿¡å·</li><li>ä¸»æœºå‘é€ä»è®¾å¤‡åœ°å€</li><li><strong>R/Wç½®</strong><span class='p red'>1</span>â€”â€”è¯»æ“ä½œ</li><li>ç­‰å¾…åº”ç­”</li><li>ä¸»æœºè¯»å–æ•°æ®</li><li>ä¸»æœº<strong>ä¸å‘é€</strong>åº”ç­”ä¿¡å·</li><li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·</li></ol><p><img src="https://s2.loli.net/2022/11/02/hQueywRLE3xf4v5.png" alt="IIC_4.png"></p><h3 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>åŒæ ·æ˜¯åªè¯»å–ä¸€ä¸ªå­—èŠ‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">u8 <span class="title function_">IIC_Read_Byte</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> ack)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i,receive=<span class="number">0</span>;</span><br><span class="line">SDA_IN();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++ )</span><br><span class="line">&#123;</span><br><span class="line">        IIC_SCL=<span class="number">0</span>; </span><br><span class="line">        delay_us(<span class="number">2</span>);</span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">        receive&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(READ_SDA)receive++;   </span><br><span class="line">delay_us(<span class="number">1</span>); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (!ack)</span><br><span class="line">        IIC_NAck();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        IIC_Ack();</span><br><span class="line">    <span class="keyword">return</span> receive;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="PCA9685èŠ¯ç‰‡"><a href="#PCA9685èŠ¯ç‰‡" class="headerlink" title="PCA9685èŠ¯ç‰‡"></a>PCA9685èŠ¯ç‰‡</h1><p>èŠ¯ç‰‡æ‰‹å†Œï¼š<a href="https://semitia.top/upload_flies/PCA9685.pdf">https://semitia.top/upload_flies/PCA9685.pdf</a></p><p>èŠ¯ç‰‡æ‰‹å†Œçš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åœ¨è¿™é‡Œåªè®°å½•ä¸€äº›ä½¿ç”¨æŒ‡å¯¼æ€§ç›¸å¯¹æ›´é«˜çš„ä¸€äº›å†…å®¹ï¼ˆä¸»è¦å‚è€ƒç¬¬ä¸ƒå°èŠ‚ï¼‰ã€‚</p><h2 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h2><h3 id="è®¾å¤‡åœ°å€"><a href="#è®¾å¤‡åœ°å€" class="headerlink" title="è®¾å¤‡åœ°å€"></a>è®¾å¤‡åœ°å€</h3><p><img src="https://s2.loli.net/2022/11/02/zYo4QDi6RUrBw1L.png" alt="IIC_5.png"></p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹è®¾å¤‡åœ°å€æ˜¯<strong>0x40</strong>ï¼Œå¦‚æœç®—ä¸Šæœ€å<strong>R/W</strong>ä½çš„è¯å°±æ˜¯<strong>0x80</strong>ã€‚</p><p>åœ¨æ¨¡å—ä¸Šèƒ½å¤Ÿçœ‹åˆ°å…­ä¸ªç•™ç©ºçš„ç„Šç‚¹ï¼Œå¯ä»¥é€‰æ‹©æŠŠéƒ¨åˆ†ç„Šç‚¹ç„Šä¸Šï¼Œè®¾å¤‡çš„åœ°å€å¯¹åº”ä½å°±ä¼šè¢«<strong>ç½®ä¸€</strong>ã€‚æ¯”å¦‚æŠŠ<strong>ç¬¬0ä½</strong>ç„Šä¸Šï¼Œåœ°å€å°±å˜ä¸ºäº†<strong>1000001</strong>ã€‚</p><h3 id="å¯„å­˜å™¨åœ°å€"><a href="#å¯„å­˜å™¨åœ°å€" class="headerlink" title="å¯„å­˜å™¨åœ°å€"></a>å¯„å­˜å™¨åœ°å€</h3><p>è¿™æ˜¯éƒ¨åˆ†å¯„å­˜å™¨æ€»è§ˆè¡¨ï¼Œä¸€å…±æœ‰16ä¸ªledã€‚å„ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¹Ÿéƒ½å¾ˆæ¸…æ¥šåœ°åˆ—äº†å‡ºæ¥</p><p><img src="https://s2.loli.net/2022/11/02/mXtORuGvFCWUkNr.png" alt="IIC_6.png"></p><h2 id="éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»"><a href="#éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»" class="headerlink" title="éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»"></a>éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»</h2><h3 id="MODE1å¯„å­˜å™¨"><a href="#MODE1å¯„å­˜å™¨" class="headerlink" title="MODE1å¯„å­˜å™¨"></a>MODE1å¯„å­˜å™¨</h3><p><img src="https://s2.loli.net/2022/11/02/oJsCdm8rMcOBLFj.png" alt="IIC_7.png"></p><p>æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯<strong>ç¬¬å››ä½</strong>ï¼Œå³<strong>SLEEP</strong>ä½ï¼Œå› ä¸ºåœ¨è¯»å†™å…¶ä»–å¯„å­˜å™¨çš„æ—¶å€™ä¼šéœ€è¦å°†èŠ¯ç‰‡ä¼‘çœ ï¼Œå¾…ä¼šåœ¨åŸç ä»‹ç»ä¸­ä¹Ÿä¼šè§åˆ°ã€‚</p><p><img src="https://s2.loli.net/2022/11/02/KA7VLulbwsmYzqn.png" alt="IIC_8.png"></p><h3 id="LED-ON-OFF-H-L"><a href="#LED-ON-OFF-H-L" class="headerlink" title="LED_ON_OFF_H_L"></a>LED_ON_OFF_H_L</h3><p>æ¯ä¸ªPWM(led)è¾“å‡ºç«¯å£çš„é…ç½®å¯¹åº”å››ä¸ªå¯„å­˜å™¨</p><ul><li>LEDn_ON_H</li><li>LEDn_ON_L</li><li>LEDn_OFF_H</li><li>LED_OFF_L</li></ul><p>æ¯ä¸ªå¯„å­˜å™¨æ˜¯<strong>8ä½</strong>å¯„å­˜å™¨ï¼Œä½†æ˜¯<strong>ON</strong>æˆ–<strong>OFF</strong>åªä¼šåˆ†åˆ«å‚¨å­˜<strong>åäºŒä½</strong>çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯<em>L</em>å­˜8ä½ï¼Œ<em>H</em>å­˜4ä½</p><p><img src="https://s2.loli.net/2022/11/02/lFafpNvyibHqVjo.png" alt="IIC_9.png"></p><p>å…·ä½“çš„å¯„å­˜å™¨æ•°æ®å’ŒPWMæ³¢å½¢çš„å…³ç³»å¦‚ä¸‹</p><blockquote><p>â€‹    <strong>ON</strong>å’Œ<strong>OFF</strong>åˆ†åˆ«å­˜å‚¨ç€èŒƒå›´<strong>0~4096</strong>çš„å€¼(ç¡®å®æ˜¯4096è€Œé4095)ï¼Œæˆ‘ä»¬æŠŠä¸¤ä¸ªå€¼è®°ä½œ<strong>cnt_on, cnt_off</strong>å§ã€‚æœ‰ä¸€ä¸ªè®¡æ•°å™¨ä»0è®¡æ•°åˆ°<strong>4095</strong>ï¼Œæˆ‘ä»¬æŠŠè®¡æ•°å™¨çš„å€¼è®°ä½œ<strong>CNT</strong>ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯<code>cnt_on &lt; cnt_off</code>ï¼š</p><ul><li>å½“<code>CNT == cnt_on</code>æ—¶ï¼ŒPWMæ³¢<strong>ç”±ä½å˜é«˜</strong>ï¼›</li><li>å½“<code>CNT == cnt_off</code>æ—¶ï¼ŒPWMæ³¢<strong>ç”±é«˜å˜ä½</strong>ï¼›</li></ul><p>å½“<code>cnt_off &lt; cnt_on</code>æ—¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªå‘¨æœŸå†…<code>CNT == cnt_off</code>ä¸åšå˜åŒ–ã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œæ§åˆ¶ç²¾åº¦æ˜¯<strong>1/4096</strong>å‘¨æœŸã€‚</p></blockquote><p>å…·ä½“çš„PWMè°ƒåˆ¶æ–¹æ³•æˆ‘ä»¬ç»“åˆå®˜æ–¹æ‰‹å†Œé‡Œé¢ç»™å‡ºçš„ä¸¤ä¸ªä¾‹å­å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼š</p><p><img src="https://s2.loli.net/2022/11/02/e9yZhwCiX5AImpc.png" alt="IIC_10.png"></p><p>ï¼ˆè¿™é‡Œæˆ‘æ„Ÿè§‰ <em>Fig 7</em> å›¾é‡Œçš„<strong>819</strong>æ˜¯ä¸æ˜¯åº”è¯¥æ˜¯<strong>410</strong>ï¼‰</p><p><img src="https://s2.loli.net/2022/11/02/82lKZfsdSYL9EnW.png" alt="IIC_11.png"></p><h3 id="PRE-SCALE"><a href="#PRE-SCALE" class="headerlink" title="PRE_SCALE"></a>PRE_SCALE</h3><p><img src="https://s2.loli.net/2022/11/02/Y9Ch54OApUxLM8e.png" alt="IIC_12.png"></p><p>â€‹    <strong>PRE_SCALE</strong>å¯„å­˜å™¨ç”¨ä»¥è°ƒåˆ¶PWMé¢‘ç‡ã€‚é©±åŠ¨èˆµæœºçš„è¯æˆ‘ä»¬éœ€è¦<strong>20ms</strong>çš„è„‰å†²ï¼Œé¢‘ç‡ä¸º<strong>50Hz</strong>ã€‚</p><p>â€‹    å¦‚æœå­¦ä¹ è¿‡STM32ç”¨å®šæ—¶å™¨è¾“å‡ºPWMçš„è¯åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ï¼Œåªä¸è¿‡è¿™é‡Œçš„<strong>è‡ªåŠ¨é‡è£…è½½å€¼</strong>å›ºå®šä¸º4096ã€‚</p><p>â€‹    æ—¶é’Ÿç»™å‡ºçš„æ˜¯<strong>25MHz</strong>çš„é¢‘ç‡ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®<strong>nåˆ†é¢‘</strong>ï¼Œé‚£ä¹ˆ<strong>è®¡æ•°å™¨</strong>å°±ä¼šæ¯è¿‡<strong>$\frac{n}{25000000}$</strong>ç§’è®¡æ•°ä¸€æ¬¡ï¼Œé‚£ä¹ˆ$T_n = \frac{4096n}{25000000}$ç§’å°±æ˜¯ä¸€ä¸ªå‘¨æœŸã€‚å‡å¦‚æˆ‘ä»¬è¦<strong>50Hz</strong>çš„è„‰å†²ï¼Œé‚£ä¹ˆå‘¨æœŸåº”è¯¥æ˜¯<strong>20ms</strong>ï¼Œä»¤$T_n == 0.02s$ï¼Œè§£å¾—nï¼Œé‚£ä¹ˆåˆ†é¢‘ç³»æ•°è®¾ç½®ä¸º<strong>n-1</strong>å³å¯ã€‚</p><p>â€‹    ä¸ºä»€ä¹ˆè¦å‡å»ä¸€å‘¢ï¼Ÿå› ä¸ºä¸åˆ†é¢‘å…¶å®ä¹Ÿå°±æ˜¯<strong>ä¸€åˆ†é¢‘</strong>ï¼Œä½†æ˜¯é»˜è®¤<code>prescale value == 0</code>æ—¶æ˜¯ä¸åˆ†é¢‘ã€‚</p><h2 id="ä»£ç å®ç°-3"><a href="#ä»£ç å®ç°-3" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Writeå†™æ•°æ®"><a href="#Writeå†™æ•°æ®" class="headerlink" title="Writeå†™æ•°æ®"></a>Writeå†™æ•°æ®</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">pca_write1</span><span class="params">(u8 adr,u8 data)</span></span><br><span class="line">&#123; </span><br><span class="line">IIC_Start();</span><br><span class="line"></span><br><span class="line">IIC_Send_Byte(pca_adr1);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">IIC_Send_Byte(adr);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">IIC_Send_Byte(data);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">IIC_Stop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/11/02/zMwCgD3Qt1vx5cy.png" alt="IIC_3.png"></p><p>è¿™é‡Œè´´ä¸Šä¹‹å‰çš„æµç¨‹å›¾æ–¹ä¾¿æ¯”å¯¹ã€‚</p><h3 id="Readè¯»æ•°æ®"><a href="#Readè¯»æ•°æ®" class="headerlink" title="Readè¯»æ•°æ®"></a>Readè¯»æ•°æ®</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">u8 <span class="title function_">pca_read1</span><span class="params">(u8 adr)</span></span><br><span class="line">&#123;</span><br><span class="line">u8 data;</span><br><span class="line">IIC_Start();</span><br><span class="line"></span><br><span class="line">IIC_Send_Byte(pca_adr1);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">IIC_Send_Byte(adr);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">IIC_Start();</span><br><span class="line"></span><br><span class="line">IIC_Send_Byte(pca_adr1|<span class="number">0x01</span>);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">data=IIC_Read_Byte(<span class="number">0</span>);</span><br><span class="line">IIC_Stop();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/11/02/hQueywRLE3xf4v5.png" alt="IIC_4.png"></p><h3 id="è®¾ç½®åˆ†é¢‘ç³»æ•°"><a href="#è®¾ç½®åˆ†é¢‘ç³»æ•°" class="headerlink" title="è®¾ç½®åˆ†é¢‘ç³»æ•°"></a>è®¾ç½®åˆ†é¢‘ç³»æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">pca_setfreq1</span><span class="params">(<span class="type">float</span> freq)</span> </span><br><span class="line">&#123;</span><br><span class="line">u8 prescale,oldmode,newmode;</span><br><span class="line"><span class="type">double</span> prescaleval;</span><br><span class="line">freq *= <span class="number">0.92</span>; </span><br><span class="line">prescaleval = <span class="number">25000000</span>;</span><br><span class="line">prescaleval /= <span class="number">4096</span>;</span><br><span class="line">prescaleval /= freq;</span><br><span class="line">prescaleval -= <span class="number">1</span>;</span><br><span class="line">prescale =<span class="built_in">floor</span>(prescaleval + <span class="number">0.5f</span>);</span><br><span class="line"></span><br><span class="line">oldmode = pca_read1(pca_mode1); <span class="comment">//è·å–ä¹‹å‰modeå¯„å­˜å™¨é…ç½®çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">newmode = (oldmode&amp;<span class="number">0x7F</span>) | <span class="number">0x10</span>; <span class="comment">// ç¡çœ æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">pca_write1(pca_mode1, newmode); <span class="comment">// è¿›å…¥ç¡çœ </span></span><br><span class="line"></span><br><span class="line">pca_write1(pca_pre, prescale); <span class="comment">// è®¾ç½®åˆ†é¢‘ç³»æ•°</span></span><br><span class="line"></span><br><span class="line">pca_write1(pca_mode1, oldmode); <span class="comment">//å†™å›åŸæ¥</span></span><br><span class="line">delay_ms(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">pca_write1(pca_mode1, oldmode | <span class="number">0xa1</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹    æ³¨æ„æ‰‹å†Œé‡Œä¹Ÿå¤šæ¬¡å¼ºè°ƒï¼Œ<span class='p red'>åªæœ‰åœ¨è®¾å¤‡è¿›å…¥ç¡çœ æ¨¡å¼ä¹‹åæ‰èƒ½ä¿®æ”¹åˆ†é¢‘ç³»æ•°</span></p><p>è¿™é‡Œéœ€è¦äº†è§£ä¸€ä¸‹<strong>MODE1</strong>å¯„å­˜å™¨é‡Œçš„<emp>RESTART</emp>ä½</p><div class="note info modern"><p>åœ¨<strong>ä¸åœæ­¢PWMé€šé“è¾“å‡º</strong>çš„æƒ…å†µä¸‹å°†è®¾å¤‡è®¾ç½®ä¸ºsleepæ¨¡å¼ï¼Œ<strong>RESTART</strong>ä½ä¼šåœ¨ä¸€ä¸ªPWMå‘¨æœŸåè¢«ç½®1ï¼Œ<strong>LED</strong>å¯„å­˜å™¨é‡Œé¢çš„æ•°æ®ä¼šè¢«ä¿å­˜ã€‚æƒ³è¦é‡å¯ï¼Œå‘<strong>RESTART</strong>ä½å†™1å³å¯ï¼Œæ­¤æ—¶è¯¥ä½ä¼šè¢«è‡ªåŠ¨<strong>ç½®0</strong>ã€‚</p></div><p>â€‹    å½“ç„¶ï¼Œåœ¨è¿™æ®µä»£ç ä¸­è¿˜è®¾ç½®äº†<strong>ALLCALLã€AL</strong>ä½ã€‚</p><h3 id="è°ƒåˆ¶PWMå ç©ºæ¯”"><a href="#è°ƒåˆ¶PWMå ç©ºæ¯”" class="headerlink" title="è°ƒåˆ¶PWMå ç©ºæ¯”"></a>è°ƒåˆ¶PWMå ç©ºæ¯”</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">pca_setpwm1</span><span class="params">(u8 num, u32 on, u32 off)</span> </span><br><span class="line">&#123;</span><br><span class="line">pca_write1(LED0_ON_L+<span class="number">4</span>*num,on);</span><br><span class="line">pca_write1(LED0_ON_H+<span class="number">4</span>*num,on&gt;&gt;<span class="number">8</span>);</span><br><span class="line">pca_write1(LED0_OFF_L+<span class="number">4</span>*num,off);</span><br><span class="line">pca_write1(LED0_OFF_H+<span class="number">4</span>*num,off&gt;&gt;<span class="number">8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªâ€œLEDâ€æœ‰å››ä¸ªå¯„å­˜å™¨ï¼Œæ‰€ä»¥<strong>ç¬¬nä¸ª</strong>ledåœ°å€ä¸º<strong>LED0</strong>åœ°å€åŠ <strong>4n</strong>ã€‚</p><h1 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h1><p>æ„Ÿè°¢å¤§å®¶è€å¿ƒçœ‹å®Œäº†æœ¬ç¯‡åšå®¢ï¼Œæ¬¢è¿å¤§å®¶åˆ†äº«ï¼›å®Œæ•´çš„å·¥ç¨‹å¯ä»¥åœ¨æˆ‘çš„<strong>GiHub</strong>ä»“åº“æ‰¾åˆ°ã€‚ç”±äºæœ¬äººæ°´å¹³æœ‰é™ï¼Œå¯èƒ½æœ‰ä¸å®Œå–„ä¹‹å¤„ï¼Œæ¬¢è¿å¤§å®¶æ‰¹è¯„æŒ‡æ­£ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> IIC </tag>
            
            <tag> èˆµæœº </tag>
            
            <tag> PCA9685 </tag>
            
            <tag> é€šè®¯åè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰è¶£çš„ä½è¿ç®—</title>
      <link href="/2022/10/29/%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
      <url>/2022/10/29/%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ‰æ„æ€çš„æ“ä½œ"><a href="#æœ‰æ„æ€çš„æ“ä½œ" class="headerlink" title="æœ‰æ„æ€çš„æ“ä½œ"></a>æœ‰æ„æ€çš„æ“ä½œ</h1><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><p>ä½è¿ç®—æ˜¯ç®—æ³•é¢˜é‡Œæ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç§ç±»å‹ï¼Œå®ƒä»¬åˆ©ç”¨äºŒè¿›åˆ¶ä½è¿ç®—çš„ç‰¹æ€§è¿›è¡Œä¸€äº›å¥‡å¦™çš„ä¼˜åŒ–å’Œè®¡ç®—ã€‚å¸¸ç”¨çš„ä½è¿ç®—ç¬¦å·åŒ…æ‹¬ï¼šâ€œâˆ§â€ æŒ‰ä½å¼‚æˆ–ï¼ˆå–ä¸åŒï¼‰ã€â€œ&amp;â€ æŒ‰ä½ä¸ï¼ˆå–äº¤ï¼‰ã€â€œ|â€ æŒ‰ä½æˆ–ï¼ˆå–å¹¶ï¼‰ã€â€œ~â€ å–åã€â€œ&lt;&lt;â€ ç®—æœ¯å·¦ç§»å’Œ â€œ&gt;&gt;â€ ç®—æœ¯å³ç§»ã€‚</p><ul><li>n &amp; (n - 1) å¯ä»¥å»é™¤ n çš„ä½çº§è¡¨ç¤ºä¸­æœ€ä½çš„é‚£ä¸€ä½ï¼Œä¾‹å¦‚å¯¹äºäºŒè¿›åˆ¶è¡¨ç¤º 11110100 ï¼Œå‡å» 1 å¾—åˆ° 11110011ï¼Œè¿™ä¸¤ä¸ªæ•°æŒ‰ä½ä¸å¾—åˆ° 11110000ã€‚</li><li>n &amp; (-n) å¯ä»¥å¾—åˆ° n çš„ä½çº§è¡¨ç¤ºä¸­æœ€ä½çš„é‚£ä¸€ä½ï¼Œä¾‹å¦‚å¯¹äºäºŒè¿›åˆ¶è¡¨ç¤º 11110100ï¼Œå–è´Ÿå¾—åˆ° 00001100ï¼Œè¿™ä¸¤ä¸ªæ•°æŒ‰ä½ä¸å¾—åˆ° 00000100ã€‚</li></ul><h2 id="è·å–äºŒè¿›åˆ¶æ•°ä¸­1çš„ä¸ªæ•°"><a href="#è·å–äºŒè¿›åˆ¶æ•°ä¸­1çš„ä¸ªæ•°" class="headerlink" title="è·å–äºŒè¿›åˆ¶æ•°ä¸­1çš„ä¸ªæ•°"></a>è·å–äºŒè¿›åˆ¶æ•°ä¸­1çš„ä¸ªæ•°</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">bitset_contains</span><span class="params">(u32 s,<span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(((s&gt;&gt;i) &amp; <span class="number">0x01</span>) == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">bitset_size0</span><span class="params">(u32 s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">32</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        n += <span class="built_in">bitset_contains</span>(s,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>int bitset_contains(u32 s,int i)</code>å°±æ˜¯åˆ¤æ–­sçš„<strong>ç¬¬iä½</strong>ï¼ˆä»<strong>ç¬¬0ä½</strong>å¼€å§‹è®¡èµ·ï¼‰æ˜¯å¦ä¸º1ã€‚</p><p><code>int bitset_size0(u32 s)</code>å°±æ˜¯ä¸€ä½ä½çœ‹æ˜¯ä¸æ˜¯1ï¼Œæ˜¯å°±<strong>è®¡æ•°åŠ ä¸€</strong>ã€‚</p><p>æœ€åæ•ˆæœå°±æ˜¯<strong>ç»Ÿè®¡sä¸º1çš„ä½æ•°</strong></p><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">bitset_size</span><span class="params">(u32 s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    s = (s &amp; <span class="number">0x55555555</span>) + ((s&gt;&gt;<span class="number">1</span>) &amp; <span class="number">0x55555555</span>); <span class="comment">//01010101010101010101010101010101</span></span><br><span class="line">    s = (s &amp; <span class="number">0x33333333</span>) + ((s&gt;&gt;<span class="number">2</span>) &amp; <span class="number">0x33333333</span>); <span class="comment">//00110011001100110011001100110011</span></span><br><span class="line">    s = (s &amp; <span class="number">0x0f0f0f0f</span>) + ((s&gt;&gt;<span class="number">4</span>) &amp; <span class="number">0x0f0f0f0f</span>); <span class="comment">//00001111000011110000111100001111</span></span><br><span class="line">    s = (s &amp; <span class="number">0x00ff00ff</span>) + ((s&gt;&gt;<span class="number">8</span>) &amp; <span class="number">0x00ff00ff</span>); <span class="comment">//00000000111111110000000011111111</span></span><br><span class="line">    s = (s &amp; <span class="number">0x0000ffff</span>) + ((s&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000ffff</span>);<span class="comment">//00000000000000001111111111111111</span></span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹    ä¸€èˆ¬æ¥è¯´ï¼Œçœ‹åˆ°è¿™æ ·çš„<strong>åå…­è¿›åˆ¶</strong>æ•°å°±ä¼šä¸ç”±è‡ªä¸»åœ°æƒ³æŠŠå®ƒä»¬è½¬æ¢ä¸º<strong>äºŒè¿›åˆ¶</strong>çœ‹çœ‹ã€‚è½¬æ¢ä¹‹åå‘¢å°±èƒ½ç¨å¾®çœ‹å‡ºä¸€äº›ç«¯å€ªäº†ã€‚ğŸ˜</p><p>â€‹    <code>0x55555555</code>å°†såˆ†ä¸º<strong>ä¸¤ä¸ªä¸€ç»„</strong>ï¼Œæ¯ä¸€ç»„ä¸¤ä½æ•°ã€‚å…¶å®å°±æ˜¯==åˆ†åˆ«åˆ¤æ–­ä¸€ç»„é‡Œçš„ä¸¤ä½æ•°æ˜¯ä¸æ˜¯1==ã€‚</p><ul><li>éƒ½æ˜¯1ï¼Œåˆ™å˜ä¸º<strong>1+1=10</strong>ï¼›</li><li>åªæœ‰ä¸€ä¸ªï¼Œå°±å˜ä¸º<strong>01</strong>ï¼›</li><li>æ²¡æœ‰åˆ™ä¸º<strong>0</strong></li></ul><p>â€‹    å˜æ¢å®Œäº†ä¹‹åå‘¢ï¼Œå‚¨å­˜çš„å°±æ˜¯è¿™ä¸€ç»„é‡Œ <em>â€œ1â€</em> çš„ä¸ªæ•°ã€‚</p><p>â€‹    <code>0x33333333</code>åˆ™æ˜¯å°†såˆ†ä¸º<strong>å››ä¸ªä¸€ç»„</strong>ï¼Œä¸€ç»„é‡ŒåŒæ ·æ˜¯<strong>ä¸¤ä¸ªæ•°</strong>ï¼Œåªä¸è¿‡ä¸€ä¸ªæ•°æ˜¯<strong>ä¸¤ä½</strong>ã€‚æ“ä½œçš„ç»“æœå‘¢å°±æ˜¯<strong>å°†ä¸¤ä¸ªæ•°å„è‡ªä¸¤ä¸ªä½é‡Œ1çš„ä¸ªæ•°</strong>åŠ èµ·æ¥ï¼Œå³<strong>å››ä¸ªä½é‡Œ1çš„ä¸ªæ•°</strong>ã€‚</p><p>â€‹    <code>0x0f0f0f0f</code>å°†såˆ†ä¸º<strong>å…«ä¸ªä¸€ç»„</strong>ï¼Œç»Ÿè®¡<strong>å…«ä¸ªä½é‡Œ1çš„ä¸ªæ•°</strong></p><p>â€‹    <code>0x00ff00ff</code>å°†såˆ†ä¸º<strong>åå…­ä¸ªä¸€ç»„</strong>ï¼Œç»Ÿè®¡<strong>åå…­ä½é‡Œ1çš„ä¸ªæ•°</strong></p><p>â€‹    <code>0x0000ffff</code>å°†æ•´ä¸ª32ä½çš„sçœ‹ä½œä¸€ç»„ï¼Œç»Ÿè®¡<strong>æ‰€æœ‰1çš„ä¸ªæ•°</strong></p><h2 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h2><p>â€‹    ä¸¤ç§æ–¹æ³•æ¯”è¾ƒæ¥çœ‹ï¼Œæ˜æ˜¾æ˜¯ç¬¬ä¸€ç§æ–¹æ³•ç®€å•æ˜“æ‡‚ï¼Œä¹Ÿå®¹æ˜“æƒ³åˆ°ï¼›ä½†æ˜¯ä»è¿ç®—æ•ˆç‡ä¸Šæ¥çœ‹ï¼Œç¬¬äºŒç§è¿œè¿œé«˜äºç¬¬ä¸€ç§ã€‚</p><h1 id="é¥æ§æ•°æ®è§£æ"><a href="#é¥æ§æ•°æ®è§£æ" class="headerlink" title="é¥æ§æ•°æ®è§£æ"></a>é¥æ§æ•°æ®è§£æ</h1><p><img src="https://s2.loli.net/2022/10/29/7vaHiBuG1CXbV9m.png" alt="é¥æ§åè®®.png"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">RemoteReceive</span><span class="params">(<span class="keyword">volatile</span> <span class="type">uint8_t</span> *<span class="type">const</span> ptr_sbus_rx_buffer)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(ptr_sbus_rx_buffer == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    RC_Ctl.rc.ch0 = (ptr_sbus_rx_buffer[<span class="number">0</span>] | (ptr_sbus_rx_buffer[<span class="number">1</span>] &lt;&lt; <span class="number">8</span>)) &amp;<span class="number">0x07ff</span>;</span><br><span class="line">    RC_Ctl.rc.ch1 = (ptr_sbus_rx_buffer[<span class="number">1</span>] &gt;&gt; <span class="number">3</span>) | (ptr_sbus_rx_buffer[<span class="number">2</span>] &lt;&lt; <span class="number">5</span>) &amp; <span class="number">0x07ff</span>;</span><br><span class="line">    RC_Ctl.rc.ch2 = (ptr_sbus_rx_buffer[<span class="number">2</span>] &gt;&gt; <span class="number">6</span>) | (ptr_sbus_rx_buffer[<span class="number">3</span>] &lt;&lt; <span class="number">2</span>) | (ptr_sbus_rx_buffer[<span class="number">4</span>] &lt;&lt; <span class="number">10</span>) &amp; <span class="number">0x07ff</span>;</span><br><span class="line">    RC_Ctl.rc.ch3 = (ptr_sbus_rx_buffer[<span class="number">4</span>] &gt;&gt; <span class="number">1</span>) | (ptr_sbus_rx_buffer[<span class="number">5</span>] &lt;&lt; <span class="number">7</span>) &amp; <span class="number">0x07ff</span>; </span><br><span class="line">    RC_Ctl.rc.s1 = (ptr_sbus_rx_buffer[<span class="number">5</span>] &gt;&gt; <span class="number">6</span>) &amp; <span class="number">0x0003</span>;</span><br><span class="line">    RC_Ctl.rc.s2 = (ptr_sbus_rx_buffer[<span class="number">5</span>] &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0003</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¦‚æ‹¬æ¥è¯´å°±æ˜¯ä¾ç…§<strong>é€šä¿¡åè®®</strong>åˆ©ç”¨<strong>ä½ç§»è¿ç®—</strong>å’Œ<strong>æˆ–ã€ä¸è¿ç®—</strong>ï¼Œå°†æ•°æ®ä»<strong>ptr_sbus_rx_buffer</strong>å‰¥ç¦»æå–è‡³<strong>RC_Ctl.rc.xx</strong>ä¸­ã€‚</p><ul><li>ä½ç§»æ“ä½œåï¼Œéœ€è¦æå–çš„æ•°æ®åœ¨<strong>å11ä½(æˆ–å2ä½)</strong>ï¼Œ<strong>0x07ff</strong>æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯<strong>0000011111111111</strong>ï¼Œè¿‡æ»¤æ‰ä¸éœ€è¦çš„ä½æ•°ï¼›<strong>0x0003</strong>åŒç†</li><li><strong>ch0</strong>è·å–buffer[0]<strong>å…¨éƒ¨å…«ä½</strong>å’Œbuffer[1]<strong>ä½ä¸‰ä½</strong></li><li><strong>ch1</strong>è·å–buffer[1]<strong>é«˜äº”ä½</strong>å’Œbuffer[2]<strong>ä½å…­ä½</strong></li><li><strong>ch2</strong>è·å–buffer[2]<strong>é«˜ä¸¤ä½</strong>å’Œbuffer[3]<strong>å…¨éƒ¨å…«ä½</strong>å’Œbuffer[4]<strong>ä½ä¸€ä½</strong></li><li><strong>ch3</strong>è·å–buffer[4]<strong>é«˜ä¸ƒä½</strong>å’Œbuffer[5]<strong>ä½å››ä½</strong></li><li><strong>s1</strong>è·å–buffer[5]<strong>é«˜ä¸¤ä½</strong></li><li><strong>s2</strong>è·å–buffer[5]<strong>ç¬¬äº”ç¬¬å…­ä½</strong></li></ul><p>ä¸çŸ¥é“æ˜¯ä¸æ˜¯æåäº†ï¼Œæ ¹æ®åè®®æ¥çœ‹æ˜¯<strong>s1</strong>è·å–buffer[5]<strong>ç¬¬äº”ç¬¬å…­ä½</strong>ï¼Œ<strong>s2</strong>è·å–buffer[5]<strong>é«˜ä¸¤ä½</strong></p><h1 id="ä½è¿ç®—å®ç°å››åˆ™è¿ç®—"><a href="#ä½è¿ç®—å®ç°å››åˆ™è¿ç®—" class="headerlink" title="ä½è¿ç®—å®ç°å››åˆ™è¿ç®—"></a>ä½è¿ç®—å®ç°å››åˆ™è¿ç®—</h1><h2 id="åŠ æ³•"><a href="#åŠ æ³•" class="headerlink" title="åŠ æ³•"></a>åŠ æ³•</h2><h3 id="ç®—æ³•æ€è·¯"><a href="#ç®—æ³•æ€è·¯" class="headerlink" title="ç®—æ³•æ€è·¯"></a>ç®—æ³•æ€è·¯</h3><p>â€‹    åœ¨å¹³æ—¶æ‰‹ç®—çš„æ—¶å€™æˆ‘ä»¬ç»å¸¸ä¼š<strong>åˆ—ç«–å¼</strong>ï¼Œå…ˆä¸è€ƒè™‘è¿›ä½ï¼Œåªçœ‹<strong>å’Œ</strong>å’Œ<strong>ç›¸åŠ çš„ä¸¤ä¸ªæ•°</strong>åŒä½çš„æ•°ï¼ŒæŠŠè¿›ä½æ•°å†™å°ä¸€ç‚¹è®°åœ¨æ¨ªçº¿ä¸Šæ–¹ã€‚<strong>è®¡ç®—ä¸‹ä¸€ä½çš„æ—¶å€™å†åŠ ä¸Šä¸Šä¸€ä½çš„è¿›ä½ã€‚</strong></p><p>â€‹    æ‰€ä»¥åœ¨ç¨‹åºä¸­ä¹Ÿæ˜¯æ¨¡æ‹Ÿè¿™æ ·ä¸€ä¸ªæ€è·¯ï¼š</p><ul><li>å…ˆä¸çœ‹è¿›ä½ï¼Œå¾—åˆ°ä¸€ä¸ªå’Œï¼›è®°ä¸‹è¿›ä½</li><li>è¿›ä½åœ¨ä¸å’Œç›¸åŠ ï¼Œä¸çœ‹è¿›ä½å¾—åˆ°ä¸€ä¸ªæ–°çš„å’Œï¼›åŒæ—¶ä¹Ÿå¾—åˆ°æ–°çš„è¿›ä½</li><li>ä¸æ–­è¿­ä»£é€’æ¨ï¼Œç›´åˆ°ä¸å†äº§ç”Ÿæ–°çš„è¿›ä½</li></ul><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief åŠ æ³•å‡½æ•°</span></span><br><span class="line"><span class="comment"> * @param ini_x åŠ æ•°1</span></span><br><span class="line"><span class="comment"> * @param ini_y åŠ æ•°2</span></span><br><span class="line"><span class="comment"> * @return è¡¥ç å½¢å¼çš„ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">u32 <span class="title">addition</span><span class="params">(u32 ini_x, u32 ini_y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//ä¸éœ€è¦è½¬æ¢ä¸ºè¡¥ç </span></span><br><span class="line">    u32 x = ini_x, y = ini_y;</span><br><span class="line">    <span class="comment">//å’Œï¼Œè¿›ä½</span></span><br><span class="line">    u32 ans,carry;</span><br><span class="line">    ans = x ^ y;</span><br><span class="line">    carry = (x &amp; y) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//ä¸æ–­è·å–è¿›ä½ä¸ä¸è€ƒè™‘è¿›ä½çš„å’Œï¼Œè¿­ä»£ç›¸åŠ ï¼Œç›´è‡³è¿›ä½ä¸º0</span></span><br><span class="line">    <span class="keyword">while</span>(carry != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        u32 i = ans, j = carry;</span><br><span class="line">        ans = i ^ j;</span><br><span class="line">        carry = (i &amp; j) &lt;&lt; <span class="number">1</span>;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//DEBUGè°ƒè¯•</span></span><br><span class="line">    <span class="comment">//printf(&quot;DE<span class="doctag">BUG:</span> %d add %d = %d\r\n&quot;,ini_x,ini_y,ans);</span></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹    å¯ä»¥å‘ç°ï¼Œ</p><ul><li>ä¸çœ‹è¿›ä½å¾—åˆ°çš„å’Œå…¶å®å°±æ˜¯<strong>ä¸¤æ•°å¼‚æˆ–</strong>ï¼Œå³<code>ans = x ^ y;</code>ï¼›</li><li>è¿›ä½å³<strong>ä¸¤æ•°ç›¸ä¸å†å·¦ç§»ä¸€ä½</strong>ï¼Œå³<code>carry = (x &amp; y) &lt;&lt; 1;</code></li></ul><h2 id="å‡æ³•"><a href="#å‡æ³•" class="headerlink" title="å‡æ³•"></a>å‡æ³•</h2><p>â€‹    <strong>a-b</strong> å³ <strong>a+(-b)</strong></p><h2 id="ä¹˜æ³•"><a href="#ä¹˜æ³•" class="headerlink" title="ä¹˜æ³•"></a>ä¹˜æ³•</h2><h3 id="ç®—æ³•æ€è·¯-1"><a href="#ç®—æ³•æ€è·¯-1" class="headerlink" title="ç®—æ³•æ€è·¯"></a>ç®—æ³•æ€è·¯</h3><p>â€‹    å¯ä»¥å°†è¢«ä¹˜æ•°ä¸æ–­åŠ <strong>ä¹˜æ•°æ¬¡æ•°</strong>çš„è‡ªå·±ã€‚ä½†æ˜¯è¿™æ ·æ•ˆç‡ä¸é«˜ã€‚åŒæ ·æ˜¯æ¨¡æ‹Ÿæ‰‹ç®—çš„æ€æƒ³ï¼Œä»<strong>ä¹˜æ•°çš„æœ€ä½ä½</strong>åˆ°<strong>æœ€é«˜ä½</strong>ï¼Œåœ¨<strong>ç¬¬iä½</strong>ï¼Œå³ç»™æœ€åä¹˜ç§¯è´¡çŒ®çš„å€¼ä¸º</p><p>==è¢«ä¹˜æ•° <em> ä¹˜æ•°[i] </em> (è¿›åˆ¶æ•°)^(i-1)^==</p><p>â€‹    åœ¨è¿™ä¸ªç®—æ³•ä¸‹ä¸å†èƒ½ç›´æ¥ç”¨è¡¥ç å‚ä¸è®¡ç®—ï¼Œæ‰€ä»¥è¦æ¢æˆåŸç å¹¶å»é™¤ç¬¦å·ä½ã€‚åœ¨å¼€å§‹çš„æ—¶å€™æ ¹æ®ä¸¤æ•°è®°ä¸‹ä¹˜ç§¯çš„æ­£è´Ÿå€¼ï¼Œè®¡ç®—å®Œæ¯•ä¹‹åå†èµ‹å›å»ã€‚</p><h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief ä¹˜æ³•</span></span><br><span class="line"><span class="comment"> * @param ini_x </span></span><br><span class="line"><span class="comment"> * @param ini_y </span></span><br><span class="line"><span class="comment"> * @return u32 ç§¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">u32 <span class="title">multiplication</span><span class="params">(u32 ini_x, u32 ini_y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">bool</span> negative_flag=<span class="number">0</span>;</span><br><span class="line">    u32 ans=<span class="number">0</span>, x=ini_x, y=ini_y;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ç§¯æ­£è´Ÿ</span></span><br><span class="line">    <span class="keyword">if</span>( ( (x&amp;<span class="number">0x80000000</span>) &amp;&amp; !(y&amp;<span class="number">0x80000000</span>) )||( !(x&amp;<span class="number">0x80000000</span>) &amp;&amp; (y&amp;<span class="number">0x80000000</span>) ) ) &#123;negative_flag=<span class="number">1</span>;&#125;</span><br><span class="line">    <span class="comment">//è¦è½¬æ¢ä¸ºåŸç å¹¶å»æ‰ç¬¦å·ä½</span></span><br><span class="line">    x = <span class="built_in">back_com</span>(x);</span><br><span class="line">    y = <span class="built_in">back_com</span>(y);</span><br><span class="line">    x &amp;= <span class="number">0x7fffffff</span>;</span><br><span class="line">    y &amp;= <span class="number">0x7fffffff</span>;</span><br><span class="line">    <span class="comment">//å€Ÿé‰´ç«–ä¹˜æ³•</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">31</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(y&amp;<span class="number">0x01</span>) &#123;ans = <span class="built_in">addition</span>(ans,x);&#125;</span><br><span class="line">        y = y&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        x = x&lt;&lt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(y == <span class="number">0</span>) &#123;<span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åŠ ä¸Šæ­£è´Ÿå·</span></span><br><span class="line">    <span class="keyword">if</span> (negative_flag) </span><br><span class="line">    &#123;</span><br><span class="line">        ans |= <span class="number">0x80000000</span>;<span class="comment">//è¿™ä¸ªæ—¶å€™ä¾ç„¶æ˜¯åŸç ï¼Œæƒ³ç›´æ¥ç”¨%dï¼Œè¦è½¬æ¢ä¸ºè¡¥ç </span></span><br><span class="line">        ans = <span class="built_in">get_com</span>(ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//DEBUGè°ƒè¯•</span></span><br><span class="line">    <span class="comment">//printf(&quot;DE<span class="doctag">BUG:</span> %d multiply %d = %d\r\n&quot;,ini_x,ini_y,ans);</span></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é™¤æ³•"><a href="#é™¤æ³•" class="headerlink" title="é™¤æ³•"></a>é™¤æ³•</h2><p>â€‹    å› ä¸ºé™¤æ³•æœ‰<strong>å•†</strong>å’Œ<strong>ä½™æ•°</strong>ï¼Œæ‰€ä»¥ç”¨äº†ä¸€ä¸ªç»“æ„ä½“æ–¹ä¾¿å­˜å‚¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief é™¤æ³•ç­”æ¡ˆç»“æ„ä½“</span></span><br><span class="line"><span class="comment"> * @param ans å•†</span></span><br><span class="line"><span class="comment"> * @param mod ä½™æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">__ans_division_t</span>&#123;</span><br><span class="line">    u32 ans;</span><br><span class="line">    u32 mod;</span><br><span class="line">&#125;<span class="type">ans_division_t</span>;</span><br></pre></td></tr></table></figure><h3 id="ç®—æ³•æ€è·¯-2"><a href="#ç®—æ³•æ€è·¯-2" class="headerlink" title="ç®—æ³•æ€è·¯"></a>ç®—æ³•æ€è·¯</h3><p>â€‹    ä¹Ÿæ˜¯æ¨¡æ‹Ÿæ‰‹ç®—æµç¨‹ï¼Œåœ¨ç†è§£äº†ä¹˜æ³•çš„å®ç°æ€è·¯åä¾¿å¾ˆå®¹æ˜“ç†è§£ã€‚</p><ul><li>å°†è¢«é™¤æ•°ä¸æ–­<strong>è¿›ä½</strong>ï¼Œå³ä¹˜ä¸Š<strong>è¿›åˆ¶æ•°</strong>ï¼Œç›´åˆ°æ°å¥½æ¯”è¢«é™¤æ•°å°ã€‚</li><li>ç”¨è¢«é™¤æ•°é™¤ä»¥<strong>è¿›ä½åçš„é™¤æ•°</strong>å¾—åˆ°<strong>å•†</strong>ï¼ˆä¸ºäº†åŒºåˆ«æœ€ç»ˆçš„å•†æŠŠå®ƒå«åš<em>å°å•†</em>å§ï¼‰ï¼ŒåŒæ—¶<strong>å•†</strong>åŠ ä¸Š==å°å•†*è¿›åˆ¶æ•°^(è¿›ä½æ¬¡æ•°)^==</li><li>è¢«é™¤æ•°ä¸æ–­<strong>é€€ä½</strong>ï¼ˆé™¤ä»¥è¿›åˆ¶æ•°ï¼‰ï¼ŒåŒæ—¶é‡å¤ä¸Šè¿°æ“ä½œï¼Œç›´åˆ°å›åˆ°æœ€åˆå¤§å°ï¼Œå³<strong>è¿›ä½æ•°ä¸º0</strong></li></ul><h3 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief é™¤æ³•</span></span><br><span class="line"><span class="comment"> * @param ini_x è¢«é™¤æ•°</span></span><br><span class="line"><span class="comment"> * @param ini_y é™¤æ•°</span></span><br><span class="line"><span class="comment"> * @return ans_division_t* ç­”æ¡ˆæŒ‡é’ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">ans_division_t</span> *<span class="title">division</span><span class="params">(u32 ini_x, u32 ini_y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">bool</span> negative_flag=<span class="number">0</span>;</span><br><span class="line">    u32 ans=<span class="number">0</span>, carry=<span class="number">0</span>, x=ini_x, y=ini_y;</span><br><span class="line">    <span class="type">ans_division_t</span> *ans_division;</span><br><span class="line">    ans_division = (<span class="type">ans_division_t</span>*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">ans_division_t</span>));</span><br><span class="line">    <span class="keyword">if</span>( ( (x&amp;<span class="number">0x80000000</span>) &amp;&amp; !(y&amp;<span class="number">0x80000000</span>) )||( !(x&amp;<span class="number">0x80000000</span>) &amp;&amp; (y&amp;<span class="number">0x80000000</span>) ) ) &#123;negative_flag=<span class="number">1</span>;&#125;</span><br><span class="line">    <span class="comment">//è¦è½¬æ¢ä¸ºåŸç å¹¶å»æ‰ç¬¦å·ä½</span></span><br><span class="line">    x = <span class="built_in">back_com</span>(x);</span><br><span class="line">    y = <span class="built_in">back_com</span>(y);</span><br><span class="line">    x &amp;= <span class="number">0x7fffffff</span>;</span><br><span class="line">    y &amp;= <span class="number">0x7fffffff</span>;</span><br><span class="line">    <span class="comment">//ä¾ç„¶æ˜¯æ¨¡æ‹Ÿæ‰‹é™¤æµç¨‹</span></span><br><span class="line">    <span class="comment">//é™¤æ•°ä¸æ–­è¿›ä½ç›´è‡³æ¯”è¢«é™¤æ•°å¤§</span></span><br><span class="line">    <span class="keyword">while</span>(y &lt; x) </span><br><span class="line">    &#123;</span><br><span class="line">        y = y&lt;&lt;<span class="number">1</span>;</span><br><span class="line">        carry = <span class="built_in">addition</span>(carry,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœèƒ½é™¤ï¼Œå•†å°±åŠ ä¸Š1&lt;&lt;carryï¼Œé™¤æ•°å†ä¸æ–­å³ç§»ç›´è‡³å›åˆ°æœ¬æ¥å¤§å°ã€‚</span></span><br><span class="line">    <span class="keyword">while</span>(carry)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(x&gt;=y)</span><br><span class="line">        &#123;</span><br><span class="line">            ans = <span class="built_in">addition</span>(ans,<span class="number">1</span>&lt;&lt;carry);</span><br><span class="line">            x = <span class="built_in">addition</span>(x,-y);</span><br><span class="line">        &#125;</span><br><span class="line">        y = y&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        carry = <span class="built_in">addition</span>(carry,<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;=y) </span><br><span class="line">    &#123;</span><br><span class="line">        ans = <span class="built_in">addition</span>(ans,<span class="number">1</span>);</span><br><span class="line">        x = <span class="built_in">addition</span>(x,-y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//èµ‹å€¼</span></span><br><span class="line">    ans_division-&gt;ans = ans;</span><br><span class="line">    ans_division-&gt;mod = x;</span><br><span class="line">    <span class="keyword">return</span> ans_division;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹    å› ä¸ºè´Ÿæ•°çš„ä½™æ•°æ¯”è¾ƒå¥‡æ€ªï¼Œå¹³æ—¶ä¹Ÿä¸ç”¨ï¼Œè¿™é‡Œæ²¡æœ‰è€ƒè™‘åœ¨å†…ã€‚</p><h2 id="DEBUG"><a href="#DEBUG" class="headerlink" title="DEBUG"></a>DEBUG</h2><p>â€‹    vscode ç¨‹åºæ–‡ä»¶ä¸èƒ½ç”¨ä¸­æ–‡å‘½åã€‚</p><p>â€‹    åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ä½¿ç”¨è¡¥ç è®°å½•ã€‚å³ä¾¿æ˜¯<strong>usigned int</strong>ï¼Œå€˜è‹¥<strong>scanf -9</strong>ï¼Œå¯¹åº”äºŒè¿›åˆ¶ç¼–ç ä¹Ÿæ˜¯<strong>11111111111111111111111111110111</strong>ã€‚<strong>int</strong>å‹åŒæ ·å¦‚æ­¤ã€‚</p><p>â€‹    æ‰€ä»¥åœ¨è¿ç®—çš„æ—¶å€™ä¸éœ€è¦äººä¸ºçš„å»è½¬æ¢ä¸ºè¡¥ç äº†ï¼Œåœ¨è¿™æ–¹é¢è€½è¯¯äº†ä¸å°‘æ—¶é—´ã€‚</p><p>â€‹    è€Œå¯¹äºåŒæ ·çš„ä¸€ä¸²äºŒè¿›åˆ¶ç¼–ç ï¼Œ<strong>printf(â€œ%dâ€)</strong>å’Œ<strong>printf(â€œ%uâ€)</strong>è¾“å‡ºç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼š%dä¼šè‡ªåŠ¨è½¬æ¢è¾“å‡ºåŸç å¯¹åº”çš„æœ‰ç¬¦å·æ•°ï¼›é‚£%uåˆ™æ˜¯ä¼šå°†è¿™ä¸ªè¡¥ç å½“ä½œåŸç ç›´æ¥æ¢ç®—æˆåè¿›åˆ¶è¾“å‡ºã€‚</p><p><img src="https://s2.loli.net/2022/10/29/PICY3lTj1Q4OKGS.png" alt="å­˜å‚¨å½¢å¼Â·1.png"></p><p><img src="https://s2.loli.net/2022/10/29/2SIuUTAJV9tDnqR.png" alt="å­˜å‚¨å½¢å¼2.png"></p><p>â€‹    å…¶ä½™çš„å°±æ˜¯ä¸€äº›é€»è¾‘æ¼æ´äº†ï¼Œä¸å¾—ä¸è¯´VScodeå†™ä»£ç è¿˜æ˜¯æ¯”Keilèˆ’æœğŸ˜</p><h1 id="æœ‰å…³ä½è¿ç®—çš„ä¸€äº›æœ‰æ„æ€çš„é¢˜ç›®"><a href="#æœ‰å…³ä½è¿ç®—çš„ä¸€äº›æœ‰æ„æ€çš„é¢˜ç›®" class="headerlink" title="æœ‰å…³ä½è¿ç®—çš„ä¸€äº›æœ‰æ„æ€çš„é¢˜ç›®"></a>æœ‰å…³ä½è¿ç®—çš„ä¸€äº›æœ‰æ„æ€çš„é¢˜ç›®</h1><h2 id="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h2><blockquote><p>ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</p><p>è¯´æ˜ï¼šä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°å—</p><p>ç¤ºä¾‹ 1:</p><blockquote><p>è¾“å…¥: [2,2,1]<br>è¾“å‡º: 1</p></blockquote><p>ç¤ºä¾‹ 2:</p><blockquote><p>è¾“å…¥: [4,1,2,1,2]<br>è¾“å‡º: 4</p></blockquote></blockquote><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>éœ€è¦ç”¨åˆ°å¼‚æˆ–è¿ç®—çš„æ€§è´¨ï¼š</p><p>a \^ a = 0<br>a \^ 0 = a<br>a \^ b \^ a = b \^ (a \^ a) = bï¼ˆäº¤æ¢å¾‹å’Œç»“åˆå¾‹ï¼‰<br>æ‰€ä»¥åªè¦å…¨éƒ¨å¼‚æˆ–æœ€åç»“æœå°±æ˜¯ç­”æ¡ˆ</p><h3 id="ä»£ç å®ç°-3"><a href="#ä»£ç å®ç°-3" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">singleNumber</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="type">int</span> &amp; num: nums)</span><br><span class="line">        ans ^= num;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¯”ç‰¹ä½è®¡æ•°"><a href="#æ¯”ç‰¹ä½è®¡æ•°" class="headerlink" title="æ¯”ç‰¹ä½è®¡æ•°"></a>æ¯”ç‰¹ä½è®¡æ•°</h2><blockquote><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° nï¼Œæ±‚ä» 0 åˆ° n çš„æ‰€æœ‰æ•°å­—çš„äºŒè¿›åˆ¶è¡¨è¾¾ä¸­ï¼Œåˆ†åˆ«æœ‰å¤šå°‘ä¸ª 1ã€‚</p></blockquote><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æœ¬é¢˜å¯ä»¥åˆ©ç”¨åŠ¨æ€è§„åˆ’å’Œä½è¿ç®—è¿›è¡Œå¿«é€Ÿçš„æ±‚è§£ã€‚å®šä¹‰ä¸€ä¸ªæ•°ç»„ dpï¼Œå…¶ä¸­ dp [i] è¡¨ç¤ºæ•°å­— i çš„äºŒè¿›åˆ¶å«æœ‰ 1 çš„ä¸ªæ•°ã€‚å¯¹äºç¬¬ i ä¸ªæ•°å­—ï¼Œå¦‚æœå®ƒäºŒè¿›åˆ¶çš„æœ€åä¸€ä½ä¸º 1ï¼Œé‚£ä¹ˆå®ƒå«æœ‰ 1 çš„ä¸ªæ•° åˆ™ä¸º dp [i-1] + 1ï¼›å¦‚æœå®ƒäºŒè¿›åˆ¶çš„æœ€åä¸€ä½ä¸º 0ï¼Œé‚£ä¹ˆå®ƒå«æœ‰ 1 çš„ä¸ªæ•°å’Œå…¶ç®—æœ¯å³ç§»ç»“æœç›¸åŒï¼Œå³ dp [i&gt;&gt;1]ã€‚</p><h3 id="ä»£ç å®ç°-4"><a href="#ä»£ç å®ç°-4" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">countBits</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(num+<span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= num; ++i)</span><br><span class="line">        dp[i] = i &amp; <span class="number">1</span>? dp[i<span class="number">-1</span>] + <span class="number">1</span>: dp[i&gt;&gt;<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// ç­‰ä»·äºdp[i] = dp[i&amp;(i-1)] + 1;</span></span><br><span class="line">    <span class="keyword">return</span> dp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> ä½è¿ç®— </tag>
            
            <tag> leecode </tag>
            
            <tag> å››åˆ™è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•</title>
      <link href="/2022/10/22/STM32%E4%BB%BF%E7%9C%9F%E5%99%A8%E7%A8%8B%E5%BA%8F%E7%83%A7%E5%BD%95/"/>
      <url>/2022/10/22/STM32%E4%BB%BF%E7%9C%9F%E5%99%A8%E7%A8%8B%E5%BA%8F%E7%83%A7%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>â€‹    è¿™å‡ å¤©æ¯é¥¬äº†ä¸€ä¸‹çƒ§å½•ç¨‹åºçš„æ–¹æ³•ã€‚ä¸»è¦è¿˜æ˜¯<strong>SWD</strong>çƒ§å½•ï¼Œåç»­åº”è¯¥ä¼šå°è¯•å…¶ä»–æ–¹æ³•ã€‚æˆ‘æœ€å¼€å§‹çš„æ—¶å€™å°±ä¸å¤ªä¼šå¼„ï¼Œå³ä¾¿æ‰‹è¾¹æœ‰ä¸ªä»¿çœŸå™¨ä¹Ÿæ²¡æœ‰å»ç”¨ï¼ˆåæ¥å°±ä¸¢äº†ğŸ˜‚ï¼‰ï¼Œä¸€ç›´ç”¨çš„æ˜¯<strong>ISP</strong>ä¸‹è½½ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè¿˜ä¸èƒ½åœ¨çº¿è°ƒè¯•ã€‚æ‰€ä»¥å°±æ•´ç†äº†ä¸€ä¸‹çƒ§å½•æ–¹æ³•ã€‚</p><span id="more"></span><h1 id="STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•"><a href="#STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•" class="headerlink" title="STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•"></a>STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•</h1><h3 id="SWDçƒ§å½•"><a href="#SWDçƒ§å½•" class="headerlink" title="SWDçƒ§å½•"></a>SWDçƒ§å½•</h3><p>SWDçƒ§å½•æ˜¯ä¸€ç§ä¸²è¡Œè°ƒè¯•æ¥å£ï¼Œå‡ºå»ä¾›ç”µä¸å…±åœ°åªéœ€è¦ä¸¤æ ¹çº¿å³å¯çƒ§å½•è°ƒè¯•</p><ul><li><strong>SWDIOï¼š</strong> ä¸²è¡Œæ•°æ®çº¿ï¼Œç”¨äºæ•°æ®çš„è¯»å‡ºå’Œå†™å…¥;</li><li><strong>SWDCLKï¼š</strong> ä¸²è¡Œæ—¶é’Ÿçº¿ï¼Œæä¾›æ‰€éœ€è¦çš„æ—¶é’Ÿä¿¡å·;</li></ul><p>ä¸‹é¢æ˜¯å®˜æ–¹æ‰‹å†Œé‡Œçƒ§å½•æ¥å£çš„å¼•è„šåˆ°GPIOå£çš„æ˜ å°„å…³ç³»</p><p><img src="https://s2.loli.net/2022/10/22/yxIoZNYtkJiqcvs.png" alt="æ˜ å°„å…³ç³».png"></p><p>è¿™ä¸ªæ˜¯æ ‡å‡†çš„æ¥å£æ’åˆ—ï¼Œè¦æ³¨æ„çš„æ˜¯æŒ‰ç…§æ’åº§è¾¹ä¸Šçš„<strong>ç¼ºå£å‘å·¦</strong>çš„æ–¹å‘æ¥æŸ¥çœ‹ã€‚</p><p><img src="https://s2.loli.net/2022/10/22/NxQRpn7YiqlcZ9j.png" alt="swd_jtagæ’åº§.png"></p><p>ä¸€èˆ¬æƒ…å†µä¸‹å¤§å¤šæ•°å•ç‰‡æœºçš„ JTAG æ¥å£å’Œ SWDIO æ¥å£æ˜¯å¤ç”¨çš„ï¼Œä¸‹é¢å°±æ˜¯MINIæ¿çš„åŸç†å›¾</p><p><img src="https://s2.loli.net/2022/10/22/hPSMBDUczKI6gOZ.png" alt="MINIswdæ’åº§.png"></p><h4 id="J-link"><a href="#J-link" class="headerlink" title="J-link"></a>J-link</h4><p>è¿™ä¸ªæ˜¯æ¯”è¾ƒå¸¸è§ä¹Ÿæ¯”è¾ƒä¾¿å®œçš„ä¸€æ¬¾J-linkï¼Œåªæœ‰<strong>3.3vVCCã€SWDIOã€SWCLKã€GND</strong>å››æ ¹çº¿ï¼Œæ¥çº¿æ–¹å¼ä¹Ÿååˆ†çš„ç®€å• ã€‚</p><p><img src="https://s2.loli.net/2022/10/22/jM2wkymvznOZtS9.jpg" alt="å»‰ä»·j-link.jpg" style="zoom:50%;" /></p><p>åƒ<strong>STM32C8T6ã€openCRP</strong>ç­‰ç­‰å·²ç»ç»™å‡ºè¿™å››ä¸ªæ¥å£çš„æ¿å­ç›´æ¥æ¥ä¸Šå°±å¥½äº†</p><p><img src="https://s2.loli.net/2022/10/22/RGTbYQp9D8sUexm.jpg" alt="swdæ¥å£.jpg"></p><p>å¦‚æœæ˜¯20è„šæ ‡å‡†æ¥å£çš„è¯å¯¹ç…§ä¸Šé¢çš„å›¾ç‰‡æ‰¾åˆ°å¯¹åº”çš„å¼•è„šç›´æ¥æ¥ä¸Šå³å¯ã€‚</p><p><img src="https://s2.loli.net/2022/10/22/EMTGCtwVFrAia9I.jpg" alt="å»‰ä»·j-linkæ¥çº¿.jpg"></p><p>â€‹    å¦‚æœå®åœ¨æ‰¾ä¸åˆ°æ¥å£å‘¢ï¼Œç›´æ¥æŠŠ<strong>SWDIOã€SWCLK</strong>æ¥åœ¨<strong>PA13ã€PA14</strong>ï¼Œå†ä¾›ç”µå…±åœ°ä¹Ÿæ˜¯ä¸€æ ·å¯ä»¥æ­£å¸¸çƒ§å½•çš„ã€‚    </p><p>â€‹    ç»è¿‡æµ‹è¯•å‘¢ï¼Œå¯ä»¥æ­£å¸¸çƒ§å½•ï¼Œä½†æ˜¯ä¼š<strong>ä¾›ç”µä¸è¶³</strong>ã€‚å…¶ä¸­<strong>C8T6å’ŒopenCRP</strong>çš„<strong>5V</strong>å¼•è„šç”µå‹ä¸å¤Ÿï¼Œä¸è¿‡ç¨‹åºå€’æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œï¼›è€Œ<strong>MINI</strong>åˆ™æ˜¯ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œã€‚è¿™ä¸ªå…·ä½“æƒ…å†µè¿˜ä¸å„ä¸ªæ¿å­çš„PCBè®¾è®¡æœ‰å…³ã€‚ä¸€èˆ¬ä¿é™©èµ·è§çš„è¯ï¼Œéœ€è¦<strong>é¢å¤–ä¾›ç”µ</strong>ã€‚</p><h4 id="ST-link"><a href="#ST-link" class="headerlink" title="ST-link"></a>ST-link</h4><p>è¿™ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ä¸€æ¬¾ST-link</p><p><img src="https://s2.loli.net/2022/10/22/wQTMaopVhKlZq7g.jpg" alt="ST-link.jpg"></p><p>â€‹    å¦‚æœèƒ½ç›´æ¥ç”¨20è„šçš„æ¥å£å°±å¾ˆæ–¹ä¾¿ã€‚ä¸è¡Œçš„è¯ä¹Ÿå¯ä»¥ç›´æ¥å¯¹ç…§å‰é¢çš„å›¾ç‰‡æŠŠ<strong>SWD</strong>å¯¹åº”çš„å››æ ¹çº¿æ¥å‡ºæ¥ã€‚</p><p>â€‹    å’Œæ¿å­çš„æ¥çº¿æ–¹æ³•ä¸ä¹‹å‰éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><h4 id="è½¯ä»¶é…ç½®"><a href="#è½¯ä»¶é…ç½®" class="headerlink" title="è½¯ä»¶é…ç½®"></a>è½¯ä»¶é…ç½®</h4><p>è¿™é‡Œç”¨çš„æ˜¯<strong>MDK5</strong>æˆ–è€…å«<strong>Keil</strong></p><ol><li>é¦–å…ˆæ˜¯ç‚¹å¼€<strong>é­”æœ¯æ£’</strong>ï¼Œé€‰æ‹©å¯¹åº”çš„è°ƒè¯•å™¨<img src="https://s2.loli.net/2022/10/22/9botRpUDXFnAEqs.png" alt="config.png"></li><li>ç„¶åè¿›å…¥<strong>settings</strong>é€‰æ‹©çƒ§å½•æ–¹å¼å’Œçƒ§å½•é€Ÿåº¦<img src="https://s2.loli.net/2022/10/22/mxFHa8b52YNCoiJ.jpg" alt="config2.jpg"></li><li>ç„¶åå¯ä»¥æ£€æŸ¥ä¸€ä¸‹çƒ§å½•ç®—æ³•å’Œè‡ªå·±çš„èŠ¯ç‰‡å‹å·æ˜¯ä¸æ˜¯å¯¹åº”çš„ã€‚<img src="https://s2.loli.net/2022/10/22/1xEaqv8ANcwoJsX.jpg" alt="config3.jpg"></li><li>æœ€åç‚¹å‡»<strong>load</strong>æŒ‰é’®å°±å¯ä»¥çƒ§å½•äº†ã€‚</li></ol><h3 id="ISPçƒ§å½•"><a href="#ISPçƒ§å½•" class="headerlink" title="ISPçƒ§å½•"></a>ISPçƒ§å½•</h3>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSä¸²å£é€šè®¯</title>
      <link href="/2022/08/29/ROS-USART-STM32/"/>
      <url>/2022/08/29/ROS-USART-STM32/</url>
      
        <content type="html"><![CDATA[<p>â€‹    ç®€å•è®°å½•äº†å°è¯•ä½¿ç”¨ROSä¸STM32é€šè®¯çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬è¸©çš„ä¸€ç‚¹å‘ï¼Œå…¶ä¸­ä¸€äº›ä½çº§é—®é¢˜å®åœ¨æ˜¯æœ‰ç‚¹è®©äººå“­ç¬‘ä¸å¾—ğŸ˜‚</p><span id="more"></span><h1 id="ROSä¸²å£é€šè®¯"><a href="#ROSä¸²å£é€šè®¯" class="headerlink" title="ROSä¸²å£é€šè®¯"></a>ROSä¸²å£é€šè®¯</h1><h2 id="ROSä¸²å£é€šè®¯é…ç½®"><a href="#ROSä¸²å£é€šè®¯é…ç½®" class="headerlink" title="ROSä¸²å£é€šè®¯é…ç½®"></a>ROSä¸²å£é€šè®¯é…ç½®</h2><h3 id="Ubuntu20-04æ‰‹åŠ¨è·å–SerialåŒ…"><a href="#Ubuntu20-04æ‰‹åŠ¨è·å–SerialåŒ…" class="headerlink" title="Ubuntu20.04æ‰‹åŠ¨è·å–SerialåŒ…"></a>Ubuntu20.04æ‰‹åŠ¨è·å–SerialåŒ…</h3><h3 id="linux-ros-ä¸²å£æƒé™è·å–"><a href="#linux-ros-ä¸²å£æƒé™è·å–" class="headerlink" title="linux/ros ä¸²å£æƒé™è·å–"></a>linux/ros ä¸²å£æƒé™è·å–</h3><p>è½¬è½½è‡ª<a href="https://blog.csdn.net/qq_16775293/article/details/82822851?utm_medium=distribute.wap_relevant.none-task-blog-2~default~baidujs_title~default-0-82822851-blog-55259778.wap_relevant_multi_platform_whitelistv1&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=1">(9æ¡æ¶ˆæ¯) Linux/ROSâ€”â€”è·å–ä¸²å£æƒé™_ä¸æ‡‚éŸ³ä¹çš„æ¬£èµè€…çš„åšå®¢-CSDNåšå®¢</a></p><p>æˆ‘è¿™é‡Œçš„ä¸²å£å·æ˜¯<strong>/dev/ttyTHS1</strong>ï¼Œéœ€è¦é€‚å½“å˜åŠ¨</p><h4 id="æ°¸ä¹…è§£å†³ä¸²å£æƒé™é—®é¢˜"><a href="#æ°¸ä¹…è§£å†³ä¸²å£æƒé™é—®é¢˜" class="headerlink" title="æ°¸ä¹…è§£å†³ä¸²å£æƒé™é—®é¢˜"></a>æ°¸ä¹…è§£å†³ä¸²å£æƒé™é—®é¢˜</h4><p>ï¼ˆæˆ‘è¯•äº†ä¸€ä¸‹ï¼Œä½†æ˜¯å¤±è´¥äº†ï¼‰</p><p>åˆ›å»ºttyUSBæƒé™è§„åˆ™æ–‡ä»¶etc/udev/rules.d/70-ttyUSB.rules</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim -p /etc/udev/rules.d/70-ttyUSB.rules</span><br></pre></td></tr></table></figure><p>åœ¨<strong>70-ttyUSB.rules</strong>æ–‡ä»¶ä¸­å†™å…¥ä¸‹åˆ—ä»£ç </p><p>KERNEL==â€ttyUSB*â€, OWNER=â€rootâ€, GROUP=â€rootâ€, MODE=â€0666â€<br>ä¿å­˜å³å¯,é‡å¯æˆ–æ³¨é”€ç”¨æˆ·åœ¨ç™»å½•åç”Ÿæ•ˆ</p><h4 id="ä¸´æ—¶è·å–ä¸²å£æƒé™"><a href="#ä¸´æ—¶è·å–ä¸²å£æƒé™" class="headerlink" title="ä¸´æ—¶è·å–ä¸²å£æƒé™"></a>ä¸´æ—¶è·å–ä¸²å£æƒé™</h4><p>å…ˆæŸ¥çœ‹æ’å…¥ç”µè„‘çš„<strong>ä¸²å£å·</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /dev/ | grep ttyUSB</span><br></pre></td></tr></table></figure><p>çŸ¥é“ä¸²å£å·ä¹‹åå¯¹æŒ‡å®šä¸²å£èµ‹äºˆæƒé™,ä»¥<strong>ttyUSB0</strong>ä¸ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod a+rw /dev/ttyUSB0</span><br></pre></td></tr></table></figure><p>ä¸ç”¨é‡å¯å³å¯ç”Ÿæ•ˆ</p><h3 id="ä»£ç ç¼–å†™é—®é¢˜"><a href="#ä»£ç ç¼–å†™é—®é¢˜" class="headerlink" title="ä»£ç ç¼–å†™é—®é¢˜"></a>ä»£ç ç¼–å†™é—®é¢˜</h3><h2 id="Jetson-nanoä¸STM32é€šè®¯"><a href="#Jetson-nanoä¸STM32é€šè®¯" class="headerlink" title="Jetson nanoä¸STM32é€šè®¯"></a>Jetson nanoä¸STM32é€šè®¯</h2><h3 id="jetson-nanoä¸²å£"><a href="#jetson-nanoä¸²å£" class="headerlink" title="jetson nanoä¸²å£"></a>jetson nanoä¸²å£</h3><p>å¼•è„šå›¾ï¼Œç›´æ¥è¿å³å¯ã€‚</p><p><img src="https://s2.loli.net/2022/10/22/x8melhw2bcjAgqV.jpg" alt="nano_usart.jpg"></p><h3 id="ROSä¸32ä¸²å£é€šè®¯ï¼ˆROSç«¯ï¼‰åªèƒ½æ¥æ”¶ä¸èƒ½å‘é€"><a href="#ROSä¸32ä¸²å£é€šè®¯ï¼ˆROSç«¯ï¼‰åªèƒ½æ¥æ”¶ä¸èƒ½å‘é€" class="headerlink" title="ROSä¸32ä¸²å£é€šè®¯ï¼ˆROSç«¯ï¼‰åªèƒ½æ¥æ”¶ä¸èƒ½å‘é€"></a>ROSä¸32ä¸²å£é€šè®¯ï¼ˆROSç«¯ï¼‰åªèƒ½æ¥æ”¶ä¸èƒ½å‘é€</h3><p>â€‹    è¢«è¿™ä¸ªé—®é¢˜å¡äº†å¾ˆä¹…ã€‚æ ¹æ®æƒ…å†µæè¿°ï¼Œæ—¢ç„¶éƒ½èƒ½æ­£å¸¸æ¥æ”¶äº†ä¸ºä»€ä¹ˆå‘é€ä¼šå¤±è´¥å‘¢ï¼Ÿ</p><h4 id="ROSç«¯"><a href="#ROSç«¯" class="headerlink" title="ROSç«¯"></a>ROSç«¯</h4><p>â€‹    åœ¨ROSç«¯ä¸²å£è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²æ‰€ç”¨åˆ°çš„å‡½æ•°æ˜¯<strong>ser.writeï¼ˆstring valueï¼‰</strong>ï¼Œåœ¨å®šæ—¶å™¨çš„å›è°ƒå‡½æ•°é‡Œé¢åŒæ—¶è°ƒç”¨ã€‚é¦–å…ˆå°±æ˜¯æ£€æŸ¥å®šæ—¶å™¨å›è°ƒå‡½æ•°æ˜¯å¦è¢«æˆåŠŸè°ƒç”¨ï¼Œè¯»å–æ•°æ®å’Œå‘é€æ•°æ®éƒ½æ˜¯åœ¨è¿™ä¸ªå›è°ƒå‡½æ•°é‡Œè°ƒç”¨çš„ï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šæ˜¯æ²¡é—®é¢˜çš„ï¼Œ<strong>ROS_INFO</strong>ä¸€ä¸‹ç¡®å®æ²¡é—®é¢˜ã€‚åŒç†<strong>SendMsgs( )</strong>ä¸€æ ·æˆåŠŸè°ƒç”¨äº†ã€‚é‚£è‡³å°‘èƒ½è‚¯å®šï¼Œ<strong>write( )</strong>å‡½æ•°è‚¯å®šè¢«è°ƒç”¨äº†å‘€ã€‚</p><p>â€‹    ä¸­é—´è¿˜å‡ºäº†ä¸€ç‚¹å²”å­ï¼Œå°±æ˜¯ä»£ç ä¸­ä¸å°å¿ƒæ‰“ä¸Šäº†ä¸€ç‚¹ä¹±ç ï¼Œç»“æœç¼–è¯‘å‡ºé—®é¢˜ã€‚ä½†æ˜¯ç¼–è¯‘æ—¥å¿—ä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œæˆ‘è™½ç„¶çœ‹ç€å’ŒåŸæ¥çš„ä¸ä¸€æ ·ï¼Œä½†æ˜¯æ²¡æœ‰å¤ªåœ¨æ„ã€‚ä½†æ˜¯è¿™å°±å¯¼è‡´äº†ä¹‹å‰æ”¹å®Œä»£ç åå¥½å‡ æ¬¡ç¼–è¯‘éƒ½æ˜¯ä¸é€šè¿‡çš„ï¼Œä¸€ç›´è¿è¡Œçš„ä¹Ÿæ˜¯é‚£ä¸ªæœ‰é—®é¢˜çš„èŠ‚ç‚¹ä»£ç ã€‚æ‰€ä»¥å¦‚æœç¼–è¯‘æ—¥å¿—åŒå¹³æ—¶æ¯”è¾ƒä¸ºåå¸¸ï¼Œè¦å½“å¿ƒä¸€ä¸‹ã€‚</p><p>â€‹    æ¥ä¸‹æ¥å°†<strong>nano</strong>çš„<strong>TXï¼ŒRX</strong>çŸ­æ¥ï¼Œåˆ¤æ–­åˆ°åº•æ˜¯ä¸æ˜¯nanoç«¯çš„é—®é¢˜ã€‚å‘ç°ç¡®å®èƒ½è‡ªå·±æ¥æ”¶åˆ°è‡ªå·±çš„æ¶ˆæ¯ï¼Œé‚£å°±æ²¡é—®é¢˜äº†</p><p>â€‹    nanoç«¯æ²¡é—®é¢˜äº†ï¼Œä¼°è®¡å°±æ˜¯32ç«¯çš„é—®é¢˜äº†ã€‚rosåªèƒ½æ¥å—ä¸èƒ½å‘é€ï¼Œæ˜¯ä¸æ˜¯<strong>rx</strong>æ¥å¯¹äº†ä½†<strong>tx</strong>æ¥é”™äº†å‘¢ï¼Ÿ</p><blockquote><p>nano 8ï¼šTXâ€”â€”RXï¼šstm32 PA10</p><p>nano 10: RXâ€”â€”TXï¼šstm32 PA9</p></blockquote><p>å†æ£€éªŒä¸€éç€å®æ— è¯¯ã€‚</p><h4 id="32ç«¯"><a href="#32ç«¯" class="headerlink" title="32ç«¯"></a>32ç«¯</h4><p>â€‹    32ç«¯æ²¡æœ‰å†é…ç½®ä¸€ä¸ªä¸²å£ï¼Œä½¿ç”¨<strong>oledå±</strong>DEBUGï¼Œnanoç«¯ä½¿ç”¨cutecomé€šè®¯æ­£å¸¸ï¼Œ32èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œæ¢æˆroså‘æ¶ˆæ¯å32å´æ˜¯ä¸€ç‚¹ååº”éƒ½æ²¡æœ‰ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±æƒ³åˆ°çœ‹çœ‹<strong>ä¸²å£ä¸­æ–­å‡½æ•°</strong>åˆ°åº•æœ‰æ²¡æœ‰è¢«è°ƒç”¨ï¼Œ32åˆ°åº•æœ‰æ²¡æœ‰æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚æˆ‘åœ¨è¯¥å‡½æ•°é‡Œé¢åŠ äº†äº›è¯­å¥ï¼šå¦‚æœä¸²å£ä¸­æ–­å‡½æ•°è¢«è°ƒç”¨çš„è¯oledå°±ä¼šæ˜¾ç¤ºã€‚</p><p>â€‹    é‚£ç»“æœæ˜¯æ²¡æœ‰ååº”ã€‚</p><p>â€‹    å®é™…ä¸Šæ§åˆ¶oledæ˜¾ç¤ºçš„æ—¶å€™è¾“å®Œå†…å®¹ï¼Œè¦åŠ ä¸ª<strong>refresh</strong>ã€‚åŒæ—¶<strong>while( )</strong>é‡Œåœ¨ä¸æ–­<strong>Set_Z( )</strong>,é‡Œé¢ä¹Ÿä¼šä¸æ–­æ›´æ–°å†…å®¹ç„¶årefreshï¼Œæ‰€ä»¥å…¶å®ä¸²å£ä¸­æ–­æ˜¯è¢«è°ƒç”¨äº†çš„ï¼Œä½†åœ¨è¿™æ ·çš„æƒ…å†µä¸‹çœ‹ä¸åˆ°ååº”ã€‚æœ€åæ˜¯ä½¿ç”¨keilçš„<strong>åœ¨çº¿è°ƒè¯•åŠŸèƒ½</strong>è®¾ç½®<strong>æ–­ç‚¹</strong>å‘ç°çš„ï¼Œå…¶å®è°ƒç”¨äº†ã€‚è¿™ä¸ªæ—¶å€™å†çœ‹ä¸€ä¸‹å‡½æ•°å…³äºæ¥æ”¶åˆ°çš„æ¶ˆæ¯çš„è¿‡æ»¤ï¼Œå…¶å®æ­£ç‚¹åŸå­ä¹Ÿè¯´è¿‡â€”â€”<strong>å‘é€æ–°è¡Œ</strong>ã€‚cutecomä¼šï¼Œä½†rosä¸ä¼šã€‚æœ€ç»ˆåœ¨è¦å‘é€çš„å­—ç¬¦ä¸²åé¢åŠ ä¸Š<strong>\r\n</strong>ï¼ŒDEBUGç»“æŸã€‚</p><h4 id="å°æ€»ç»“"><a href="#å°æ€»ç»“" class="headerlink" title="å°æ€»ç»“"></a>å°æ€»ç»“</h4><ul><li>å‡½æ•°è°ƒç”¨å› oledé”™è¯¯ä½¿ç”¨æ£€æŸ¥å¤±è´¥ã€‚</li><li>ä¸ä¼šä½¿ç”¨Jlinkåœ¨çº¿è°ƒè¯•</li><li>å¿½è§†äº†roså’Œcutecomç»†èŠ‚ä¸Šçš„è¾“å‡ºå·®å¼‚ã€‚</li></ul><p>å¦‚æœè¿™ä¸‰ç‚¹æœ‰ä¸€ç‚¹ä¸å‡ºé—®é¢˜çš„è¯ï¼Œæˆ–è®¸éƒ½èƒ½å¤Ÿæ—©äº›æ‰¾åˆ°ï¼Œé”™è¯¯ã€‚åœ¨æ­¤éå¸¸æ„Ÿè°¢å¸ˆå…„çš„æŒ‡ç‚¹ï¼</p><h2 id="LattePandaä¸å…¶Arduinoé€šè®¯"><a href="#LattePandaä¸å…¶Arduinoé€šè®¯" class="headerlink" title="LattePandaä¸å…¶Arduinoé€šè®¯"></a>LattePandaä¸å…¶Arduinoé€šè®¯</h2><p>æœ¬æ¥æ‰“ç®—ä½¿ç”¨stm32è¿›è¡Œä¸‹æ¸¸è®¾å¤‡çš„æ§åˆ¶ï¼Œä½†æ˜¯å‘ç°LattePandaé›†æˆäº†ä¸€å—<strong>arduino</strong>ï¼Œä¸å¥½å¥½åˆ©ç”¨ä¸€ä¸‹å®åœ¨æ˜¯å¤ªå¯æƒœäº†ã€‚</p><h3 id="Arduino-IDEå®‰è£…"><a href="#Arduino-IDEå®‰è£…" class="headerlink" title="Arduino IDEå®‰è£…"></a>Arduino IDEå®‰è£…</h3><p>â€‹    åœ¨å®˜ç½‘<a href="https://www.arduino.cc/en/software">Software | Arduino</a>ä¸‹è½½Linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚å¯æ˜¯ä¸‹è½½<strong>2.0.0</strong>ç‰ˆæœ¬çš„ä¼šæ˜¾ç¤º<em>æ²¡æœ‰å¯æ‰§è¡Œçš„è½¯ä»¶</em>ï¼Œæ‰€ä»¥æœ€åé€‰æ‹©äº†<strong>1.8.19</strong>ã€‚lattepandaå¯¹åº”çš„ç‰ˆæœ¬æ˜¯<strong>linux 64 bits</strong></p><p>åœ¨å®‰è£…ç›®å½•å¾—åˆ°äº†<strong>.tar.xz</strong>æ–‡ä»¶ï¼Œè¿è¡Œè§£å‹å‘½ä»¤</p><p><code>tar -xvf arduino-1.8.19-linux64.tar.xz</code></p><p>è¿›å…¥è§£å‹å¾—åˆ°çš„å®‰è£…ç›®å½•ï¼Œè¿è¡Œå®‰è£…è„šæœ¬ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd arduino-1.8.19/</span><br><span class="line">sudo ./install.sh</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿”å› <em>done!</em> åå®‰è£…æˆåŠŸ</p><h3 id="è¿æ¥é…ç½®"><a href="#è¿æ¥é…ç½®" class="headerlink" title="è¿æ¥é…ç½®"></a>è¿æ¥é…ç½®</h3><p>â€‹    å¹³æ—¶ç”¨ç”µè„‘ç»™arduinoçƒ§å½•ç¨‹åºéœ€è¦ç”¨ä¸€æ ¹æ•°æ®çº¿å°†äºŒè€…è¿æ¥èµ·æ¥ã€‚é‚£åœ¨lattepandaä¸Šå°±ç›¸å½“äºæŠŠè¿™ä¸ªæ•°æ®çº¿åœ¨æ¿å­ä¸Šç”»å¥½äº†ï¼Œå†æŠŠç”µè„‘å’Œarduinoç²˜ä¸€å—å„¿</p><p>â€‹    è¿™ä¸ªæ•°æ®çº¿å¯¹åº”çš„ä¸²å£å·æ˜¯<strong>/dev/ttyACM0</strong>ï¼›</p><p>â€‹    å¯¹åº”çš„èŠ¯ç‰‡å‹å·æ˜¯<strong>ATmega32u4</strong>ï¼Œè¿™åœ¨IDEé‡Œé¢æ‰¾ä¸åˆ°ï¼Œå®é™…ä¸Šä¹Ÿå«<strong>Arduino Leonardo</strong></p><p>â€‹    ä¹‹åå°±å¯ä»¥çƒ§ç¨‹åºå’Œé€šè®¯äº†ã€‚</p><h3 id="ç§»æ¤ROSåŒ…æ—¶é‡åˆ°çš„ä¸€ç‚¹å°é—®é¢˜"><a href="#ç§»æ¤ROSåŒ…æ—¶é‡åˆ°çš„ä¸€ç‚¹å°é—®é¢˜" class="headerlink" title="ç§»æ¤ROSåŒ…æ—¶é‡åˆ°çš„ä¸€ç‚¹å°é—®é¢˜"></a>ç§»æ¤ROSåŒ…æ—¶é‡åˆ°çš„ä¸€ç‚¹å°é—®é¢˜</h3>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> USART </tag>
            
            <tag> ROS </tag>
            
            <tag> Arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/08/16/hello-world/"/>
      <url>/2022/08/16/hello-world/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="0858d2d5afc6e71fe61fde17e264b0ebd81b693504324bd451d5b9fe60576581">fa8b13601bdfbf35c816c536e1c943768052b894c07bef87cfe638eadf1a44fb1aca374ccee2eb92dae6b7862d437c4511b8689b401f36543ccb6ab66f72bf0286c6c052ef4e8c7a2ec491afed06f89a2c56b4c8675715f28bfe32cab7840fb26ae21f1cfad9201fc4ca976f5aa9b30b29f1d26800d88d671ada94dcd875d8b3edda1090b2911a1d9b0f465c5e9f8328c5cd48549be6f19403414d9688c6d62003ad856535e633eae2402819f2e0fc0bdf8686ed677e35bdac33f324558f92229db3f692da7bbac0d4cc6fe244237d3881e12c8f3413ef4e51a472e769d89c70bc4a1ae26a03a319d5b01811e30f63ee79c12b32110cdd2101b75c6de84c17f3be550357902045bf9f10615e4aa9f55c8e71d966ce60f9fed9ad627e1df8514777352c0054f33ed102972e4ca63e300ef09e350027436e85314696b7144fe22e8d4b9320a5ce45aca7f544bcbc99e60530d266d9835f87a6a0a07336f75ef08cbadda7e5b4d92dddf83aaaa1a2db7037efdfa3794b1b40d607fee759f6446124297bf0b0c1433f8089cf9f6bc53d63df6a398686aa826d1d784a5fe38e2b7abed2152e574dbd2a77b8f9bb28c18d34ee1915d33fd7092d81ef13ff30ae5ae174f042c7e083e83964e19562840a378af0c06d5ad47b8a740819d946e83b76d9e47e3b976708c03d087cb82be880643e23d138db94b4a4e7d64d0c03e5433d0dc7a95ccf86b3d1c11381f28a78d145297c943ae497edf7127d4a67bbaae900cd1f4b7237f62636f0080b07800702fd6023bb364450f4213fcbb06015f72d601d721e0fa5f9c65feefbddc6986cf86149c7018c45458bb7d201e63e3d475e9ee2c9643f0e36d3ba5b280f9d915ad8b88a5461af0a4e3a964d3fa4120340b848e62dd1682f6064e325d4abfef05e5b588920474cf8bf5da166c9d2f26a3177670d695aeba543ff6d4970a1cff53bb98490c6e1d7bf50eeb810306cd1919e2766e26ee66828b12168bc41b6fd3c6adb22cac57352a6b18a6dc68cca53ef0749db2b13480543a929b5e1a1439f22b7fe7b367c7088e3a6b9b3fbed26b1590eb01b493c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">ä¸¾æ¯é‚€æ˜æœˆï¼Œå¯¹å½±æˆä¸‰äººã€‚</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
