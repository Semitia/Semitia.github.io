<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>test | Semitia-Blog</title><meta name="author" content="Semitia"><meta name="copyright" content="Semitia"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="åšå®¢å‡ºäº†ä¸€ç‚¹é—®é¢˜ï¼Œæ­¤ç¯‡ä»…ä½œæµ‹è¯•ã€‚ ç¯‡å¹…æµ‹è¯•ä¸€ç¯‡ä»‹ç»çš„å¾ˆè¯¦ç»†çš„æ–‡ç« ï¼šä¸€æ–‡çœ‹æ‡‚I2Cåè®® - çŸ¥ä¹ (zhihu.com) è¿™é‡Œé™„ä¸Šè¾ƒä¸ºæƒå¨çš„æ–‡ä»¶é“¾æ¥  https:&#x2F;&#x2F;semitia.top&#x2F;upload_flies&#x2F;TI_I2C_slva704.pdf https:&#x2F;&#x2F;semitia.top&#x2F;upload_flies&#x2F;NXP_I2C_UM10204.pdf https:&#x2F;&#x2F;semitia.top&#x2F;">
<meta property="og:type" content="article">
<meta property="og:title" content="test">
<meta property="og:url" content="http://example.com/2022/11/01/test/index.html">
<meta property="og:site_name" content="Semitia-Blog">
<meta property="og:description" content="åšå®¢å‡ºäº†ä¸€ç‚¹é—®é¢˜ï¼Œæ­¤ç¯‡ä»…ä½œæµ‹è¯•ã€‚ ç¯‡å¹…æµ‹è¯•ä¸€ç¯‡ä»‹ç»çš„å¾ˆè¯¦ç»†çš„æ–‡ç« ï¼šä¸€æ–‡çœ‹æ‡‚I2Cåè®® - çŸ¥ä¹ (zhihu.com) è¿™é‡Œé™„ä¸Šè¾ƒä¸ºæƒå¨çš„æ–‡ä»¶é“¾æ¥  https:&#x2F;&#x2F;semitia.top&#x2F;upload_flies&#x2F;TI_I2C_slva704.pdf https:&#x2F;&#x2F;semitia.top&#x2F;upload_flies&#x2F;NXP_I2C_UM10204.pdf https:&#x2F;&#x2F;semitia.top&#x2F;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2022/08/15/3gh8feXsdYWMT2a.jpg">
<meta property="article:published_time" content="2022-11-01T04:24:36.000Z">
<meta property="article:modified_time" content="2022-11-05T09:46:32.032Z">
<meta property="article:author" content="Semitia">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/08/15/3gh8feXsdYWMT2a.jpg"><link rel="shortcut icon" href="https://s2.loli.net/2022/08/15/ibSydGxMB9rYvAu.png"><link rel="canonical" href="http://example.com/2022/11/01/test/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Semitia","link":"Link: ","source":"Source: Semitia-Blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'test',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-05 17:46:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-clock/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2022/08/15/ibSydGxMB9rYvAu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2022/08/15/3gh8feXsdYWMT2a.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Semitia-Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">test</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-11-01T04:24:36.000Z" title="Created 2022-11-01 12:24:36">2022-11-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-11-05T09:46:32.032Z" title="Updated 2022-11-05 17:46:32">2022-11-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>8min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="test"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>åšå®¢å‡ºäº†ä¸€ç‚¹é—®é¢˜ï¼Œæ­¤ç¯‡ä»…ä½œæµ‹è¯•ã€‚</p>
<h1 id="ç¯‡å¹…æµ‹è¯•"><a href="#ç¯‡å¹…æµ‹è¯•" class="headerlink" title="ç¯‡å¹…æµ‹è¯•"></a>ç¯‡å¹…æµ‹è¯•</h1><p>ä¸€ç¯‡ä»‹ç»çš„å¾ˆè¯¦ç»†çš„æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/362287272">ä¸€æ–‡çœ‹æ‡‚I2Cåè®® - çŸ¥ä¹ (zhihu.com)</a></p>
<p>è¿™é‡Œé™„ä¸Šè¾ƒä¸ºæƒå¨çš„æ–‡ä»¶é“¾æ¥</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://semitia.top/upload_flies/TI_I2C_slva704.pdf">https://semitia.top/upload_flies/TI_I2C_slva704.pdf</a></li>
<li><a target="_blank" rel="noopener" href="https://semitia.top/upload_flies/NXP_I2C_UM10204.pdf">https://semitia.top/upload_flies/NXP_I2C_UM10204.pdf</a></li>
<li><a target="_blank" rel="noopener" href="https://semitia.top/upload_flies/ZLG_I2C.pdf">https://semitia.top/upload_flies/ZLG_I2C.pdf</a></li>
</ul>
<p>æ­¤ç¯‡ç¬”è®°åˆ™æ˜¯ç»“åˆ<strong>ã€ŠTI_I2C_slva704ã€‹</strong>å’Œ<strong>ä»£ç </strong>ç®€å•è®°å½•ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚</p>
<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>â€‹    <strong>IIC</strong>ä½¿ç”¨ä¸¤ä¸ªæ¥å£<strong>(SCLå’ŒSDA)</strong>è¿›è¡Œ<strong>åŠåŒå·¥é€šä¿¡</strong>ã€‚åˆ†ä¸º<strong>ä¸»æœºï¼ˆMaster)</strong>å’Œ<strong>ä»æœºï¼ˆSlave deviceï¼‰</strong>ï¼Œæ¯ä¸ªè®¾å¤‡æœ‰è‡ªå·±ç‰¹å®šçš„<strong>åœ°å€</strong>ï¼Œä¸€ä¸ªè®¾å¤‡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¯„å­˜å™¨å‚¨å­˜æ•°æ®ï¼Œä¸»æœºé€šè¿‡IICæ€»çº¿å¯¹è®¾å¤‡åŠå…¶å¯„å­˜å™¨è¿›è¡Œè¯»å†™å’Œé…ç½®ã€‚</p>
<h2 id="ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹"><a href="#ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹" class="headerlink" title="ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹"></a>ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹</h2><h3 id="å‘é€æ•°æ®ï¼š"><a href="#å‘é€æ•°æ®ï¼š" class="headerlink" title="å‘é€æ•°æ®ï¼š"></a>å‘é€æ•°æ®ï¼š</h3><ol>
<li>ä¸»æœºå‘é€<strong>START</strong>ä¿¡å·å’Œ<strong>è®¾å¤‡åœ°å€</strong>æ¥æŒ‡å®šä¸€ä¸ªè®¾å¤‡</li>
<li>ä¸»æœºå‘é€æ•°æ®</li>
<li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·</li>
</ol>
<h3 id="æ¥æ”¶æ•°æ®ï¼š"><a href="#æ¥æ”¶æ•°æ®ï¼š" class="headerlink" title="æ¥æ”¶æ•°æ®ï¼š"></a>æ¥æ”¶æ•°æ®ï¼š</h3><ol>
<li>ä¸»æœºå‘é€<strong>START</strong>ä¿¡å·å’Œ<strong>è®¾å¤‡åœ°å€</strong>æ¥æŒ‡å®šä¸€ä¸ªè®¾å¤‡</li>
<li>ä¸»æœºæŒ‡å®šè¦è¯»å–çš„<strong>å¯„å­˜å™¨</strong></li>
<li>ä¸»æœºè¯»å–æ•°æ®</li>
<li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·</li>
</ol>
<h2 id="STARTå’ŒSTOPä¿¡å·"><a href="#STARTå’ŒSTOPä¿¡å·" class="headerlink" title="STARTå’ŒSTOPä¿¡å·"></a>STARTå’ŒSTOPä¿¡å·</h2><ul>
<li><strong>STATRT</strong>ï¼šåœ¨<strong>SCL</strong>æ‹‰é«˜çš„æƒ…å†µä¸‹ï¼Œ<strong>SDA</strong>ç”µå¹³ç”±é«˜å˜ä½ï¼Œå³<strong>ä¸‹é™æ²¿</strong></li>
<li><strong>STOP</strong>ï¼šåœ¨<strong>SCL</strong>æ‹‰é«˜çš„æƒ…å†µä¸‹ï¼Œ<strong>SDA</strong>ç”µå¹³ç”±ä½å˜é«˜ï¼Œå³<strong>ä¸Šå‡æ²¿</strong></li>
</ul>
<p><img src="https://s2.loli.net/2022/11/02/Rkjp2zrVq8NGIy9.png" alt="IIC_1.png"></p>
<h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><h4 id="START"><a href="#START" class="headerlink" title="START"></a>START</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">IIC_Start</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	SDA_OUT();     </span><br><span class="line">	IIC_SDA=<span class="number">1</span>;	  	  </span><br><span class="line">	IIC_SCL=<span class="number">1</span>;</span><br><span class="line">	delay_us(<span class="number">4</span>);</span><br><span class="line">	IIC_SDA=<span class="number">0</span>;</span><br><span class="line">	delay_us(<span class="number">4</span>);</span><br><span class="line">	IIC_SCL=<span class="number">0</span>;</span><br><span class="line">&#125;	  </span><br></pre></td></tr></table></figure>
<ul>
<li><code>SDA_OUT();</code>ï¼šå°†<strong>SDA</strong>ç«¯å£è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼ï¼›åœ¨åˆ‡æ¢è¯»å†™çŠ¶æ€çš„æ—¶å€™ï¼Œä¹Ÿè¦ä¿®æ”¹IOå£é…ç½®</li>
<li><code>IIC_SCL=0;</code>ï¼šIICæ€»çº¿æ¥ä¸Šæ‹‰ç”µé˜»ï¼Œæ•…é»˜è®¤<strong>é«˜ç”µå¹³</strong>çŠ¶æ€ä¸º<strong>æ€»çº¿ç©ºé—²</strong>çŠ¶æ€ï¼›ä¸»æœºæ¥ä¸‹æ¥è¦å‘é€æŒ‡ä»¤ï¼Œæ‰€ä»¥è¦æ‹‰ä½ç”µå¹³ï¼Œä¸»æœºæ§åˆ¶ä½æ€»çº¿ã€‚</li>
</ul>
<h4 id="STOP"><a href="#STOP" class="headerlink" title="STOP"></a>STOP</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">IIC_Stop</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	SDA_OUT();<span class="comment">//sdaÃÃŸÃŠÃ¤Â³Ã¶</span></span><br><span class="line">	IIC_SCL=<span class="number">0</span>;</span><br><span class="line">	IIC_SDA=<span class="number">0</span>;<span class="comment">//STOP:when CLK is high DATA change form low to high</span></span><br><span class="line">	delay_us(<span class="number">4</span>);</span><br><span class="line">	IIC_SCL=<span class="number">1</span>; </span><br><span class="line">	IIC_SDA=<span class="number">1</span>;<span class="comment">//Â·Â¢Ã‹ÃI2CÃ—ÃœÃÃŸÂ½Ã¡ÃŠÃ¸ÃÃ…ÂºÃ…</span></span><br><span class="line">	delay_us(<span class="number">4</span>);							   	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ACK-NACK-æœ‰æ— åº”ç­”"><a href="#ACK-NACK-æœ‰æ— åº”ç­”" class="headerlink" title="ACK/NACK æœ‰æ— åº”ç­”"></a>ACK/NACK æœ‰æ— åº”ç­”</h2><p>â€‹    åœ¨å®Œæˆä¸€ä¸ªå­—èŠ‚çš„ä¿¡æ¯ä¼ è¾“åï¼Œ<strong>æ¥æ”¶æ–¹</strong>å¯ä»¥å‘é€<strong>ACK</strong>ä»¥å‘ŠçŸ¥å‘é€æ–¹æ•°æ®è¢«æˆåŠŸæ¥æ”¶ï¼›ä¹Ÿå¯ä»¥é€‰æ‹©ä¸å‘é€ã€‚åœ¨æ¥æ”¶æ–¹å‘é€ACKä¹‹å‰ï¼Œå‘é€æ–¹å¿…é¡»é‡Šæ”¾SDAçº¿ï¼›æ¥æ”¶æ–¹<strong>æ‹‰ä½SDA</strong>ä»¥å‘é€ACKã€‚</p>
<p>â€‹    å€˜è‹¥åœ¨ACKä½SDAä»ç„¶ä¸ºé«˜ç”µä½ï¼Œåˆ™è®¤ä¸ºæ˜¯<strong>NACKâ€”â€”æ— åº”ç­”</strong>ï¼Œæ— åº”ç­”çš„ä¸€äº›æƒ…å†µï¼š</p>
<ul>
<li>æ¥æ”¶æ–¹æ²¡æœ‰åšå¥½æ¥æ”¶çš„å‡†å¤‡</li>
<li>æ¥æ”¶æ–¹æ— æ³•ç†è§£æ¥æ”¶åˆ°çš„æ•°æ®</li>
<li>æ¥æ”¶æ–¹æ— æ³•å†æ¥æ”¶æ›´å¤šæ•°æ®</li>
<li>ä¸»æœºä½œä¸ºæ¥æ”¶æ–¹å®Œæˆäº†æ•°æ®æ¥æ”¶</li>
</ul>
<p>â€‹    åœ¨è¿™æ ·çš„è§„å®šä¸‹ï¼Œå¦‚æœå‡ºç°äº†ä¸»æœºæ•°æ®æ¥æ”¶å¤±è´¥çš„æƒ…å†µçš„è¯è¯¥å¦‚ä½•åˆ¤å®šå‘¢ï¼Ÿæ˜¯ä¸æ˜¯å†²çªäº†å‘¢ï¼Ÿæˆ–è®¸ä¸»æœºå¯ä»¥é€šè¿‡ç¼–ç¨‹åˆ¤å®šæ¥å—å¤±è´¥ï¼Œè¿›è€Œé€‰æ‹©æ˜¯å¦é‡æ–°è¯·æ±‚æ•°æ®ã€‚</p>
<p><img src="https://s2.loli.net/2022/11/02/4eo2YpZhjNr7V5s.png" alt="IIC_2.png"></p>
<h2 id="WRITEå†™æ“ä½œ"><a href="#WRITEå†™æ“ä½œ" class="headerlink" title="WRITEå†™æ“ä½œ"></a>WRITEå†™æ“ä½œ</h2><ul>
<li><p>æ•°æ®ä¼ è¾“ä»¥<strong>ä¸€ä¸ªå­—(8bits)</strong>èŠ‚ä¸ºå•ä½ï¼Œæœ€å…ˆå‘é€<strong>MSB</strong>ï¼›</p>
</li>
<li><p>åœ¨<strong>STOPå’ŒSTART</strong>ä¿¡å·å¤–éœ€ä¿è¯<strong>SDA</strong>åªåœ¨<strong>SCL</strong>ä¸º<strong>ä½ç”µå¹³</strong>æ—¶å‘ç”Ÿè·³å˜ï¼›<strong>SCLé«˜</strong>æ—¶ä¿è¯<strong>SDA</strong>ç¨³å®šä»¥è¯»å–æ•°æ®ã€‚</p>
</li>
</ul>
<p>æ³¨ï¼š</p>
<p><strong>MSB &amp; LSB</strong>ï¼š</p>
<blockquote>
<p>MSB stands for most significant bit, while LSB is least significant bit. In binary terms, the MSB is the bit that has the greatest effect on the number, and it is the left-most bit. For example, for a binary number 0011 0101, the Most Significant 4 bits would be 0011. The Least Significant 4 bits would be 0101.</p>
</blockquote>
<h3 id="åè®®æµç¨‹"><a href="#åè®®æµç¨‹" class="headerlink" title="åè®®æµç¨‹"></a>åè®®æµç¨‹</h3><ol>
<li>ä¸»æœºå‘é€<strong>START</strong>ä¿¡å·</li>
<li>ä¸»æœºå‘é€<strong>7bitsè®¾å¤‡åœ°å€</strong></li>
<li><strong>R/W</strong>ä½ç½®0â€”â€”å†™0ï¼Œè¯»1</li>
<li>ç­‰å¾…åº”ç­”</li>
<li>ä¸»æœºå‘é€<strong>ä»è®¾å¤‡å¯„å­˜å™¨åœ°å€</strong></li>
<li>ç­‰å¾…åº”ç­”</li>
<li>å†™å…¥æ•°æ®</li>
<li>ç­‰å¾…åº”ç­”</li>
<li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·ï¼Œæ“ä½œç»“æŸã€‚</li>
</ol>
<p><img src="https://s2.loli.net/2022/11/02/zMwCgD3Qt1vx5cy.png" alt="IIC_3.png"></p>
<h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>æ­¤å¤„ä»…ä¸ºå‘é€ä¸€ä¸ªå­—èŠ‚çš„æµç¨‹ï¼Œå®Œæ•´æµç¨‹è¯·å‚è€ƒä¸‹æ–¹PCA9685å®æˆ˜ä»£ç </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">IIC_Send_Byte</span><span class="params">(u8 txd)</span></span><br><span class="line">&#123;                        </span><br><span class="line">    u8 t;   </span><br><span class="line">	SDA_OUT(); 	    </span><br><span class="line">    IIC_SCL=<span class="number">0</span>;<span class="comment">//Ã€Â­ÂµÃÃŠÂ±Ã–Ã“Â¿ÂªÃŠÂ¼ÃŠÃ½Â¾ÃÂ´Â«ÃŠÃ¤</span></span><br><span class="line">    <span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">8</span>;t++)</span><br><span class="line">    &#123;              </span><br><span class="line">        IIC_SDA=(txd&amp;<span class="number">0x80</span>)&gt;&gt;<span class="number">7</span>;</span><br><span class="line">        txd&lt;&lt;=<span class="number">1</span>; 	  </span><br><span class="line">		delay_us(<span class="number">2</span>); </span><br><span class="line">		IIC_SCL=<span class="number">1</span>;</span><br><span class="line">		delay_us(<span class="number">2</span>); </span><br><span class="line">		IIC_SCL=<span class="number">0</span>;	</span><br><span class="line">		delay_us(<span class="number">2</span>);</span><br><span class="line">    &#125;	 </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h2 id="READè¯»æ“ä½œ"><a href="#READè¯»æ“ä½œ" class="headerlink" title="READè¯»æ“ä½œ"></a>READè¯»æ“ä½œ</h2><h3 id="åè®®æµç¨‹-1"><a href="#åè®®æµç¨‹-1" class="headerlink" title="åè®®æµç¨‹"></a>åè®®æµç¨‹</h3><ol>
<li>å‰ä¸¤ä¸ªå­—èŠ‚ä¸å†™æ“ä½œç›¸åŒ</li>
<li>ä¸»æœºé‡å¤å‘é€ä¸€æ¬¡<strong>START</strong>ä¿¡å·</li>
<li>ä¸»æœºå‘é€ä»è®¾å¤‡åœ°å€</li>
<li><strong>R/Wç½®</strong><span class='p red'>1</span>â€”â€”è¯»æ“ä½œ</li>
<li>ç­‰å¾…åº”ç­”</li>
<li>ä¸»æœºè¯»å–æ•°æ®</li>
<li>ä¸»æœº<strong>ä¸å‘é€</strong>åº”ç­”ä¿¡å·</li>
<li>ä¸»æœºå‘é€<strong>STOP</strong>ä¿¡å·</li>
</ol>
<p><img src="https://s2.loli.net/2022/11/02/hQueywRLE3xf4v5.png" alt="IIC_4.png"></p>
<h3 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>åŒæ ·æ˜¯åªè¯»å–ä¸€ä¸ªå­—èŠ‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">u8 <span class="title function_">IIC_Read_Byte</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> ack)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> i,receive=<span class="number">0</span>;</span><br><span class="line">	SDA_IN();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++ )</span><br><span class="line">	&#123;</span><br><span class="line">        IIC_SCL=<span class="number">0</span>; </span><br><span class="line">        delay_us(<span class="number">2</span>);</span><br><span class="line">		IIC_SCL=<span class="number">1</span>;</span><br><span class="line">        receive&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(READ_SDA)receive++;   </span><br><span class="line">		delay_us(<span class="number">1</span>); </span><br><span class="line">    &#125;					 </span><br><span class="line">    <span class="keyword">if</span> (!ack)</span><br><span class="line">        IIC_NAck();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        IIC_Ack();</span><br><span class="line">    <span class="keyword">return</span> receive;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PCA9685èŠ¯ç‰‡"><a href="#PCA9685èŠ¯ç‰‡" class="headerlink" title="PCA9685èŠ¯ç‰‡"></a>PCA9685èŠ¯ç‰‡</h2><p>èŠ¯ç‰‡æ‰‹å†Œï¼š<a target="_blank" rel="noopener" href="https://semitia.top/upload_flies/PCA9685.pdf">https://semitia.top/upload_flies/PCA9685.pdf</a></p>
<p>èŠ¯ç‰‡æ‰‹å†Œçš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åœ¨è¿™é‡Œåªè®°å½•ä¸€äº›ä½¿ç”¨æŒ‡å¯¼æ€§ç›¸å¯¹æ›´é«˜çš„ä¸€äº›å†…å®¹ï¼ˆä¸»è¦å‚è€ƒç¬¬ä¸ƒå°èŠ‚ï¼‰ã€‚</p>
<h2 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h2><h3 id="è®¾å¤‡åœ°å€"><a href="#è®¾å¤‡åœ°å€" class="headerlink" title="è®¾å¤‡åœ°å€"></a>è®¾å¤‡åœ°å€</h3><p><img src="https://s2.loli.net/2022/11/02/zYo4QDi6RUrBw1L.png" alt="IIC_5.png"></p>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹è®¾å¤‡åœ°å€æ˜¯<strong>0x40</strong>ï¼Œå¦‚æœç®—ä¸Šæœ€å<strong>R/W</strong>ä½çš„è¯å°±æ˜¯<strong>0x80</strong>ã€‚</p>
<p>åœ¨æ¨¡å—ä¸Šèƒ½å¤Ÿçœ‹åˆ°å…­ä¸ªç•™ç©ºçš„ç„Šç‚¹ï¼Œå¯ä»¥é€‰æ‹©æŠŠéƒ¨åˆ†ç„Šç‚¹ç„Šä¸Šï¼Œè®¾å¤‡çš„åœ°å€å¯¹åº”ä½å°±ä¼šè¢«<strong>ç½®ä¸€</strong>ã€‚æ¯”å¦‚æŠŠ<strong>ç¬¬0ä½</strong>ç„Šä¸Šï¼Œåœ°å€å°±å˜ä¸ºäº†<strong>1000001</strong>ã€‚</p>
<h3 id="å¯„å­˜å™¨åœ°å€"><a href="#å¯„å­˜å™¨åœ°å€" class="headerlink" title="å¯„å­˜å™¨åœ°å€"></a>å¯„å­˜å™¨åœ°å€</h3><p>è¿™æ˜¯éƒ¨åˆ†å¯„å­˜å™¨æ€»è§ˆè¡¨ï¼Œä¸€å…±æœ‰16ä¸ªledã€‚å„ä¸ªå¯„å­˜å™¨çš„åœ°å€ä¹Ÿéƒ½å¾ˆæ¸…æ¥šåœ°åˆ—äº†å‡ºæ¥</p>
<p><img src="https://s2.loli.net/2022/11/02/mXtORuGvFCWUkNr.png" alt="IIC_6.png"></p>
<h2 id="éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»"><a href="#éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»" class="headerlink" title="éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»"></a>éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»</h2><h3 id="MODE1å¯„å­˜å™¨"><a href="#MODE1å¯„å­˜å™¨" class="headerlink" title="MODE1å¯„å­˜å™¨"></a>MODE1å¯„å­˜å™¨</h3><p><img src="https://s2.loli.net/2022/11/02/oJsCdm8rMcOBLFj.png" alt="IIC_7.png"></p>
<p>æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯<strong>ç¬¬å››ä½</strong>ï¼Œå³<strong>SLEEP</strong>ä½ï¼Œå› ä¸ºåœ¨è¯»å†™å…¶ä»–å¯„å­˜å™¨çš„æ—¶å€™ä¼šéœ€è¦å°†èŠ¯ç‰‡ä¼‘çœ ï¼Œå¾…ä¼šåœ¨åŸç ä»‹ç»ä¸­ä¹Ÿä¼šè§åˆ°ã€‚</p>
<p><img src="https://s2.loli.net/2022/11/02/KA7VLulbwsmYzqn.png" alt="IIC_8.png"></p>
<h3 id="LED-ON-OFF-H-L"><a href="#LED-ON-OFF-H-L" class="headerlink" title="LED_ON_OFF_H_L"></a>LED_ON_OFF_H_L</h3><p>æ¯ä¸ªPWM(led)è¾“å‡ºç«¯å£çš„é…ç½®å¯¹åº”å››ä¸ªå¯„å­˜å™¨</p>
<ul>
<li>LEDn_ON_H</li>
<li>LEDn_ON_L</li>
<li>LEDn_OFF_H</li>
<li>LED_OFF_L</li>
</ul>
<p>æ¯ä¸ªå¯„å­˜å™¨æ˜¯<strong>8ä½</strong>å¯„å­˜å™¨ï¼Œä½†æ˜¯<strong>ON</strong>æˆ–<strong>OFF</strong>åªä¼šåˆ†åˆ«å‚¨å­˜<strong>åäºŒä½</strong>çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯<em>L</em>å­˜8ä½ï¼Œ<em>H</em>å­˜4ä½</p>
<p><img src="https://s2.loli.net/2022/11/02/lFafpNvyibHqVjo.png" alt="IIC_9.png"></p>
<p>å…·ä½“çš„å¯„å­˜å™¨æ•°æ®å’ŒPWMæ³¢å½¢çš„å…³ç³»å¦‚ä¸‹</p>
<blockquote>
<p>â€‹    <strong>ON</strong>å’Œ<strong>OFF</strong>åˆ†åˆ«å­˜å‚¨ç€èŒƒå›´<strong>0~4096</strong>çš„å€¼(ç¡®å®æ˜¯4096è€Œé4095)ï¼Œæˆ‘ä»¬æŠŠä¸¤ä¸ªå€¼è®°ä½œ<strong>cnt_on, cnt_off</strong>å§ã€‚æœ‰ä¸€ä¸ªè®¡æ•°å™¨ä»0è®¡æ•°åˆ°<strong>4095</strong>ï¼Œæˆ‘ä»¬æŠŠè®¡æ•°å™¨çš„å€¼è®°ä½œ<strong>CNT</strong>ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯<code>cnt_on &lt; cnt_off</code>ï¼š</p>
<ul>
<li>å½“<code>CNT == cnt_on</code>æ—¶ï¼ŒPWMæ³¢<strong>ç”±ä½å˜é«˜</strong>ï¼›</li>
<li>å½“<code>CNT == cnt_off</code>æ—¶ï¼ŒPWMæ³¢<strong>ç”±é«˜å˜ä½</strong>ï¼›</li>
</ul>
<p>å½“<code>cnt_off &lt; cnt_on</code>æ—¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªå‘¨æœŸå†…<code>CNT == cnt_off</code>ä¸åšå˜åŒ–ã€‚</p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæ§åˆ¶ç²¾åº¦æ˜¯<strong>1/4096</strong>å‘¨æœŸã€‚</p>
</blockquote>
<p>å…·ä½“çš„PWMè°ƒåˆ¶æ–¹æ³•æˆ‘ä»¬ç»“åˆå®˜æ–¹æ‰‹å†Œé‡Œé¢ç»™å‡ºçš„ä¸¤ä¸ªä¾‹å­å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼š</p>
<p><img src="https://s2.loli.net/2022/11/02/e9yZhwCiX5AImpc.png" alt="IIC_10.png"></p>
<p>ï¼ˆè¿™é‡Œæˆ‘æ„Ÿè§‰ <em>Fig 7</em> å›¾é‡Œçš„<strong>819</strong>æ˜¯ä¸æ˜¯åº”è¯¥æ˜¯<strong>410</strong>ï¼‰</p>
<p><img src="https://s2.loli.net/2022/11/02/82lKZfsdSYL9EnW.png" alt="IIC_11.png"></p>
<h3 id="PRE-SCALE"><a href="#PRE-SCALE" class="headerlink" title="PRE_SCALE"></a>PRE_SCALE</h3><p><img src="https://s2.loli.net/2022/11/02/Y9Ch54OApUxLM8e.png" alt="IIC_12.png"></p>
<p>â€‹    <strong>PRE_SCALE</strong>å¯„å­˜å™¨ç”¨ä»¥è°ƒåˆ¶PWMé¢‘ç‡ã€‚é©±åŠ¨èˆµæœºçš„è¯æˆ‘ä»¬éœ€è¦<strong>20ms</strong>çš„è„‰å†²ï¼Œé¢‘ç‡ä¸º<strong>50Hz</strong>ã€‚</p>
<p>â€‹    å¦‚æœå­¦ä¹ è¿‡STM32ç”¨å®šæ—¶å™¨è¾“å‡ºPWMçš„è¯åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ï¼Œåªä¸è¿‡è¿™é‡Œçš„<strong>è‡ªåŠ¨é‡è£…è½½å€¼</strong>å›ºå®šä¸º4096ã€‚</p>
<p>â€‹    æ—¶é’Ÿç»™å‡ºçš„æ˜¯<strong>25MHz</strong>çš„é¢‘ç‡ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®<strong>nåˆ†é¢‘</strong>ï¼Œé‚£ä¹ˆ<strong>è®¡æ•°å™¨</strong>å°±ä¼šæ¯è¿‡<strong>$\frac{n}{25000000}$</strong>ç§’è®¡æ•°ä¸€æ¬¡ï¼Œé‚£ä¹ˆ$T_n = \frac{4096n}{25000000}$ç§’å°±æ˜¯ä¸€ä¸ªå‘¨æœŸã€‚å‡å¦‚æˆ‘ä»¬è¦<strong>50Hz</strong>çš„è„‰å†²ï¼Œé‚£ä¹ˆå‘¨æœŸåº”è¯¥æ˜¯<strong>20ms</strong>ï¼Œä»¤$T_n == 0.02s$ï¼Œè§£å¾—nï¼Œé‚£ä¹ˆåˆ†é¢‘ç³»æ•°è®¾ç½®ä¸º<strong>n-1</strong>å³å¯ã€‚</p>
<p>â€‹    ä¸ºä»€ä¹ˆè¦å‡å»ä¸€å‘¢ï¼Ÿå› ä¸ºä¸åˆ†é¢‘å…¶å®ä¹Ÿå°±æ˜¯<strong>ä¸€åˆ†é¢‘</strong>ï¼Œä½†æ˜¯é»˜è®¤<code>prescale value == 0</code>æ—¶æ˜¯ä¸åˆ†é¢‘ã€‚</p>
<h2 id="ä»£ç å®ç°-3"><a href="#ä»£ç å®ç°-3" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>ï¼ˆå›æ¥å†å†™ä¸€ç‚¹æ³¨é‡Šï¼‰</p>
<h3 id="Writeå†™æ•°æ®"><a href="#Writeå†™æ•°æ®" class="headerlink" title="Writeå†™æ•°æ®"></a>Writeå†™æ•°æ®</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">pca_write1</span><span class="params">(u8 adr,u8 data)</span></span><br><span class="line">&#123; </span><br><span class="line">	IIC_Start();</span><br><span class="line"></span><br><span class="line">	IIC_Send_Byte(pca_adr1);</span><br><span class="line">	IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">	IIC_Send_Byte(adr);</span><br><span class="line">	IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">	IIC_Send_Byte(data);</span><br><span class="line">	IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">	IIC_Stop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Readè¯»æ•°æ®"><a href="#Readè¯»æ•°æ®" class="headerlink" title="Readè¯»æ•°æ®"></a>Readè¯»æ•°æ®</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">u8 <span class="title function_">pca_read1</span><span class="params">(u8 adr)</span></span><br><span class="line">&#123;</span><br><span class="line">	u8 data;</span><br><span class="line">	IIC_Start();</span><br><span class="line"></span><br><span class="line">	IIC_Send_Byte(pca_adr1);</span><br><span class="line">	IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">	IIC_Send_Byte(adr);</span><br><span class="line">	IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">	IIC_Start();</span><br><span class="line"></span><br><span class="line">	IIC_Send_Byte(pca_adr1|<span class="number">0x01</span>);</span><br><span class="line">	IIC_Wait_Ack();</span><br><span class="line"></span><br><span class="line">	data=IIC_Read_Byte(<span class="number">0</span>);</span><br><span class="line">	IIC_Stop();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®åˆ†é¢‘ç³»æ•°"><a href="#è®¾ç½®åˆ†é¢‘ç³»æ•°" class="headerlink" title="è®¾ç½®åˆ†é¢‘ç³»æ•°"></a>è®¾ç½®åˆ†é¢‘ç³»æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">pca_setfreq1</span><span class="params">(<span class="type">float</span> freq)</span> </span><br><span class="line">&#123;</span><br><span class="line">	u8 prescale,oldmode,newmode;</span><br><span class="line">	<span class="type">double</span> prescaleval;</span><br><span class="line">	freq *= <span class="number">0.92</span>; </span><br><span class="line">	prescaleval = <span class="number">25000000</span>;</span><br><span class="line">	prescaleval /= <span class="number">4096</span>;</span><br><span class="line">	prescaleval /= freq;</span><br><span class="line">	prescaleval -= <span class="number">1</span>;</span><br><span class="line">	prescale =<span class="built_in">floor</span>(prescaleval + <span class="number">0.5f</span>);</span><br><span class="line"></span><br><span class="line">	oldmode = pca_read1(pca_mode1);</span><br><span class="line"></span><br><span class="line">	newmode = (oldmode&amp;<span class="number">0x7F</span>) | <span class="number">0x10</span>; <span class="comment">// sleep</span></span><br><span class="line"></span><br><span class="line">	pca_write1(pca_mode1, newmode); <span class="comment">// go to sleep</span></span><br><span class="line"></span><br><span class="line">	pca_write1(pca_pre, prescale); <span class="comment">// set the prescaler</span></span><br><span class="line"></span><br><span class="line">	pca_write1(pca_mode1, oldmode);</span><br><span class="line">	delay_ms(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	pca_write1(pca_mode1, oldmode | <span class="number">0xa1</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒåˆ¶PWMå ç©ºæ¯”"><a href="#è°ƒåˆ¶PWMå ç©ºæ¯”" class="headerlink" title="è°ƒåˆ¶PWMå ç©ºæ¯”"></a>è°ƒåˆ¶PWMå ç©ºæ¯”</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">pca_setpwm1</span><span class="params">(u8 num, u32 on, u32 off)</span> </span><br><span class="line">&#123;</span><br><span class="line">	pca_write1(LED0_ON_L+<span class="number">4</span>*num,on);</span><br><span class="line">	pca_write1(LED0_ON_H+<span class="number">4</span>*num,on&gt;&gt;<span class="number">8</span>);</span><br><span class="line">	pca_write1(LED0_OFF_L+<span class="number">4</span>*num,off);</span><br><span class="line">	pca_write1(LED0_OFF_H+<span class="number">4</span>*num,off&gt;&gt;<span class="number">8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ ‡ç­¾å¤–æŒ‚æµ‹è¯•"><a href="#æ ‡ç­¾å¤–æŒ‚æµ‹è¯•" class="headerlink" title="æ ‡ç­¾å¤–æŒ‚æµ‹è¯•"></a>æ ‡ç­¾å¤–æŒ‚æµ‹è¯•</h1><emp>ç€é‡å·</emp>
<span class='p red'>çº¢è‰²</span>
<div class="note info modern"><p>info æç¤ºå—æ ‡ç­¾</p>
</div>
<div class="tip ban faa-flash animated"><p>ban</p>
</div>
<h1 id="LaTeXæ¸²æŸ“æµ‹è¯•"><a href="#LaTeXæ¸²æŸ“æµ‹è¯•" class="headerlink" title="LaTeXæ¸²æŸ“æµ‹è¯•"></a>LaTeXæ¸²æŸ“æµ‹è¯•</h1><h4 id="æ–¹å·®ï¼š"><a href="#æ–¹å·®ï¼š" class="headerlink" title="æ–¹å·®ï¼š"></a>æ–¹å·®ï¼š</h4><script type="math/tex; mode=display">\sigma_x^2 = \frac{1}{n}\sum(x_i - \bar{x})^2</script><p>æ–¹å·®è¶Šå¤§ï¼Œæ•°æ®æ³¢åŠ¨è¶Šå¤§</p>
<h4 id="åæ–¹å·®ï¼š"><a href="#åæ–¹å·®ï¼š" class="headerlink" title="åæ–¹å·®ï¼š"></a>åæ–¹å·®ï¼š</h4><script type="math/tex; mode=display">\sigma_x\sigma_y = \sigma_y\sigma_x = \frac{1}{n}\sum(x_i - \bar{}x)(y_i - \bar{y})</script><p>åæ–¹å·®è¶Šå°ï¼ŒX,Yç›¸å…³æ€§è¶Šä½</p>
<h4 id="åæ–¹å·®çŸ©é˜µï¼š"><a href="#åæ–¹å·®çŸ©é˜µï¼š" class="headerlink" title="åæ–¹å·®çŸ©é˜µï¼š"></a>åæ–¹å·®çŸ©é˜µï¼š</h4><script type="math/tex; mode=display">\begin{bmatrix}\sigma_x^2 & \sigma_x\sigma_y & \sigma_x\sigma_z \\ \sigma_y\sigma_x & \sigma_y^2 & \sigma_y\sigma_z \\ \sigma_z\sigma_x & \sigma_z\sigma_y & \sigma_z^2\\ \end{bmatrix}</script><h4 id="è¿‡æ¸¡çŸ©é˜µ"><a href="#è¿‡æ¸¡çŸ©é˜µ" class="headerlink" title="è¿‡æ¸¡çŸ©é˜µ"></a>è¿‡æ¸¡çŸ©é˜µ</h4><p>è¿‡æ¸¡çŸ©é˜µ<strong>a</strong>ç”¨ä»¥è®¡ç®—åæ–¹å·®çŸ©é˜µ<strong>P</strong>ï¼š</p>
<script type="math/tex; mode=display">P = \frac{1}{n}a^Ta</script><p>ç»“åˆå…¬å¼å®¹æ˜“ç†è§£ï¼š(æ­¤å¤„ä¸º3x3çŸ©é˜µ)</p>
<script type="math/tex; mode=display">a = \begin{bmatrix}x1 & y1 & z1 \\ x2 & y2 & z2 \\ x3 & y3 & z3 \\ \end{bmatrix} - \frac{1}{3}\begin{bmatrix}1 & 1 & 1 \\ 1 & 1 & 1 \\ 1 & 1 & 1 \\ \end{bmatrix}\begin{bmatrix}x1 & y1 & z1 \\ x2 & y2 & z2 \\ x3 & y3 & z3 \\ \end{bmatrix}</script><p>è¢«å‡æ•°å³ä¸º<strong>åŸçŸ©é˜µ</strong>ï¼Œè€Œå‡æ•°åˆ™ä¸º<strong>å¹³å‡å€¼çŸ©é˜µ</strong></p>
<h3 id="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"><a href="#çŠ¶æ€ç©ºé—´æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"></a>çŠ¶æ€ç©ºé—´æ–¹ç¨‹</h3><script type="math/tex; mode=display">\hat{X}_k = A\hat{X}_{k-1} + Bu_{k-1} + W_{k-1}</script><script type="math/tex; mode=display">Z_k = HX_k + V_k</script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://example.com">Semitia</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2022/11/01/test/">http://example.com/2022/11/01/test/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/08/15/3gh8feXsdYWMT2a.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/11/01/%E8%88%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97%E8%B0%83%E8%AF%95%E7%AC%94%E8%AE%B0/"><img class="prev-cover" src="https://s2.loli.net/2022/10/22/1cmKWnzpGHvxsEh.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">IIC &amp; PCA9685</div></div></a></div><div class="next-post pull-right"><a href="/2022/10/29/%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/"><img class="next-cover" src="https://s2.loli.net/2022/10/22/5DEVMqUlS7dkfIT.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">æœ‰è¶£çš„ä½è¿ç®—</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2022/08/15/ibSydGxMB9rYvAu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Semitia</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Semitia"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Semitia" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:3272979503@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Welcom to my tiny blog ğŸ˜<div class="twopeople"><div class="twopeople"><div class="container"style="height:200px;"><canvas class="illo"width="800"height="800"style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;"></canvas></div><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script><script id="rendered-js"src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AF%87%E5%B9%85%E6%B5%8B%E8%AF%95"><span class="toc-number">1.</span> <span class="toc-text">ç¯‡å¹…æµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E4%BB%8E%E6%9C%BA%E7%9A%84%E4%B8%80%E8%88%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">1.2.</span> <span class="toc-text">ä¸»æœºè®¿é—®ä»æœºçš„ä¸€èˆ¬æµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%EF%BC%9A"><span class="toc-number">1.2.1.</span> <span class="toc-text">å‘é€æ•°æ®ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%9A"><span class="toc-number">1.2.2.</span> <span class="toc-text">æ¥æ”¶æ•°æ®ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#START%E5%92%8CSTOP%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.3.</span> <span class="toc-text">STARTå’ŒSTOPä¿¡å·</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">ä»£ç å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#START"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">START</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#STOP"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">STOP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ACK-NACK-%E6%9C%89%E6%97%A0%E5%BA%94%E7%AD%94"><span class="toc-number">1.4.</span> <span class="toc-text">ACK&#x2F;NACK æœ‰æ— åº”ç­”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WRITE%E5%86%99%E6%93%8D%E4%BD%9C"><span class="toc-number">1.5.</span> <span class="toc-text">WRITEå†™æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E6%B5%81%E7%A8%8B"><span class="toc-number">1.5.1.</span> <span class="toc-text">åè®®æµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1"><span class="toc-number">1.5.2.</span> <span class="toc-text">ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#READ%E8%AF%BB%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.</span> <span class="toc-text">READè¯»æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E6%B5%81%E7%A8%8B-1"><span class="toc-number">1.6.1.</span> <span class="toc-text">åè®®æµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-number">1.6.2.</span> <span class="toc-text">ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PCA9685%E8%8A%AF%E7%89%87"><span class="toc-number">1.7.</span> <span class="toc-text">PCA9685èŠ¯ç‰‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80"><span class="toc-number">1.8.</span> <span class="toc-text">åœ°å€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E5%9C%B0%E5%9D%80"><span class="toc-number">1.8.1.</span> <span class="toc-text">è®¾å¤‡åœ°å€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%9C%B0%E5%9D%80"><span class="toc-number">1.8.2.</span> <span class="toc-text">å¯„å­˜å™¨åœ°å€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%AF%84%E5%AD%98%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.9.</span> <span class="toc-text">éƒ¨åˆ†å¯„å­˜å™¨ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MODE1%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">1.9.1.</span> <span class="toc-text">MODE1å¯„å­˜å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LED-ON-OFF-H-L"><span class="toc-number">1.9.2.</span> <span class="toc-text">LED_ON_OFF_H_L</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PRE-SCALE"><span class="toc-number">1.9.3.</span> <span class="toc-text">PRE_SCALE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-3"><span class="toc-number">1.10.</span> <span class="toc-text">ä»£ç å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Write%E5%86%99%E6%95%B0%E6%8D%AE"><span class="toc-number">1.10.1.</span> <span class="toc-text">Writeå†™æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Read%E8%AF%BB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.10.2.</span> <span class="toc-text">Readè¯»æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%88%86%E9%A2%91%E7%B3%BB%E6%95%B0"><span class="toc-number">1.10.3.</span> <span class="toc-text">è®¾ç½®åˆ†é¢‘ç³»æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E5%88%B6PWM%E5%8D%A0%E7%A9%BA%E6%AF%94"><span class="toc-number">1.10.4.</span> <span class="toc-text">è°ƒåˆ¶PWMå ç©ºæ¯”</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82%E6%B5%8B%E8%AF%95"><span class="toc-number">2.</span> <span class="toc-text">æ ‡ç­¾å¤–æŒ‚æµ‹è¯•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#LaTeX%E6%B8%B2%E6%9F%93%E6%B5%8B%E8%AF%95"><span class="toc-number">3.</span> <span class="toc-text">LaTeXæ¸²æŸ“æµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%B7%AE%EF%BC%9A"><span class="toc-number">3.0.0.1.</span> <span class="toc-text">æ–¹å·®ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E6%96%B9%E5%B7%AE%EF%BC%9A"><span class="toc-number">3.0.0.2.</span> <span class="toc-text">åæ–¹å·®ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E6%96%B9%E5%B7%AE%E7%9F%A9%E9%98%B5%EF%BC%9A"><span class="toc-number">3.0.0.3.</span> <span class="toc-text">åæ–¹å·®çŸ©é˜µï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E6%B8%A1%E7%9F%A9%E9%98%B5"><span class="toc-number">3.0.0.4.</span> <span class="toc-text">è¿‡æ¸¡çŸ©é˜µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%A9%BA%E9%97%B4%E6%96%B9%E7%A8%8B"><span class="toc-number">3.0.1.</span> <span class="toc-text">çŠ¶æ€ç©ºé—´æ–¹ç¨‹</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/11/04/Kalman%20filter%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="å¡å°”æ›¼æ»¤æ³¢å­¦ä¹ ç¬”è®°"><img src="https://s2.loli.net/2022/10/22/vNqFRVgunTHQS5t.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å¡å°”æ›¼æ»¤æ³¢å­¦ä¹ ç¬”è®°"/></a><div class="content"><a class="title" href="/2022/11/04/Kalman%20filter%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="å¡å°”æ›¼æ»¤æ³¢å­¦ä¹ ç¬”è®°">å¡å°”æ›¼æ»¤æ³¢å­¦ä¹ ç¬”è®°</a><time datetime="2022-11-03T16:25:22.000Z" title="Created 2022-11-04 00:25:22">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/01/%E8%88%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97%E8%B0%83%E8%AF%95%E7%AC%94%E8%AE%B0/" title="IIC &amp; PCA9685"><img src="https://s2.loli.net/2022/10/22/1cmKWnzpGHvxsEh.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IIC &amp; PCA9685"/></a><div class="content"><a class="title" href="/2022/11/01/%E8%88%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97%E8%B0%83%E8%AF%95%E7%AC%94%E8%AE%B0/" title="IIC &amp; PCA9685">IIC &amp; PCA9685</a><time datetime="2022-11-01T04:24:36.000Z" title="Created 2022-11-01 12:24:36">2022-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/01/test/" title="test"><img src="https://s2.loli.net/2022/08/15/3gh8feXsdYWMT2a.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="test"/></a><div class="content"><a class="title" href="/2022/11/01/test/" title="test">test</a><time datetime="2022-11-01T04:24:36.000Z" title="Created 2022-11-01 12:24:36">2022-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/29/%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/" title="æœ‰è¶£çš„ä½è¿ç®—"><img src="https://s2.loli.net/2022/10/22/5DEVMqUlS7dkfIT.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æœ‰è¶£çš„ä½è¿ç®—"/></a><div class="content"><a class="title" href="/2022/10/29/%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/" title="æœ‰è¶£çš„ä½è¿ç®—">æœ‰è¶£çš„ä½è¿ç®—</a><time datetime="2022-10-29T03:20:57.000Z" title="Created 2022-10-29 11:20:57">2022-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/22/STM32%E4%BB%BF%E7%9C%9F%E5%99%A8%E7%A8%8B%E5%BA%8F%E7%83%A7%E5%BD%95/" title="STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•"><img src="https://s2.loli.net/2022/10/22/ufdxMAtZ6RvPQ9i.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•"/></a><div class="content"><a class="title" href="/2022/10/22/STM32%E4%BB%BF%E7%9C%9F%E5%99%A8%E7%A8%8B%E5%BA%8F%E7%83%A7%E5%BD%95/" title="STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•">STM32ä»¿çœŸå™¨ç¨‹åºçƒ§å½•</a><time datetime="2022-10-22T05:52:19.000Z" title="Created 2022-10-22 13:52:19">2022-10-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Semitia</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})
setTimeout(function(){preloader.endLoading();}, 5000);</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script src="cheat.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="/img/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_clock')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_injector_config();
  }
  </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://unpkg.zhimg.com/hexo-butterfly-clock/lib/clock.min.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>